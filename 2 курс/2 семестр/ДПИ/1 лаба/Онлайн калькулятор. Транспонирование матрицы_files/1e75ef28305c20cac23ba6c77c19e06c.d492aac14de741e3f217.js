(self.webpackChunkvk=self.webpackChunkvk||[]).push([[83063],{25891:(_,e,o)=>{"use strict";function t(){return{icon:'<svg fill="none" height="12" viewBox="0 0 12 12" width="12" xmlns="http://www.w3.org/2000/svg"><path d="M3.53 2.46a.75.75 0 0 0-1.07 1.07L4.94 6 2.46 8.47a.75.75 0 1 0 1.07 1.07L6 7.06l2.47 2.48a.75.75 0 0 0 1.07-1.07L7.06 6l2.48-2.47a.75.75 0 1 0-1.07-1.07L6 4.94z" fill="currentColor"/></svg>',name:"cancel_12"}}o.d(e,{getIcon12Cancel:()=>t})},163323:(_,e,o)=>{"use strict";function t(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12.73 11.48a.75.75 0 0 1 .94-.5 7.26 7.26 0 0 1 1.64.71 4.22 4.22 0 0 1 2.15 3.2.75.75 0 0 1-1.49.19 2.72 2.72 0 0 0-1.43-2.1 5.76 5.76 0 0 0-1.3-.56.75.75 0 0 1-.5-.94ZM6 5a4 4 0 1 1 4 4 .75.75 0 0 1 0-1.5A2.5 2.5 0 1 0 7.5 5 .75.75 0 0 1 6 5ZM3.22 17.36c.45.42 1.08.64 1.78.64h9.44l.78.78a.75.75 0 1 0 1.06-1.06L3.78 5.22a.75.75 0 0 0-1.06 1.06l4.48 4.48c-.95.2-1.8.5-2.51.93A4.23 4.23 0 0 0 2.5 15.5c0 .81.27 1.44.72 1.86Zm2.24-4.38A2.74 2.74 0 0 0 4 15.5c0 .46.14.67.25.77.12.11.35.23.75.23h7.94l-4.42-4.42c-1.27.13-2.31.45-3.06.9Z" clip-rule="evenodd"/></svg>',name:"user_slash_outline_20"}}o.d(e,{getIcon20UserSlashOutline:()=>t})},120170:(_,e,o)=>{"use strict";function t(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="m12 10.3-5.36 4.47a1 1 0 1 1-1.28-1.54l6-5a1 1 0 0 1 1.28 0l6 5a1 1 0 1 1-1.28 1.54L12 10.3Z"/></svg>',name:"chevron_up_24"}}o.d(e,{getIcon24ChevronUp:()=>t})},315893:(_,e,o)=>{"use strict";function t(_,e){var o,t,l=!1;return function i(){if(l)return o=arguments,void(t=this);_.apply(this,arguments),l=!0,setTimeout((function(){l=!1,o&&(i.apply(t,o),o=t=null)}),e)}}o.d(e,{throttle:()=>t})},601261:(_,e,o)=>{"use strict";o.d(e,{ON_BOARDING_BG_RECT_ID:()=>r,default:()=>d});var t=o(315544),l=o(49535),i=o(803834),a=o(696547),s=o(99392),r="onboarding_bg_rect",n="page_header_cont",E="onboarding";class d{constructor(_,e,o){var t;void 0===o&&(o={}),this.el=_,this.text=e,this.hideDarkness=!0,this.oldColor=!1;var l,i,a={autoShow:!1,noAutoHideOnWindowClick:null==(t=o.noAutoHideOnWindowClick)||t,content:e instanceof HTMLElement?e:`${e}`,cls:`feature_intro_tt tutorial_tip_tt ${i=null!=(l=o.class)?l:"",o.tooltipWhite?i:i+" feature_intro_blue_tt"}`,appendToParent:!0,onHide:this.ttOnHide.bind(this),scrollOffset:o.scrollOffset||0,align:o.align||s.ElementTooltip.ALIGN_CENTER};o.side&&(a.forceSide=o.side),o.offset&&(a.offset=o.offset),o.width&&(a.width=o.width),o.shift&&(a.centerShift=o.shift),o.border?this.border=o.border:this.border=[10,10,10,10],o.ttOnHide&&(a.onHide=o.ttOnHide),o.withCloseButton&&(a.withCloseButton=o.withCloseButton,a.onCloseButtonClick=o.onCloseButtonClick),o.align&&(a.align=o.align),this.ttParams=a,this.opts=o,this.initOnboardingBG()}initOnboardingBG(){if(!window.onboardingBG){var _=(0,t.se)('\n<div id="onboarding_layout">\n  <svg id="onboarding_bg_header" width="100%" height="49px">\n    <rect id="onboarding_bg_rect" class="GroupOnboardingBg" x="0" y="0" width="100%" height="100%" fill-opacity="0.8" fill="#000"></rect>\n  </svg>\n  <svg id="onboarding_bg" width="100%" height="100%">\n  <defs>\n    <mask id="mask" x="0" y="0" width="100%" height="100%">\n      <rect x="0" y="0" width="100%" height="100%" fill="#fff"></rect>\n      <rect id="onboarding_bg_clip" class="GroupOnboardingBgClip" x="0" y="0" width="0" height="0" fill="#000" rx="8" ry="8"></rect>\n    </mask>\n  </defs>\n  <rect id="onboarding_bg_rect" class="GroupOnboardingBg" x="0" y="42" width="100%" height="100%" mask="url(#mask)" fill-opacity="0.8"></rect>\n  </svg>\n</div>\n      ');(0,t.domInsertBefore)(_,window.layerBG),window.onboardingBGHeader=(0,t.ge)("onboarding_bg_header"),window.onboardingBG=(0,t.ge)("onboarding_bg"),window.onboardingBGRect=(0,t.ge)(r),window.onboardingBGClip=(0,t.ge)("onboarding_bg_clip"),window.cur.destroy.push((()=>{(0,t.hide)(window.onboardingBG),(0,t.hide)(window.onboardingBGHeader),(0,t.removeClass)((0,t.ge)(n),E),this.hideDarkness=!0,this.hideTT(),delete window.onboardingBG,delete window.onboardingBGHeader,delete window.onboardingBGRect,delete window.onboardingBGClip,this.opts.onBGClick&&(0,l.removeEvent)(window.onboardingBG,"click",this.opts.onBGClick)}))}this.opts.onBGClick&&(0,l.addEvent)(window.onboardingBG,"click",this.opts.onBGClick)}showTT(){var _=(0,t.getXY)(this.el)[1];this.tt=new s.ElementTooltip(this.el,this.ttParams),this.opts.highlight&&(this.addDarkness(),this.addHighlight()),this.tt.show();var e=this.tt.getContent();(0,a.isElementInViewport)(this.el)&&(0,a.isElementInViewport)(e)||(0,i.scrollToY)(_-42-this.ttParams.scrollOffset)}hideTT(){this.tt&&(this.tt.destroy(),this.removeDarkens(),this.hideDarkness&&((0,l.removeEvent)(window,"scroll"),(0,l.removeEvent)(window,"resize")),this.opts.onBGClick&&window.onboardingBG&&(0,l.removeEvent)(window.onboardingBG,"click",this.opts.onBGClick),this.opts.onHide&&this.opts.onHide())}addHighlight(){window.onboardingBGClip&&(this.highlightElement(),(0,l.addEvent)(window,"scroll",this.onScrollTT.bind(this)),(0,l.addEvent)(window,"resize",this.onResizeTT.bind(this)))}highlightElement(){var _=this.el.offsetWidth,e=this.el.offsetHeight,o=(0,t.getXY)(this.el);(0,t.attr)(window.onboardingBGClip,"width",_+this.border[1]+this.border[3]),(0,t.attr)(window.onboardingBGClip,"height",e+this.border[0]+this.border[2]),(0,t.attr)(window.onboardingBGClip,"x",o[0]-this.border[1]),(0,t.attr)(window.onboardingBGClip,"y",o[1]-this.border[0])}onResizeTT(){this.setDartToFullWidth(),this.highlightElement()}onScrollTT(){var _=this.getPageHeight();window.onboardingBG.height!=_&&this.setDartToFullHeight()}setDartToFullHeight(){(0,t.attr)(window.onboardingBG,"height",this.getPageHeight())}setDartToFullWidth(){(0,t.attr)(window.onboardingBG,"width",this.getPageWidth()),(0,t.attr)(window.onboardingBGHeader,"width",this.getPageWidth())}addDarkness(){(0,t.isVisible)(window.onboardingBG)||(this.setDartToFullHeight(),this.setDartToFullWidth(),(0,t.show)(window.onboardingBG),(0,t.isVisible)(window.onboardingBGHeader)||((0,t.show)(window.onboardingBGHeader),(0,t.addClass)((0,t.ge)(n),E)))}removeDarkens(){this.hideDarkness&&((0,t.hide)(window.onboardingBG),(0,t.hide)(window.onboardingBGHeader),(0,t.removeClass)((0,t.ge)(n),E))}ttOnHide(){this.hideTT()}show(){setTimeout(this.showTT.bind(this),1e3)}getPageWidth(){var _=document.documentElement,e=document.body;return Math.max(e.scrollWidth,_.scrollWidth,e.offsetWidth,_.offsetWidth,e.clientWidth,_.clientWidth)}getPageHeight(){var _=document.documentElement,e=document.body;return Math.max(e.scrollHeight,_.scrollHeight,e.offsetHeight,_.offsetHeight,e.clientHeight,_.clientHeight)}}},696547:(_,e,o)=>{"use strict";function t(_){var e=_.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}o.d(e,{isElementInViewport:()=>t})},375617:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(382526),core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(141817),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(892222),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(57327),core_js_modules_es_array_from__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(491038),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(226699),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(682772),core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(66992),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(821249),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(747042),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(140561),core_js_modules_es_object_assign__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(319601),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(241539),core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(788674),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(324603),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(339714),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(132023),core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(804723),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(115306),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(864765),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(323123),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(454747),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(333948),core_js_modules_web_url__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(560285),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(535666),_icons_desktop_getIcon24ChevronUp__WEBPACK_IMPORTED_MODULE_82__=__webpack_require__(120170),_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(45634),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(726271),_web_lib_market__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(787910),_shared_lib_site__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(961540),_web_wall_post_subscribe_action_post_subscribe_action__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(836455),_web_wall_post_update_view_utils__WEBPACK_IMPORTED_MODULE_88__=__webpack_require__(329979),_web_wall_wall_post_elem_utils__WEBPACK_IMPORTED_MODULE_89__=__webpack_require__(96535),_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(659397),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(70162),_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(315544),_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(850167),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(49535),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(376852),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(146143),_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(386409),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(26330),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(695724),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(486125),_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(460615),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(803834),_web_lib_fx__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(635676),_web_lib_video__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(325489),_web_lib_lang__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(786067),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(668040),_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(376270),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(787481),_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(100416),_web_lib_utils__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(982452),_web_donut__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(452644),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(371066),_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(507794),_web_ui_media_selector_ui_media_selector__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(833796),_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(911372),_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__=__webpack_require__(40906),_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_57__=__webpack_require__(963188),_web_wall_deep_replies_utils__WEBPACK_IMPORTED_MODULE_58__=__webpack_require__(934821),_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__=__webpack_require__(175382),_web_wall_reply_utils__WEBPACK_IMPORTED_MODULE_83__=__webpack_require__(639809),_web_wall_wall_post_render__WEBPACK_IMPORTED_MODULE_60__=__webpack_require__(870841),_web_wall_wall_utils__WEBPACK_IMPORTED_MODULE_61__=__webpack_require__(29376),_internal_nospam_public__WEBPACK_IMPORTED_MODULE_85__=__webpack_require__(906523),_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_62__=__webpack_require__(399103),_web_lib_date__WEBPACK_IMPORTED_MODULE_63__=__webpack_require__(289988),_shared_donut_stats_donut_log__WEBPACK_IMPORTED_MODULE_64__=__webpack_require__(801221),_shared_lib_best_friends_analytics__WEBPACK_IMPORTED_MODULE_65__=__webpack_require__(880235),_web_stories_narrative_utils__WEBPACK_IMPORTED_MODULE_66__=__webpack_require__(652745),_web_articles_article_utils__WEBPACK_IMPORTED_MODULE_67__=__webpack_require__(749140),_web_reports_reports__WEBPACK_IMPORTED_MODULE_68__=__webpack_require__(186699),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_69__=__webpack_require__(19331),_web_likes_helpers__WEBPACK_IMPORTED_MODULE_87__=__webpack_require__(465864),_icons_desktop_getIcon12Cancel__WEBPACK_IMPORTED_MODULE_84__=__webpack_require__(25891),_icons_desktop_getIcon20UserOutline__WEBPACK_IMPORTED_MODULE_80__=__webpack_require__(429449),_icons_desktop_getIcon20UserSlashOutline__WEBPACK_IMPORTED_MODULE_81__=__webpack_require__(163323),_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_70__=__webpack_require__(171516),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__=__webpack_require__(124041),_web_page_wall_utils__WEBPACK_IMPORTED_MODULE_72__=__webpack_require__(689840),_web_ecomm_classifieds_legacy_injects_ClassifiedsWallForm__WEBPACK_IMPORTED_MODULE_73__=__webpack_require__(367733),_web_stickers_utils__WEBPACK_IMPORTED_MODULE_74__=__webpack_require__(348230),_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__=__webpack_require__(287503),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_76__=__webpack_require__(635429),_web_profile_profile_utils__WEBPACK_IMPORTED_MODULE_77__=__webpack_require__(579449),_shared_components_avatar_renderAvatarToString__WEBPACK_IMPORTED_MODULE_78__=__webpack_require__(761717),_shared_utils_reflow__WEBPACK_IMPORTED_MODULE_90__=__webpack_require__(434396),_shared_lib_nav_helpers__WEBPACK_IMPORTED_MODULE_86__=__webpack_require__(997109),_web_ecomm_onboarding_Tooltips_services_TooltipEventService__WEBPACK_IMPORTED_MODULE_79__=__webpack_require__(222519);function _extends(){return _extends=Object.assign||function(_){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(_[t]=o[t])}return _},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(_,e){if(null==_)return{};var o,t,l={},i=Object.keys(_);for(t=0;t<i.length;t++)o=i[t],e.indexOf(o)>=0||(l[o]=_[o]);return l}function asyncGeneratorStep(_,e,o,t,l,i,a){try{var s=_[i](a),r=s.value}catch(_){return void o(_)}s.done?e(r):Promise.resolve(r).then(t,l)}function _asyncToGenerator(_){return function(){var e=this,o=arguments;return new Promise((function(t,l){var i=_.apply(e,o);function a(_){asyncGeneratorStep(i,t,l,a,s,"next",_)}function s(_){asyncGeneratorStep(i,t,l,a,s,"throw",_)}a(void 0)}))}}var Wall={LS_ADS_EVENTS:"ads.events",deleteAll:function(_,e,o){ajax.post("al_wall.php",{act:"delete_all",post:e,hash:o},{onDone:function(e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_));o.oldt=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(o,e)},showProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_).appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{className:"progress"})))},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(_))}})},restoreAll:function(_,e,o){var t=Math.floor(1e5*Math.random());cur.wallRnd=t,ajax.post("al_wall.php",{act:"restore_all",post:e,hash:o,rnd:t},{onDone:function(e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(o,o.oldt)},showProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_).appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("span",{className:"progress_inline"})))},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(_))}})},deleteThread:function(_,e,o){ajax.post("al_wall.php",{act:"delete_thread",post:e,hash:o,from_deleted:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+e),"reply_deleted")},{onDone:function(o){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("dld_inner",_);if(t)t.oldElements=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(t,o);else{var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+e),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("reply_wrap",l);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(i),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{id:"post_del"+e,className:"dld",innerHTML:'<span class="dld_inner">'+o+"</span>"}),l.appendChild(t)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)("replies_wrap_deep"+e)},showProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(_);var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post_actions",_);if(e)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(e,"post_actions_progress");else{var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(_);o||(o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{className:"progress"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_).appendChild(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(o))}},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(_);var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post_actions",_);e?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(e,"post_actions_progress"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(_))}})},restoreThread:function(_,e,o){ajax.post("al_wall.php",{act:"restore_thread",post:e,hash:o},{onDone:function(){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)("replies_wrap_deep"+e),o.oldElements)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(o,o.oldElements);else{var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("reply_wrap","post"+e);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)("post_del"+e)}},showProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(_);var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(_);e||(e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{className:"progress"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_).appendChild(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(e))},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(_))}})},block:function(_,e,o,t,l){ajax.post("al_wall.php",{act:"block",post:e,hash:o,bl:t,from:l},{onDone:function(e){t?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_).insertBefore((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("span",{innerHTML:e}),_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(_)):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_))),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_)))},showProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.showProgress)(_,"post_inline_progress","post_inline_progress",!0)},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)("post_inline_progress")}})},blockEx:function(_,e){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showBox)("groupsedit.php",{act:"bl_edit",name:"id"+e,gid:_,auto:1},{stat:["page.css","ui_controls.js","ui_controls.css"],dark:1})},withMentions:!(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.mozilla&&_shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.version.match(/^2\./)||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.mobile),editPost:function(_,e,o,t,l){if(cur.editingPost&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wpe_text")){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wall_posts",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wpe_text"));if(!i||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(i))return t&&t(),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.notaBene)("wpe_text");Wall.cancelEdit()}cur.editingPost=[e],Wall.withMentions?window.stManager.add(["ui_controls.css","ui_controls.js",window.jsc("web/wall_edit.js")]):window.stManager.add([window.jsc("web/wall_edit.js")]),ajax.post("al_wall.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)({act:"edit",post:e,mention:Wall.withMentions?1:""},o),{onDone:function(){var _,t=Array.prototype.slice.call(arguments);if((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(t[4])&&cur.options&&(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(cur.options.filter_media_types)){var i=[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(t[4],(function(_,e){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(cur.options.filter_media_types,(function(_,o){if(e[0]===o[0])return i.push(o),!1}))})),t[4]=i}t.unshift(e),o&&o.fromAds&&t.push(o.fromAds),(null==(_=cur.classifiedsWallForm)?void 0:_.isClassifiedsAutoRecognitionBarEnabled())&&cur.classifiedsWallForm.hideAutoRecognitionPostBar(e),cur.isYoulaProductPublishedWebFlashMessageEnabled&&Wall.handleClassifiedsFlashMessageState("hide"),WallEdit.editPost.apply(window,t),l&&l()},onFail:function(){cur.editingPost=!1,t&&t()},showProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"ui_actions_menu_item")?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockActionsMenuItem)(_):_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.isFlatButton(_)?_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.lock(_):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("post_actions","post"+e),"post_actions_progress")},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"ui_actions_menu_item")?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockActionsMenuItem)(_):_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.isFlatButton(_)?_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.unlock(_):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("post_actions","post"+e),"post_actions_progress")},noSort:!0})},fixPost:function fixPost(link,post,hash,value){return ajax.post("al_wall.php",{act:"a_fix_post",post,hash,value},{onDone:function onDone(js){if(js)try{eval(js)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_48__.logEvalError)(_,js)}var postEl=cur.wallLayer==post?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wl_post"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+post);(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("post_fixed"),(function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(this,"post_fixed")})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(postEl,"post_fixed",value),link&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(link,value?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_unfix_post"):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_fix_post")),link.onclick=function(){return Wall.fixPost(link,post,hash,value?0:1)}),cur.onWKFix&&(cur.onWKFix(value),delete cur.onWKFix)},showProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(link,"ui_actions_menu_item")?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockActionsMenuItem)(link):_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton.pbind("wpe_fix"+post)},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(link,"ui_actions_menu_item")?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockActionsMenuItem)(link):_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton.pbind("wpe_fix"+post)}}),!1},cancelEdit:function(_){if(cur.editingPost){if(!0===_&&cur.editingPost[0].match(/^-?\d+_/))return;window.WallEdit?WallEdit.cancelEditPost():cur.editingPost=!1}},searchWall:function(){},switchTabContent:function(_){switch((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)("page_wall_posts","page_postponed_posts","page_suggested_posts","page_search_posts","page_top_posts","page_archive_posts","page_donut_posts"),_){case"own":case"all":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)("page_wall_posts");break;case"postponed":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)("page_postponed_posts"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)("wall_more_link");break;case"suggested":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)("page_suggested_posts");break;case"search":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)("page_search_posts");break;case"top":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)("page_top_posts");break;case"archive":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)("page_archive_posts");break;case"donut":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)("page_donut_posts")}},switchWall:function(_,e,o){var t;if(e&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.checkEvent)(e))return!0;if(o||(o="own"==cur.wallType?"all":"own"),e&&"click"==e.type&&e.clientX&&e.offsetX&&cur.wallTab==o&&cur.wallType==o&&"top"!==o)return nav.go(_,e);if("postponed"==cur.wallTab&&wall.checkPostponedCount(),"archive"!==cur.wallTab&&"archive"!==o||((cur.wallLayer?wkcur:cur).wallMyDeleted={}),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.isFunction)(cur.wallArchiveFeatureTooltipHide)&&cur.wallArchiveFeatureTooltipHide(),!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.inArray)(o,["top","archive","donut"])){var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_wall_posts");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(l,"own"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(l,"all"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(l,o)}cur.wallType=o,cur.wallTab=o,uiTabs.switchTab(_),uiTabs.hideProgress(_),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.inArray)(o,["top","archive","donut"])?(cur.baseWallModule=cur.module,cur.module="wall_"+o,cur.topWallFeatureTT&&cur.topWallFeatureTT.hide()):cur.baseWallModule&&(cur.module=cur.baseWallModule,delete cur.baseWallModule);var i="donut"===o&&Wall.cantAccessDonutPosts();return Wall.hasPosts()||i?(Wall.update(),Wall.showWall()):(cur.wallNextFrom=0,cur.wallTopNextFrom=0,cur.wallArchiveNextFrom=0,cur.wallArchiveRestored=0,cur.wallArchiveArchived=0,cur.wallArchiveRolledback=0,cur.wallDonutNextFrom=0,"top"===o?delete cur.wallTopFinished:"archive"===o?delete cur.wallArchiveFinished:"donut"===o&&delete cur.wallDonutFinished,uiTabs.showProgress(_),Wall.showMore(0,_)),(null==_||null==(t=_.dataset)?void 0:t.donutLogEvent)&&(0,_shared_donut_stats_donut_log__WEBPACK_IMPORTED_MODULE_64__.logDonutEvent)(_.dataset.donutLogEvent),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(e)},resetWall:function(){if(cur.wallType&&cur.wallTab){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("_wall_tab_"+cur.wallType);_&&(cur.wallNextFrom=0,cur.wallTopNextFrom=0,cur.wallArchiveNextFrom=0,(cur.wallLayer?wkcur:cur).wallMyDeleted={},"top"===cur.wallType?delete cur.wallTopFinished:"archive"===cur.wallType?delete cur.wallArchiveFinished:"donut"===cur.wallType&&delete cur.wallDonutFinished,uiTabs.showProgress(_),Wall.showMore(0,_,!0))}},hasPosts:function(_){_=_||cur.wallType;var e=Wall.getPostsWrap(_);return!!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("post",e)},getPostsWrap:function(_){switch(_){case"archive":return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_archive_posts");case"top":return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_top_posts");case"donut":return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_donut_posts");default:return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_wall_posts")}},showSuggested:function showSuggested(ev,rows,notAll){if(ev&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.checkEvent)(ev))return!0;if(!cur.oid)return!1;var el=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_wall_suggest");if(el=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(el,"unshown")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domQuery1)("#page_wall_suggest_more .ui_tab_group_item"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("ui_tab",el),!el)return!1;if(uiTabs.switchTab(el),cur.wallTab="suggested",delete cur.suggestedDeletedCount,void 0!==rows)wall.suggestLoaded(rows,notAll);else{if(cur.suggestedLoading)return!1;var curOid=cur.suggestedLoading=cur.oid;uiTabs.showProgress(el),ajax.post("al_wall.php",{act:"get_suggests",owner_id:cur.oid},{onDone:function onDone(rows,notAll,js,count){if(js)try{eval(js)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_48__.logEvalError)(_,js)}cur.suggestedLoading=!1,uiTabs.hideProgress(el),Wall.updateTabCounter("page_wall_suggested_cnt",count),curOid===cur.oid&&"suggested"==cur.wallTab&&wall.suggestLoaded.apply(window,arguments)}})}return!1},deleteSuggested:function(_,e,o,t){if(!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isButtonLocked)(t)){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton)(t);var l=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showFastBox)({title:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_action_confirmation"),onHide:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton)(t)}},(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_delete_suggested_box"),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_delete_suggested_btn"),(function(t){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isButtonLocked)(t)||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton)(t),ajax.post("al_wall.php",{act:"delete_suggested",post_id:_,hash:o,group_id:e},{onDone:function(_){if("full_own"==cur.wallType||"full_all"==cur.wallType){var e=(Math.ceil(_/cur.pgPerPage)-1)*cur.pgPerPage;e<cur.pgOffset&&(e>0?nav.objLoc.offset=e:delete nav.objLoc.offset,nav.setLoc(nav.objLoc)),nav.reload()}else Wall.showSuggested();l.hide()},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton)(t),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton)(t)}))}),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_cancel"))}},suggestLoaded:function(_,e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_suggested_posts",_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggle)("wall_more_link",e),wall.switchTabContent("suggested")},suggestMore:function(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_suggested_posts"),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_more_link");(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isButtonLocked)(e)||ajax.post("al_wall.php",{act:"get_suggests",owner_id:cur.oid,offset:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("post",_).length-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("dld",_).length},{onDone:function(o,t){for(var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{innerHTML:o}),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domFC)(l);i;)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(i.id)||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(i,"post")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(i):_.appendChild(i),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domFC)(l);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggle)(e,t)},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton.pbind(e),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton.pbind(e)})},suggestUpdate:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_suggests_count"),o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(e));e&&(-1!==_&&1!==_||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(e,o+=_),Wall.updateTabCounter("page_wall_suggested_cnt",o))},suggestPublished:function(_,e,o){if(cur.onepost)return nav.go("/wall"+cur.oid);if(Wall.suggestUpdate(-1),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.showDoneBox)(e),cur.wallMyDeleted[_]=1,cur.editingPost=!1,Wall.deinitComposer((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wpe_text")),"full_own"!=cur.wallType&&"full_all"!=cur.wallType||(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)),cur.postWpeIsPoster=!!cur.posterWpeSendParams,cur.posterWpe&&cur.posterWpeSendParams&&WallEdit.posterDestroy(),o&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_postponed_posts",o),wall.postponeUpdateCount()),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_suggests_count")))(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)("post"+_);else{var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_rmenu");t?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("ui_rmenu_item",t).click(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("_wall_menu_suggested",t))):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_tabs")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("ui_tab",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_tabs")).click(),wall.updateTabVisibility("page_wall_suggest",!1))}},showDonutWall:function(_){if(!cur.oid)return!1;var e="donut";Wall.updateTabVisibility("page_wall_donut",!0);var o=Wall.getWallTabLink(e);if(!o)return!1;uiTabs.switchTab(o),cur.wallTab=e,cur.wallType=e,void 0!==_&&Wall.donutWallSetRows(_)},donutWallSetRows(_){var e="donut",o=Wall.getPostsWrap(e);o&&(o.innerHTML=_,Wall.switchTabContent(e),Wall.update())},getWallTabLink:_=>{var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(`page_wall_${_}`);return((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(e,"unshown")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domQuery1)(`#page_wall_${_}_more .ui_tab_group_item`):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("ui_tab",e))||null},showPostponedFull:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("ui_rmenu_postponed"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_wall_posts");if(!e||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(e,"ui_rmenu_item_sel")||!o){var t={0:nav.objLoc[0],postponed:1};return nav.go(t)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(o,_),FullWall.updateSummary((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("post",o).length)},showPostponed:function(_,e){if(_&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.checkEvent)(_))return!0;if(!cur.oid)return!1;var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_wall_postponed");if(!(o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"unshown")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domQuery1)("#page_wall_postponed_more .ui_tab_group_item"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("ui_tab",o)))return!1;if(uiTabs.switchTab(o),cur.wallTab="postponed",void 0!==e)Wall.postponedLoaded(e);else{if(cur.postponedLoading)return!1;var t=cur.postponedLoading=cur.oid;uiTabs.showProgress(o),ajax.post("al_wall.php",{act:"get_postponed",owner_id:cur.oid},{onDone:function(_){cur.postponedLoading=!1,uiTabs.hideProgress(o),t===cur.oid&&"postponed"==cur.wallTab&&Wall.postponedLoaded(_)}})}return!1},postponedLoaded:function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_postponed_posts",_),wall.postponeUpdateCount(),wall.switchTabContent("postponed")},postponeUpdateCount:function(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_postponed_posts"),e=_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("post",_).length-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("dld",_).length||0;_&&Wall.updateTabCounter("page_wall_postponed_cnt",e)},checkPostponedCount:function(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("post","page_postponed_posts"),e=0;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(_,(function(){var _=this.id.replace("post","");cur.wallMyDeleted[_]||e++})),e||wall.updateTabVisibility("page_wall_postponed",!1)},updateTabCounter:function(_,e){e=e?(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_45__.langNumeric)(e,"%s",!0):"",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)(_).forEach((function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(_,e);var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"ui_tab_group_item")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(o,"default-label",o.innerHTML)}))},updateTabVisibility:function(_,e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_wall_more_tab");if(o)if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(o))if(e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"unshown")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_+"_more","unshown")){var t=!1;cur.wallTabsMorePriority.forEach((function(e){t||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(e,"unshown")||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(e,"unshown"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(e+"_more","unshown"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(_,"unshown"),t=!0)})),t||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(_+"_more","unshown")}}else{var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(l,"unshown"))(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_+"_more"),"unshown");else{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(l,"unshown");var i=cur.wallTabsLimit-1-(0,_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_62__.getNavigableTabs)(o).length;if(i>0){var a=i;cur.wallTabsMorePriority.forEach((function(_){if(!(a<=0)){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_+"_more");e&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(e,"unshown")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_),"unshown"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(e,"unshown"),a--)}}))}}var s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("ui_tab_group_item",o);s.length-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("unshown",o).length<=1&&(s.forEach((function(_){_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"unshown")||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_.id.replace(/_more$/,"")),"unshown"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(_,"unshown"))})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(o,"unshown"))}else{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_),"unshown",!e);var r=(0,_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_62__.getNavigableTabs)(o).length;if(r>cur.wallTabsLimit){var n=r-(cur.wallTabsLimit-1);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("ui_tab_group_item",o).forEach((function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(_,"unshown")})),cur.wallTabsMorePriority.forEach((function(_){if(!(n<=0)){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_);e&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(e,"unshown")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(e,"unshown"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_+"_more"),"unshown"),n--)}})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(o,"unshown"),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.statlogsValueEvent)("wall_more_tab_shown",cur.oid)}}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_),"unshown",!e)},postponedPublished:function(_,e){if(cur.onepost)return nav.go("/wall"+cur.oid);"full_own"!=cur.wallType&&"full_all"!=cur.wallType||(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)),e&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.showDoneBox)(e),cur.wallMyDeleted[_]=1;var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("post",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_postponed_posts")),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_);if(o.length<=1&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.inArray)(t,o)){var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_rmenu");l?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("ui_rmenu_item",l).click(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("_wall_menu_postponed",l))):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_tabs")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("ui_tab",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_tabs")).click(),wall.updateTabVisibility("page_wall_postponed",!1))}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(t),wall.postponeUpdateCount()},onWallSearchSend:function(_,e){e?Wall.showSearch(e,0):Wall.hideSearch()},showSearch:function(_,e){if(cur.searchLoading&&cur.searchLoading==_||!cur.oid)return!1;var o=cur.oid;cur.wallQuery=cur.searchLoading=_,"search"!=cur.wallTab&&(cur.prevWallTab=cur.wallTab,cur.wallTab="search");var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_more_link"),l=+new Date;return ajax.post("al_wall.php",{act:"s",search:1,q:_,owner_id:cur.oid,offset:e,inline:1,owners_only:1},{onDone:function(i,a,s){if(o===cur.oid&&"search"==cur.wallTab){var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_search_posts");e||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(r,""),r.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.cf)(i)),wall.switchTabContent("search"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggle)(t,a<s),t.onclick=Wall.showSearch.pbind(_,a);var n=cur.oid>0?_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.serviceWallUsers:_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.serviceWallGroups,E=+new Date-l;(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.saveSearchAttemptStats)(n,0,s,_,0,0,E)}},showProgress:function(){uiSearch.showProgress("wall_search"),e&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton)(t)},hideProgress:function(){cur.searchLoading=!1,uiSearch.hideProgress("wall_search"),e&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton)(t)}}),!1},hideSearch:function(){if(delete cur.wallQuery,cur.prevWallTab){var _=(cur.oid,_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.serviceWallUsers);(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.removeSearchPositionTracker)(_),cur.wallTab=cur.prevWallTab,cur.prevWallTab=!1,wall.switchTabContent(cur.wallTab),wall.update()}},publishPostponedPost:function(_,e,o){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showFastBox)((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_action_confirmation"),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_publish_postponed_confirm"),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_publish_postponed_btn"),(function(){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.curBox)().hide(),ajax.post("al_wall.php",{act:"publish_postponed",post:_,from:o,hash:e},{onDone:Wall.postponedPublished.pbind(_),showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton.pbind("wpe_publish"+_),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton.pbind("wpe_publish"+_)})}),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_cancel"))},publishFreeDonutCopy:function(_,e,o,t){var l=_.currentTarget,i=t?{title:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_warning"),content:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_publish_donut_as_free_confirmation_warn")}:{title:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_publish_donut_as_free_confirmation_title"),content:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_publish_donut_as_free_confirmation_confirm")},a=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showFastBox)(i.title,i.content,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_publish_donut_as_free_confirmation_btn"),(()=>{var _=()=>{a.hide()},t=a.btns.ok[0];ajax.post("al_wall.php",{act:"publish_free_donut_copy",post_id:e,hash:o},{onDone:e=>{Wall.publishFreeDonutCopyDone({menuActionEl:l,message:e}),_()},onFail:()=>{_()},showProgress:()=>{(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton)(t)},hideProgress:()=>{(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton)(t)}})}),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_cancel"))},publishFreeDonutCopyDone(_){var e=_.message,o=_.menuActionEl;"full_own"!==cur.wallType&&"full_all"!==cur.wallType||(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)),e&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.showDoneBox)(e,{timeout:3e3}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(o)},cmp:function(_,e){var o=_.length,t=e.length;return o<t?-1:o>t?1:_<e?-1:_>e?1:0},cleanBlocksDefault:["page_top_posts","page_wall_posts","page_archive_posts","page_donut_posts"],cleanBlocks:function(_){void 0===_&&(_=Wall.cleanBlocksDefault),_.forEach((function(_){if("page_donut_posts"!==_||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_donut_info"))for(var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_));e;){var o=e;e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(e),o.tagName&&"input"===o.tagName.toLowerCase()||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(o)}}))},receive:function(_,e,o,t){t=!0===t;var l,i,a,s,r="top"===(o=o||cur.wallType),n="archive"===o,E="donut"===o,d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{innerHTML:_}),c=!!cur.options.revert,b=Wall.getPostsWrap(o),P=[],u=[],D=0;if(t)u=Wall.cleanBlocksDefault;else{var p=[[n,"page_archive_posts"],[r,"page_top_posts"],[E,"page_donut_posts"],[!0,"page_wall_posts"]].find((_=>_[0]))[1];u=Wall.cleanBlocksDefault.filter((_=>_!==p)),a=c?b.firstChild:b.lastChild}function w(_){return!!(_&&_.tagName&&"div"===_.tagName.toLowerCase()&&_.id&&"post"===_.id.substr(0,4))&&_.id}Wall.cleanBlocks(u);for(var M=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(c?d.firstChild:d.lastChild);M;M=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(c?d.firstChild:d.lastChild))if("input"!=M.tagName.toLowerCase()){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(M,"post_fixed")||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(M.id))if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(M,"_ads_promoted_post"))P.push({el:M,beforePost:w(c?d.firstChild:l),afterPost:w(c?l:d.lastChild)});else{for(;a&&a.tagName&&"div"==a.tagName.toLowerCase()&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(a,"post_fixed")&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(a,"_ads_promoted_post")||!r&&!n&&Wall.cmp(a.id,M.id)<0);)a=c?a.nextSibling:a.previousSibling;++D,a?Wall.cmp(a.id,M.id)?(s=a,(i=c?a.previousSibling:a.nextSibling)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(i,"_ads_promoted_post")&&(s=i),c?b.insertBefore(M,s):b.insertBefore(M,s.nextSibling)):(b.replaceChild(M,a),a=M,--D):c?b.appendChild(M):b.insertBefore(M,b.firstChild),l=M,(0,_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_49__.placeholderSetup)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByTag1)("textarea",M),{fast:1})}}else{var O=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(M.id);O?b.replaceChild(M,O):b.firstChild?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertBefore)(M,b.firstChild):b.appendChild(M)}if(P.length)for(var m=0,C=P.length;m<C;++m){var T=P[m];if(T.beforePost||T.afterPost){for(var g="no_position",B=c?b.firstChild:b.lastChild;B;B=c?B.nextSibling:B.previousSibling){s=null;var A=w(B);if(A){if(T.beforePost===A?s=B:T.afterPost===A&&(s=B.nextSibling),s&&(s.previousSibling&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(s.previousSibling,"_ads_promoted_post")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(s,"_ads_promoted_post"))){s=null,g="ads_sibling";break}if(s){b.insertBefore(T.el,s),g=!1;break}}}g&&(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.statlogsValueEvent)("debug_watch",1,"js_page_ads_promoted_post_no_position",g)}}r&&!D?cur.wallTopFinished=cur.oid:n&&!D?cur.wallArchiveFinished=cur.oid:E&&!D&&(cur.wallDonutFinished=cur.oid),"full_own"!==o&&"full_all"!==o||(Pagination.recache(D),FullWall.updateSummary(cur.pgCount)),Wall.update(),wall.addReplyNames(e),Wall.updateMentionsIndex(),D&&(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_33__.getAudioPlayer)().updateCurrentPlaying()},showMore:function(_,e,o){if(cur.viewAsBox)return cur.viewAsBox();if(!cur.wallLayer){if("suggested"===cur.wallTab)return Wall.suggestMore();if(!(cur.wallTypeLoading&&cur.wallTypeLoading[cur.wallType]||"top"===cur.wallType&&cur.wallTopFinished===cur.oid||"archive"===cur.wallType&&cur.wallArchiveFinished===cur.oid||"donut"===cur.wallType&&cur.wallDonutFinished===cur.oid)){var t=cur.wallType,l="top"===t,i="archive"===t,a="donut"===t,s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_more_link"),r=cur.wallLoading=cur.oid,n=l&&!!cur.wallTopOnlyCache,E="";0!==_&&(E=i?cur.wallArchiveNextFrom:l?cur.wallTopNextFrom:a?cur.wallDonutNextFrom:cur.wallNextFrom),cur.wallTypeLoading=cur.wallTypeLoading||{},cur.wallTypeLoading[t]=!0,o=!0===o&&!_,ajax.post("al_wall.php",{act:"get_wall",owner_id:cur.oid,offset:_,type:t,fixed:cur.options.fixed_post_id||"",wall_start_from:E,onlyCache:n},{onDone:function(s,n,E,d){return e&&uiTabs.hideProgress(e),r!==cur.oid||t!==cur.wallType?(delete cur.wallLoading,void delete cur.wallTypeLoading[t]):l&&(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isObject)(s)&&s.wait?(cur.wallTopLoadingDelay=cur.wallTopLoadingDelay?cur.wallTopLoadingDelay+100:200,void(cur.wallTopLoadingDelay<500?setTimeout((function(){delete cur.wallLoading,delete cur.wallTypeLoading[t],Wall.showMore(_)}),cur.wallTopLoadingDelay):(delete cur.wallLoading,delete cur.wallTypeLoading[t],cur.wallTopOnlyCache=!1,Wall.showMore(_)))):(delete cur.wallTopLoadingDelay,cur.wallVideos&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(E,(function(_,e){cur.wallVideos[_]&&(cur.wallVideos[_].list=cur.wallVideos[_].list.concat(e.list))})),i?cur.wallArchiveNextFrom=d:l?cur.wallTopNextFrom=d:a?cur.wallDonutNextFrom=d:cur.wallNextFrom=d,void setTimeout((function(){Wall.receive(s,n,t,o),_||t!==cur.wallType||Wall.showWall(),delete cur.wallLoading,delete cur.wallTypeLoading[t]}),0))},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton.pbind(s),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton.pbind(s)})}}},showWall:function(){wall.switchTabContent(cur.wallType);var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domClosest)("wall_module",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_wall_posts")))[1];_<(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollGetY)()&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollToY)(_-15)},checkTextLen:function(_,e,o){var t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(Emoji.editableVal(_).replace(/\n\n\n+/g,"\n\n"));if(_.lastLen!==t.length||o){var l=_.lastLen=t.length,i=(cur.options||{}).max_post_len||(window.mvcur||{}).maxReplyLength,a=l-t.replace(/\n/g,"").length;e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(e),l>i-100||a>4?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(e),e.innerHTML=l>i?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_recommended_exceeded",l-i):a>4?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_recommended_lines",a-4):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("text_N_symbols_remain",i-l)):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(e),window.FullWall&&cur.onepost&&FullWall.onePostOnScroll()}else window.FullWall&&cur.onepost&&FullWall.onePostOnScroll()},checkPostLen:_web_page_wall_utils__WEBPACK_IMPORTED_MODULE_72__.checkPostLen,postChanged:function(_,e){var o,t=Wall.isPosterEditorOpen();if((t||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)("submit_post"))&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("submit_post_box"),"shown")||Wall.showEditPost(void 0,!1,Boolean(e)),vk.id&&!vk.widget&&!(null==(o=cur.options)?void 0:o.no_draft)){clearTimeout(cur.postAutosave);var l=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(cur.oid)==vk.id?Wall.saveDraft:Wall.saveOwnerDraftText.pbind(cur.oid);!0===_?l():cur.postAutosave=setTimeout(l,10===_?10:1e3)}t||(setTimeout((()=>Wall.checkPostLen(window.cur.postField,window.cur.postWarningField,window.cur.sendPostBtn))),setTimeout(Wall.checkPosterAvailability))},ownerDraftKey:function(_){return(0,_web_wall_wall_utils__WEBPACK_IMPORTED_MODULE_61__.buildOwnerDraftKey)(_)},ownerDraftData:function(){return cur.wallDraftData||(cur.wallDraftData={}),cur.wallDraftData},addOwnerDraftMedia:function(_,e){var o;if(!(null==(o=cur.options)?void 0:o.no_draft)){var t=Wall.ownerDraftData(),l=e[0],i=e[1],a=e[2];t._attach_cache=t._attach_cache||{},a?t._attach_cache[l+i]=a:a=t._attach_cache[l+i],t.attaches=t.attaches||[];var s=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_38__.default.get(Wall.ownerDraftKey(_))||{};!1!==l?t.attaches.push([l,i,a,t.attaches.length]):!1===l&&void 0!==i&&(t.attaches=t.attaches.filter((function(_){return _[3]!==i}))),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_38__.default.set(Wall.ownerDraftKey(_),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(s,{txt:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clean)(Wall.getDraftData().message||""),medias:t.attaches}))}},cleanOwnerDraftMedia:function(_){var e;if(!(null==(e=cur.options)?void 0:e.no_draft)){var o=Wall.ownerDraftData(),t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_38__.default.get(Wall.ownerDraftKey(_))||{};o.attaches=[],_shared_lib_ls__WEBPACK_IMPORTED_MODULE_38__.default.set(Wall.ownerDraftKey(_),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)({txt:""},t,{medias:[]}))}},saveOwnerDraftText:function(_){var e;if(cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia),!(null==(e=cur.options)?void 0:e.no_draft)){var o=Wall.ownerDraftData(),t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_38__.default.get(Wall.ownerDraftKey(_))||{},l=Wall.getDraftData(),i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clean)(l.message||""),a=null;if(o.txt=i,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(t.medias||{},(function(_,e){switch(e[0]){case"postpone":l.postpone&&(t.medias[_][1]=l.postpone,t.medias[_][2].draft=1);break;case"poll":var o=(cur.wallAddMedia||{}).pollData(!0,!0);o&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(t.medias[_][2],o);break;case"copyright":var i=(cur.wallAddMedia||{}).copyrightData(!0);i&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(t.medias[_][2],i);break;case _web_donut__WEBPACK_IMPORTED_MODULE_51__.ATTACH_DATA_DONUT_DURATION:l[_web_donut__WEBPACK_IMPORTED_MODULE_51__.ATTACH_DATA_DONUT_DURATION]&&(t.medias[_][2]=Object.assign(t.medias[_][2]||{},{[_web_donut__WEBPACK_IMPORTED_MODULE_51__.ATTACH_DATA_DONUT_DURATION]:l[_web_donut__WEBPACK_IMPORTED_MODULE_51__.ATTACH_DATA_DONUT_DURATION]}))}})),i&&l.bkg_id&&(a={id:l.bkg_id},cur.poster&&cur.poster.isCustomBkgId(l.bkg_id)&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(a,cur.poster.getCustomBkg()),t.bkg_id&&delete t.bkg_id),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(t,{txt:i,bkg:a}),cur.shareShowImg&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(t,{shareShowImg:cur.shareShowImg}),_<0){var s=cur.poster?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("submit_post_box"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domClosest)("_submit_post_box",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("official"));(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(t,{from:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(s,"from-oid")||vk.id,signed:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)("signed")?1:0}),(0,_web_donut__WEBPACK_IMPORTED_MODULE_51__.fieldValueIsDonutOnlyPost)(s,cur.wallAddMedia)?t.donutOnly=1:delete t.donutOnly}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_38__.default.set(Wall.ownerDraftKey(_),t)}},getOwnerDraft:function(_){var e;if(null==(e=cur.options)?void 0:e.no_draft)return[];var o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_38__.default.get(Wall.ownerDraftKey(_))||[],t={from:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(o.from),signed:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(o.signed),shareShowImg:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(o.shareShowImg)};return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(o.donutOnly)&&(t.donutOnly=1),[o.txt,o.medias,!0,t,o.bkg]},saveOwnerDraftMedia:function(_,e,o,t){var l;if(!(null==(l=cur.options)?void 0:l.no_draft)){Wall.cleanOwnerDraftMedia(_);var i=cur.wallAddMedia||{},a=[],s=(cur.wallAddMedia?i.getMedias():[]).slice().map((function(_){return _.slice(0,2)}));void 0!==o&&e?a=[[e,o,t]]:e||void 0===o||s.splice(o,1),s=s.concat(a),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(s,(function(){Wall.addOwnerDraftMedia(_,this)}))}},saveDraft:function(){var _;if(cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia),!(null==(_=cur.options)?void 0:_.no_draft))if(cur.noDraftSave)cur.noDraftSave=!1;else if(!cur.postSent&&vk.id==(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(cur.oid)){var e=Wall.getDraftData();e.delayed||ajax.post("al_wall.php",Wall.fixPostParams((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)({act:"save_draft",hash:cur.options.post_hash},e)),{onFail:function(){return!0}})}},getDraftData:function(){var _;if(null==(_=cur.options)?void 0:_.no_draft)return{};var e=cur.wallAddMedia||{},o=e.chosenMedia||{},t=cur.wallAddMedia?e.getMedias():[],l=e.shareData||{},i="",a=0,s=null;if(Wall.isPosterEditorOpen())s=(i=cur.poster.getText())?cur.poster.getBkgId():null;else{var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_field");i=window.Emoji?Emoji.editableVal(r):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(r),i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(i)}var n={message:i,bkg_id:s};return(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(o)&&o.length&&t.push((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clone)(o)),t.length&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(t,(function(_,o){if(o){var t=this[0],s=this[1];switch(t){case"poll":var r=e.pollData(!0,!0);if(!r)return n.delayed=!0,!1;s=r.question,delete r.question,n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(n,r);break;case"copyright":var E=e.copyrightData(!0);if(E)return void(n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(n,E));break;case"share":if(l.failed||!l.title&&(!l.images||!l.images.length)&&!l.photo_url&&!l.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(n.delayed=!0,!1):void 0;l.video?(s=l.video_owner_id+"_"+l.video_id,n.snippet_video=1):s=l.user_id&&l.photo_id&&!l.noPhoto?l.user_id+"_"+l.photo_id:"",l.initialPattern&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(i)==l.initialPattern&&(n.message=""),l.is_vk_mini_app&&(n.is_vk_mini_app=!0,n.is_photo_edit=l.isPhotoEdit,n.image_offset=cur.shareShowImg),n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(n,{url:l.url,module:cur.module,mode:l.mode,title:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.replaceEntities)(l.title),description:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.replaceEntities)(l.description),button_text:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.replaceEntities)(l.button_text),button_action:l.button_action,extra:l.extra,extra_data:l.extraData,photo_url:l.video?"":(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.replaceEntities)(l.photo_url),open_graph_data:(l.openGraph||{}).data,open_graph_hash:(l.openGraph||{}).hash});break;case"page":l.initialPattern&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(i)==l.initialPattern&&(n.message="");break;case"postpone":var d=+e.postponeDate;return void(n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(n,{postpone:d}));case"mark_as_ads":return void(n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(n,{mark_as_ads:1}));case _web_donut__WEBPACK_IMPORTED_MODULE_51__.ATTACH_DATA_DONUT_DURATION:return void(n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(n,(0,_web_donut__WEBPACK_IMPORTED_MODULE_51__.getPostParamsFromDurationMedia)(o)))}this[3]&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(i)==this[3]&&(n.message=""),n["attach"+(a+1)+"_type"]=t,n["attach"+(a+1)]=s,a++}})),n},setDraft:function(_){var e;if(!(null==(e=cur.options)?void 0:e.no_draft)&&(_[0]||_[1]&&_[1].length||null!=_[4])){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_field");if(o){var t=_[4];t||Emoji.val(o,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clean)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.replaceEntities)(_[0]||"")).replace(/\n/g,"<br/>")),Wall.showEditPost((function(){setTimeout((function(){var e;if(t&&cur.poster){Wall.hidePosterFeatureTooltip();var l={text:_[0]||""};if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.isString)(t)?l.bkgId=_[4]:(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isObject)(t)&&(cur.poster.isCustomBkgId(t.id)&&cur.poster.addCustomBkg(t),l.bkgId=t.id),!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(Wall.getMainPostBlock()))return cur.poster.setBkg(l.bkgId,!0),cur.poster.setText(l.text),void Emoji.val(o,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clean)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.replaceEntities)(_[0])).replace(/\n/g,"<br/>"));Wall.openPosterEditor(l)}if(_[1]&&cur.wallAddMedia)for(var i in _[1])cur.noDraftSave=!0,cur.wallAddMedia.chooseMedia.apply(cur.wallAddMedia,_[1][i]);Wall.checkPosterAvailability(),Wall.saveDraft(),Wall.checkPostLen(window.cur.postField,window.cur.postWarningField,window.cur.sendPostBtn),(null==(e=window.cur.classifiedsWallForm)?void 0:e.isAutoRecognitionEnabled())&&window.cur.classifiedsWallForm.autoRecognitionPostCheck(_[0])}),0)}),!0),_[2]&&wall.focusOnEnd(),_[3]&&(wall.setReplyAsGroup((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("official"),_[3]),_[3].shareShowImg&&(cur.shareShowImgRestored=_[3].shareShowImg),_[3].donutOnly&&cur.wallAddMedia&&cur.wallAddMedia.donutPostSettings&&cur.wallAddMedia.donutPostSettings.setPostDonutOnly&&cur.wallAddMedia.donutPostSettings.setPostDonutOnly()),cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia)}}},initPostEditable:function(_){var e=cur.postField;if(!e||e.emojiInited)return!1;e.emojiInited=!0,window.stManager.add([window.jsc("web/emoji.js"),"notifier.css"],(function(){Emoji.init(e,{ttDiff:-42,rPointer:!0,controlsCont:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(e),noStickers:!0,onSend:Wall.sendPost,noEnterSend:!0,ref:"post",onChange:()=>{var _;(null==(_=window.cur.classifiedsWallForm)?void 0:_.isAutoRecognitionEnabled())&&window.cur.classifiedsWallForm.onMessageChange(Wall.getMessage())},checkEditable:Wall.postChanged,initUploadForImagePasteCallback:function(_,e,o){window.Upload&&Upload.onFileApiSend(cur.wallUploadInd,[o])}}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(e,"submit_post_inited"),_?setTimeout(Wall.setDraft.pbind(_),0):cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia)})),setTimeout((function(){cur.postFieldZoomText&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.addEvent)(e,"keydown paste",(function(){setTimeout((function(){cur.postFieldZoomText(cur.postField,cur.wallAddMedia)}),0)}))}),0)},initEmoji:function(){window.stManager.add([window.jsc("web/emoji.js")])},showEditPost:function(_,e,o){var t,l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_field");if(cur.viewAsBox)return setTimeout((function(){l.blur()}),0),cur.viewAsBox();if(0!==cur.editing){var i,a,s=document.getElementById("submit_post_box"),r={owner_id:parseInt((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(s,"oid")),posting_source:"wall",posting_form:"native_create_recognition"},n=(null==(t=window.cur.classifiedsWallForm)?void 0:t.isNativeCreateEnabled())&&!e&&(void 0===o||o);if(n)null==(i=window.ClassifiedsClickAnalytics)||i.logCreateProductClick(cur.module,r);if(setTimeout(WallUpload.init,0),Wall.initComposer(l,{lang:{introText:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("profile_mention_start_typing"),noResult:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("profile_mention_not_found")},checkLen:Wall.postChanged,onValueChange:Wall.onPostValChange,onItemSelect:Wall.onPostItemSelect},_),Wall.hideEditPostReply(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)("submit_post_box","shown"),cur.editing=0,Wall.showPosterFeatureTooltip(),Wall.showPostCopyrightFeatureTooltip(),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.isFunction)(cur.onShowEditPost)&&cur.onShowEditPost(),n)null==(a=window.ClassifiedsClickAnalytics)||a.logNativeFormLoadedClickEvent(cur.module,r);window.stManager.add(["ui_controls.css","ui_controls.js","datepicker.css",window.jsc("web/datepicker.js")])}},postBoxFocus:function(_,e){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.stopEvent)(_||window.event);var o=Wall.isPosterEditorOpen();(cur.postField&&window.Emoji||o)&&setTimeout((function(){e?o?(cur.poster.focusPoster(),(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollToY)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(cur.poster.getPosterElement())[1]-15)):(Emoji.focus(cur.postField),(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollToY)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(cur.postField)[1]-15)):o?cur.poster.focusPoster():Emoji.focus(cur.postField,!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("submit_post_box"))}),0)},initComposer:function(_,e,o){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(_,"composer"))o&&o();else if(cur.composerAdded){var t=Composer.init(_,e);o&&o(),cur.destroy.push(Composer.destroy.bind(Composer).pbind(t))}else window.stManager.add(["wide_dd.css","wide_dd.js"],(function(){cur.composerAdded=!0;var t=Composer.init(_,e);o&&o(),cur.destroy.push(Composer.destroy.bind(Composer).pbind(t))}))},deinitComposer:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(_,"composer");e&&Composer.destroy(e),_.emojiId&&window.Emoji&&Emoji.destroy(_.emojiId)},hasComposerMedia:function(_){var e=_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(_,"composer");return!(!e||!e.addMedia)&&e.addMedia.attachCount()>0},composerListShown:function(_){var e=_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(_,"composer");if(!e)return!1;var o=e.wdd,t=0;for(var l in o.shown)t+=1;return!!(o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(o.listWrap)&&t)},onPostValChange:function(_){var e;if((null==(e=window.cur.classifiedsWallForm)?void 0:e.isAutoRecognitionEnabled())&&window.cur.classifiedsWallForm.onMessageChange(_),cur.wallAddMedia&&!cur.isUrlsRecognitionDisabled&&cur.wallAddMedia.checkMessageURLs.apply(window,arguments),"full_own"!=cur.wallType&&"full_all"!=cur.wallType||Pagination.pageTopUpdated(),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.msie&&!_){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_field");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.elfocus)(o)}},onPostItemSelect:function(_){if(_&&!((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(_[0])>=0)&&cur.wallAddMedia){var e=`${(0,_shared_lib_site__WEBPACK_IMPORTED_MODULE_28__.getHostName)()}/event${-_[0]}`;cur.wallAddMedia.checkMessageURLs(e,!0)}},hideEditPost:function(_){var e;cur.editing=!1;var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_field"),t=cur.wallAddMedia||{},l=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)((window.Emoji?Emoji.editableVal:_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(o));!_shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.opera_mobile&&o&&(!_&&(l||t.chosenMedia||t.getMedias&&t.getMedias().length>0||t.activeState||t.attachCount&&t.attachCount()>0)||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)("submit_post_box","shown"),o&&!l&&cur.postMention&&(cur.postMention.options.minHeight=cur.emptyPostheight||14),null==(e=window.cur.classifiedsWallForm)||e.reset(),cur.onWallSendCancel&&cur.onWallSendCancel(),window.WallUpload&&WallUpload.hide(),cur.wallAddMedia&&cur.wallAddMedia._hideAddMedia(!0)))},clearInput:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)("page_add_media");var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_field");if(Wall.withMentions){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(_,"mention");e&&(e.rtaEl.innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(e.cont),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(_))}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(_,""),_.blur(),_.phonblur(),Wall.hideEditPost(!0),cur.wallAddMedia&&cur.wallAddMedia.unchooseMedia(void 0,void 0,{isReset:!0}),Wall.resetPostVisibilityAccess(),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.checkbox)("export_status",!1),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.checkbox)("close_comments",!1),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(window.cur.wallOnClearInput)&&window.cur.wallOnClearInput.forEach((_=>{_()}));var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(_,"composer");o&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(o.articleConvertEl),o.articleConvertEl=!1)},fixPostParams:function(_){var e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clone)(_);return e.Message=_.message,delete e.message,e},focusOnEnd:function(_){if(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_field"))if("TEXTAREA"!=_.tagName){var e=_.innerHTML?_.innerHTML.length:_.length?_.length:_.childNodes.length-1;if(_.focus(),document.selection){var o=document.selection.createRange();o.moveStart("character",e),o.select()}else window.getSelection().collapse(_,_.childNodes.length)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.elfocus)(_)},showPostSettings:function(_,e){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(_,"ett")){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(_),t=o&&o.querySelector(".Post__copyrightButton");new ElementTooltip(_,{cls:"post_settings_tooltip"+(t?" post_settings_tooltip_with_custom_btn":""),content:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(o),defaultSide:"top",offset:[0,-5],appendTo:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_)}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(o)}e&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.checkKeyboardEvent)(e)&&"click"===e.type&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(_,"ett").toggle()},togglePostVisibilityAccess:function(_,e,o,t){o=o||"";var l="post_visibility_btn",i=cur[l+o];i&&i.hide(),(0,_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_57__.updatePostTooltipActionRadioBtn)(_,e,"post_settings_btn"+l+o);var a,s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_visibility_btn"+o),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("post_action_btn_text",s),n=![_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_52__.VISIBILITY_ACCESS_OPTIONS.ONLY_FRIENDS,_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_52__.VISIBILITY_ACCESS_OPTIONS.ONLY_BEST_FRIENDS].includes(e);if(e===_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_52__.VISIBILITY_ACCESS_OPTIONS.ONLY_BEST_FRIENDS){var E=(window.event||{}).target,d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("best_friends_only"+o).querySelector(".PostVisibilityBestFriendsOnlyOption"),c=Number(d.dataset.count);E&&E.closest(".PostVisibilityBestFriendsOnlyOption__editLink")||0===c?((0,_shared_lib_best_friends_analytics__WEBPACK_IMPORTED_MODULE_65__.sendBestFriendsAnalytic)(_shared_lib_best_friends_analytics__WEBPACK_IMPORTED_MODULE_65__.BestFriendsEventType.editBestFriends),this.resetPostVisibilityAccess(),window.stManager.add([window.jsc("web/best_friends.js")],(()=>{window.bestFriendsBoxSettings((_=>{var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("best_friends_only"+o);if(0===_)e.innerHTML=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.getTemplate)("visibility_access_best_friends_only_option",{html:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_choose_best_friends"),count:_}),this.togglePostVisibilityAccess((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("no_friends_only"+o),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_52__.VISIBILITY_ACCESS_OPTIONS.PUBLIC,o,!0);else{var t=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_best_friends_settings_box_conversation_friends_count",_);e.innerHTML=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.getTemplate)("visibility_access_best_friends_only_option",{html:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.getTemplate)("visibility_access_best_friends_only_item",{count_text:t}),count:_}),this.togglePostVisibilityAccess(e,_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_52__.VISIBILITY_ACCESS_OPTIONS.ONLY_BEST_FRIENDS,o,!0)}}))}))):((0,_shared_lib_best_friends_analytics__WEBPACK_IMPORTED_MODULE_65__.sendBestFriendsAnalytic)(_shared_lib_best_friends_analytics__WEBPACK_IMPORTED_MODULE_65__.BestFriendsEventType.selectBestFriends),r.innerHTML=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_best_friends_only"),r.setAttribute("aria-label",(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_best_friends_only")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(s,"best_friends_only"))}else if(n){var b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("no_friends_only"+o).querySelector(".FancyElementTT__itemLabel").innerHTML;r.innerHTML=b,r.setAttribute("aria-label",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.replaceEntities)(b)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(s,"on"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(s,"best_friends_only")}else{var P=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("friends_only"+o).querySelector(".FancyElementTT__itemLabel").innerHTML;r.innerHTML=P,r.setAttribute("aria-label",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.replaceEntities)(P)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(s,"on"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(s,"best_friends_only")}(t||Wall.postChanged(),n)||(null==(a=window.cur.classifiedsWallForm)||a.disable())},resetPostVisibilityAccess(){Wall.canChangeVisibilityForNewPost()&&Wall.togglePostVisibilityAccess((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("no_friends_only"),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_52__.VISIBILITY_ACCESS_OPTIONS.PUBLIC,!1,!0)},canChangeVisibilityForNewPost:()=>!!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_visibility_btn"),initPostVisibilitySelector(_){Wall.canChangeVisibilityForNewPost()&&(0,_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_57__.createPostTooltip)("post_visibility_btn",_.id)},cantAccessDonutPosts:()=>!1===window.cur.donutGroupUserHasWallAccess,togglePostMarkAsAds:function(_,e){var o;e=e||"mute_notifications";var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(e);if(t){var l=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)(_);if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.disable)(t,l),l)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(t,"prev-state",+(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)(t)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(t,"on");else{var i=+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(t,"prev-state");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(t,"on",i)}null==(o=window.cur.classifiedsWallForm)||o.disable()}},needCheckSign:function(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("check_sign");return _&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)(_)},saveCheckSign:function(_){var e,o=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)(_),t=_.querySelector(".PostOption__iconWrapper"),l="",i="";o?(l=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_check_sign_disabled"),i=(0,_icons_desktop_getIcon20UserOutline__WEBPACK_IMPORTED_MODULE_80__.getIcon20UserOutline)().icon,null==(e=window.cur.classifiedsWallForm)||e.disable()):(l=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_check_sign_enabled"),i=(0,_icons_desktop_getIcon20UserSlashOutline__WEBPACK_IMPORTED_MODULE_81__.getIcon20UserSlashOutline)().icon);t.innerHTML=i,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"title",l),window.tooltips&&tooltips.hide(_,{onHide:_.onmouseover.bind(_)}),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.checkbox)(_,!o)},checkAsGroup:function(_){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.checkbox)(_),wall.setReplyAsGroup(_,{fromGroup:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)(_)})},showBoxError:function(_){var e=document.getElementById("submit_post_error");if(e.innerHTML=_.length>60?'<div class="msg_text">'+_+"</div>":_,!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(e)){var o=document.getElementById("box_layer_wrap");(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_43__.slideDown)(e,100),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_43__.animate)(o,{scrollTop:0})}},messageGetter:()=>window.Emoji?Emoji.editableVal:_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val,getMessage:function(_){var e=_||document.getElementById("post_field");return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(Wall.messageGetter()(e))},sendPost:function(_){var e,o;cur.poster&&!!(null==_?void 0:_.posterSendParams)?Wall.sendSimplePost(_):(null==(e=window.cur.classifiedsWallForm)?void 0:e.isNativeCreateEnabled())?Wall.sendPostOrClassifieds(_):(null==(o=window.cur.classifiedsWallForm)?void 0:o.isAutoRecognitionEnabled())?Wall.sendClassifiedsAutoRecognized(_):Wall.sendSimplePost(_)},sendSimplePost:(_sendSimplePost=_asyncToGenerator(regeneratorRuntime.mark((function _(e){var o,t,l,i,a,s,r,n,E,d,c,b,P,u,D,p,w,M,O,m,C,T,g,B,A,h,W,L,R,I;return regeneratorRuntime.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:if(s=(a=void 0===e?{}:e).skipLocked,r=void 0!==s&&s,n=a.posterSendParams,E=cur.wallAddMedia||{},d=E.chosenMedia||{},c=cur.wallAddMedia?E.getMedias():[],b=E.shareData||{},P=cur.poster&&!!n,Wall.checkPostLen(cur.postField)){_.next=8;break}return _.abrupt("return");case 8:if(u=P?n.text:Wall.getMessage(),D=!1,p=P?null:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("send_post"),"top"===(w=cur.options.suggesting?"suggest":cur.wallType)&&(w="all"),P&&(c=c.filter((_=>{if((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(_)){var e=_[0];return["copyright","postpone",_web_donut__WEBPACK_IMPORTED_MODULE_51__.MEDIA_TYPE_DONUT_DURATION].includes(e)}}))),M=P?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("submit_post_box"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domClosest)("_submit_post_box",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("official")),O=(0,_web_donut__WEBPACK_IMPORTED_MODULE_51__.fieldValueIsDonutOnlyPost)(M,E),m=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(M,"from-oid")==cur.postTo?1:"",M&&cur.postTo||m||cur.defaultPostSettings&&(m=cur.defaultPostSettings.official?1:""),C={act:"post",message:u,to_id:cur.postTo,type:w,friends_only:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)("friends_only"),best_friends_only:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)("best_friends_only"),check_sign:Wall.needCheckSign(),close_comments:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("close_comments")?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)("close_comments")?1:0:"",mute_notifications:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("mute_notifications")?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)("mute_notifications")?1:0:"",mute_notifications_in_mentions:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("mute_notifications_in_mentions")?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)("mute_notifications_in_mentions")?1:0:"",mark_as_ads:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)("mark_as_ads")?1:0,official:m,signed:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)("signed"),hash:cur.options.post_hash,from:cur.from?cur.from:"",fixed:cur.options.fixed_post_id||"",situational_suggest_id:cur.options.situational_suggest_id||null},T=0,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(C,(0,_web_donut__WEBPACK_IMPORTED_MODULE_51__.getDonutPostParams)(O,E)),cur.options.additional_save_params&&(C=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(C,cur.options.additional_save_params)),g=cur.wallAddMedia&&cur.wallAddMedia.id||"",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(C,(0,_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_55__.getPostTopicSelectorParams)(String(g))),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(d)&&d.length&&c.push((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clone)(d)),P&&(C.poster_bkg_id=n.bkgId,C.poster_bkg_access_hash=n.accessHash,n.fallbackObj&&(c.push(["photo",n.fallbackObj.owner_id+"_"+n.fallbackObj.id,!1]),C.poster_photo_hash=n.fallbackObj.post_hash),C.poster_bkg_id!==cur.posterCtaBkgId&&(C.poster_author_bkg_check=!0)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)("submit_post_error"),B=_=>{if(this.showBoxError(_),Wall.isPosterEditorOpen()){var e=cur.poster.getErrorWrapperElement();e.innerHTML="",e.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("submit_post_error"))}},!c.length){_.next=41;break}if(h=0,A=!1,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(c,(function(_,e){var o;if(e){var t=this[0],l=this[1];switch(t){case"video":if(D||"suggest"==w)break;var i=Wall.getOwnerDraft(cur.oid)[1];if(!i)break;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(i,(function(_,e){e[1]===l&&e[2]&&e[2].upload_new&&h++}));break;case"poll":var a=E.pollData();if(!a)return A=!0,!1;l=a.question,delete a.question,C=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(C,a);break;case"copyright":var s=E.copyrightData();if(s)return void(C=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(C,s));break;case"share":if(b.failed||!b.title&&(!b.images||!b.images.length)&&!b.photo_url&&!b.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(A=!0,!1):void 0;if((cur.options.share||{}).button_exclusive&&b.button_text&&b.button_action){var r;c.length>1&&(r=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_share_too_many_attachments")),u.split("\n").length-1>(cur.options.share||{}).button_exclusive_max_message_newlines&&(r=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_ads_post_too_many_newlines")),u.length>(cur.options.share||{}).button_exclusive_max_message_len&&(r=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_ads_post_too_long_message"));var n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extractUrls)(" "+u+" "),d=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extractUrls)(" "+b.url+" ")[0];if(d&&n.length){"/"===d.query&&(d.query=""),"www."===d.domain.substr(0,4)&&(d.domain=d.domain.substr(4));for(var P=0;P<n.length;++P){var M=n[P];if("/"===M.query&&(M.query=""),"www."===M.domain.substr(0,4)&&(M.domain=M.domain.substr(4)),d.domain!=M.domain||d.query!=M.query){r=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_share_too_many_links");break}}}if(r)return B(r),A=!0,!1}if(!b.title)return B((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_share_title_required")),A=!0,!1;if(!b.url)return B((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_share_url_required")),A=!0,!1;if(b.url=new URL(b.url).href,b.video?(l=b.video_owner_id+"_"+b.video_id,C.snippet_video=1):l=b.user_id&&b.photo_id&&!b.noPhoto?b.user_id+"_"+b.photo_id:"",b.share_upload_failed&&!l)return void(b.share_upload_failed=0);if(b.images&&b.images.length&&!(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(b.images[cur.shareShowImg])&&!l&&!b.noPhoto&&!b.share_own_image&&!b.video)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton)(p),E.uploadShare((function(){Wall.sendPost({skipLocked:!0})})),A=!0,!1;if((cur.options.share||{}).require_image&&!l)return B((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_share_image_required")),A=!0,!1;b.initialPattern&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(u)==b.initialPattern&&(C.message=""),b.is_vk_mini_app&&(C.is_vk_mini_app=!0,C.is_photo_edit=b.isPhotoEdit,C.image_offset=cur.shareShowImg),C=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(C,{url:b.url,module:cur.module,mode:b.mode,title:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.replaceEntities)(b.title),description:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.replaceEntities)(b.description),button_text:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.replaceEntities)(b.button_text),button_action:b.button_action,extra:b.extra,extra_data:b.extraData,photo_url:b.noPhoto||b.video?"":(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.replaceEntities)(b.photo_url),open_graph_data:(b.openGraph||{}).data,open_graph_hash:(b.openGraph||{}).hash});break;case"page":b.initialPattern&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(u)==b.initialPattern&&(C.message="");break;case"postpone":var O=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("postpone_date"+E.lnkId);return C=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(C,{postpone:O}),cur.postponedLastDate=O,void(D=!0);case"mark_as_ads":return void(C=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(C,{mark_as_ads:1}));case"pretty_cards":if(!E.prettyCardGallery)return;if(E.prettyCardGallery.needSendData())return E.prettyCardGallery.saveCards(Wall.sendPost,(function(_){B(_)})),A=!0,!1;var m=E.prettyCardGallery.getSendData();l=m.attachVal;break;case"podcast":if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(this[2],"attach_disabled"))return!1;break;case _web_donut__WEBPACK_IMPORTED_MODULE_51__.MEDIA_TYPE_DONUT_DURATION:return;case"donut_link":C["attach"+(T+1)+"_owner_id"]=null==(o=this[5])?void 0:o.owner_id}this[3]&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(u)==this[3]&&(C.message=""),C["attach"+(T+1)+"_type"]=t,C["attach"+(T+1)]=l,T++}})),W=cur.postTo<0||cur.postTo===vk.id,!(cur.wallUploadVideoOpts&&cur.wallUploadVideoOpts.vars.is_wall_postponed_allowed&&W&&h)||r||cur.postponeVideoPost){_.next=38;break}return(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.curBox)()&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.curBox)().hide(),(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showBox)("al_video.php?act=postponed_post_box",{videos_count:h},{onDone:function(_,e){_.removeButtons(),_.addButton(e.video_post_later_text,(function(){cur.postponeVideoPost=!0,Wall.sendPost({skipLocked:!0}),_.hide()})),_.addButton(e.video_post_now_text,(function(){Wall.sendPost({skipLocked:!0}),_.hide()}),"no")}}),_.abrupt("return");case 38:if(!A){_.next=41;break}return r&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton)(p),_.abrupt("return");case 41:if(T||u){_.next=45;break}return r&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton)(p),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.elfocus)("post_field"),_.abrupt("return");case 45:if(!p||r||!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isButtonLocked)(p)){_.next=47;break}return _.abrupt("return");case 47:if(cur.postponeVideoPost&&(C=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(C,{postpone_video:!0,postpone_video_hd:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("postponed_post_hd"))})),cur.postAutosave&&clearTimeout(cur.postAutosave),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)("submit_post_error"),cur.postSent=!0,L=window.GroupsAdminTips&&window.GroupsAdminTips.isShownSection()?1:0,C.update_admin_tips=L,R=(0,_web_donut__WEBPACK_IMPORTED_MODULE_51__.isPaidAttachPicked)(E,cur.oid),!C.donut_duration||-1===C.donut_duration||!R||cur.donutAttachesApproved){_.next=58;break}return(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showFastBox)({title:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_action_confirmation"),onHide:()=>{(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton)(p)}},(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_publish_donut_freeing_attaches_confirmation_title"),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_publish_postponed_btn"),(()=>{(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.curBox)().hide(),cur.donutAttachesApproved=!0,Wall.sendPost(r,n)}),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_cancel"),(()=>{(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.curBox)().hide(),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton)(p)})),_.abrupt("return");case 58:if(I=null==(o=window.cur.classifiedsWallForm)?void 0:o.draftId,null==(t=window.cur.classifiedsWallForm)||t.updateDraftId(),!(C.message&&(null==(l=window.cur.classifiedsWallForm)?void 0:l.isAutoRecognitionEnabled())&&(null==(i=window.cur.classifiedsWallForm)?void 0:i.checkIfRecognitionNeeded()))){_.next=69;break}return _.prev=61,(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton)(p),_.next=65,window.cur.classifiedsWallForm.requestClassifiedsCheck({post_text:C.message,draft_id:I,is_auto_recognition:1,owner_id:cur.oid});case 65:_.next=69;break;case 67:_.prev=67,_.t0=_.catch(61);case 69:setTimeout((function(){ajax.post("al_wall.php",Wall.fixPostParams(C),{onDone:function(_,e,o,t){var l;if(_web_ecomm_onboarding_Tooltips_services_TooltipEventService__WEBPACK_IMPORTED_MODULE_79__.TooltipEventService.onAddPost(),null==(l=window.cur.classifiedsWallForm)?void 0:l.isClassifiedsFormEnabled()){var i,a,s=_?_.match(/data-post-id=".*?_(.*?)"/):[null,"0"],r=s[1],n=window.cur.classifiedsWallForm.isNativeCreateEnabled()?"native_create_recognition":"auto_recognition",d={owner_id:cur.oid,draft_id:I,posting_source:"wall",posting_form:n,content_id:parseInt(r)};"suggest"==w?null==(i=window.ClassifiedsClickAnalytics)||i.logCreateSuggestPostClickEvent(cur.module,d):null==(a=window.ClassifiedsClickAnalytics)||a.logCreatePostClickEvent(cur.module,d)}(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.isString)(o)||(o=null),cur.poster&&P&&(cur.poster.unlockEditPoster(),cur.poster.closeEditor(),cur.poster.resetPoster(),cur.posterCtaBkgId&&(cur.posterCtaBkgId=null)),cur.posterFeatureTT&&cur.posterFeatureTT.hide(),Wall.clearInput(),cur.postSent=!1,cur.postponeVideoPost=!1,cur.donutAttachesApproved=!1;var b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("mark_as_ads"),u=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("mute_notifications");if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)(b)&&u&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(u,"on"),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.disable)(u,0)),b&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(b,"on"),E.donutUpdateVisibility()),cur.options.onSendPostDone)cur.options.onSendPostDone.apply(window,arguments);else if(t&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.showDoneBox)(t),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isObject)(_)&&_.redirect)nav.go(_.redirect);else{if((0,_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_62__.showHiddenNavigableTabs)(),D){if("feed"==w)(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.showDoneBox)(_,{out:3e3});else if("full_own"==w||"full_all"==w)return Wall.showPostponedFull(_);return wall.updateTabVisibility("page_wall_postponed",!0),void Wall.showPostponed(!1,_)}if(("full_own"==w||"full_all"==w)&&(cur.pgStart||nav.objLoc.postponed)){var p=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clone)(nav.objLoc);return delete p.offset,delete p.postponed,vk.id!=cur.oid&&delete p.own,nav.go(p)}if(vk.id!=cur.oid&&"full_own"==w){var M=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clone)(nav.objLoc);return delete M.own,nav.go(M)}if("feed"==w)return cur.wallPostCb();if("suggest"==w)return wall.updateTabVisibility("page_wall_suggest",!0),Wall.showSuggested(!1,_,e),Wall.suggestUpdate();if(O)Wall.showDonutWall(_);else{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_tabs")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("ui_tab",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_tabs")).click(),Wall.receive(_,e),cur.onWallSendPost&&cur.onWallSendPost(),L&&null!==o&&window.GroupsAdminTips&&window.GroupsAdminTips.refreshSection(o);var m=(0,_web_profile_profile_utils__WEBPACK_IMPORTED_MODULE_77__.isVKCOMProfileRedesignedEnabled)()&&"profile"===window.cur.module;if(m){var C,T=c.some((_=>"article"===_[0]));T&&(null==(C=window.Profile)||C.reloadOwnerContentTab("articles"))}}}},onFail:function(_){if(cur.postSent=!1,cur.postponeVideoPost=!1,cur.donutAttachesApproved=!1,cur.poster&&P&&cur.poster.unlockEditPoster(),cur.posterFeatureTT&&cur.posterFeatureTT.hide(),!cur.options.onSendPostFail){if(!_)return!0;var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("submit_post_error");if(e.innerHTML=_.length>60?'<div class="msg_text">'+_+"</div>":_,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)("submit_post_error")||(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_43__.slideDown)("submit_post_error",100),Wall.isPosterEditorOpen()){var o=cur.poster.getErrorWrapperElement();o.innerHTML="",o.appendChild(e)}return!0}cur.options.onSendPostFail.apply(window,arguments)},showProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton)(p)},hideProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton)(p)},noSort:!0})}),0);case 70:case"end":return _.stop()}}),_,this,[[61,67]])}))),function(){return _sendSimplePost.apply(this,arguments)}),sendPostOrClassifieds:(_sendPostOrClassifieds=_asyncToGenerator(regeneratorRuntime.mark((function _(){var e,o,t,l,i,a,s,r,n,E,d,c,b,P,u,D,p,w,M,O,m,C,T,g,B,A;return regeneratorRuntime.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:if(o=document.getElementById("post_field"),t=document.getElementById("submit_post_box"),l=document.getElementById("submit_post_error"),i=cur.wallAddMedia||{},a=cur.wallAddMedia?i.getMedias():[],s=Wall.getMessage(o),r=parseInt((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(t,"oid")),n=-1*r,E=document.getElementById("send_post"),d=a.map((_=>`${_[0]}${_[1]}`)),s||0!==a.length){_.next=13;break}return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.elfocus)("post_field"),_.abrupt("return");case 13:if(c={owner_id:r,posting_source:"wall",posting_form:"native_create_recognition"},null==(e=window.ClassifiedsClickAnalytics)||e.logNativeFormSentClickEvent(cur.module,c),b=!!s&&!a.length,P=!!s&&(a||[]).every((_=>"photo"===_[0])),b||P){_.next=21;break}return Wall.sendSimplePost(),_.abrupt("return");case 21:return l.style.display="none",cur.postSent=!0,(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton)(E),_.prev=24,null==(u=window.ClassifiedsClickAnalytics)||u.logClassifiedsDetectStartClickEvent(cur.module,c),_.next=28,window.cur.classifiedsWallForm.requestClassifiedsCheck({post_text:s,photo_ids:d,is_auto_recognition:0,owner_id:r});case 28:if(D=_.sent,p=D.is_classifieds_product,w=D.price,M=D.title,O=D.ml_response,p&&M){_.next=36;break}return Wall.sendSimplePost({skipLocked:!0}),_.abrupt("return");case 36:return _.next=38,window.cur.classifiedsWallForm.simpleCreateProduct({group_id:n,price:w,title:M,description:s,attachments:d,ml_response:JSON.stringify(O),type:"post",screen:cur.module,posting_source:"wall"});case 38:m=_.sent,C=m.crossposting_url_hash,T=m.miniapp_id,g=m.product_link,(B=m.error)?Wall.showBoxError(B.error_text||B.error_msg||(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_unknown_error")):(Wall.clearInput(),window.cur.classifiedsWallForm.showCrossPosting({crossposting_url_hash:C,miniapp_id:T,product_link:g})),cur.onWallSendPost&&cur.onWallSendPost(),_.next=54;break;case 47:if(_.prev=47,_.t0=_.catch(24),4527!==(null==(A=_.t0.error)?void 0:A.error_code)){_.next=52;break}return Wall.sendSimplePost({skipLocked:!0}),_.abrupt("return");case 52:cur.options.onSendPostFail&&cur.options.onSendPostFail.apply(window,[_.t0.message]),Wall.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_unknown_error"));case 54:cur.postSent=!1,(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton)(E);case 56:case"end":return _.stop()}}),_,null,[[24,47]])}))),function(){return _sendPostOrClassifieds.apply(this,arguments)}),sendClassifiedsAutoRecognized:(_sendClassifiedsAutoRecognized=_asyncToGenerator(regeneratorRuntime.mark((function _(e){var o,t,l,i,a,s,r,n,E,d,c,b,P,u,D,p,w,M,O,m,C,T,g,B,A,h,W;return regeneratorRuntime.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:if(window.cur.classifiedsWallForm.productData){_.next=3;break}return Wall.sendSimplePost(e),_.abrupt("return");case 3:if(!(o=document.getElementById("send_post"))||!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isButtonLocked)(o)){_.next=6;break}return _.abrupt("return");case 6:return t=document.getElementById("post_field"),l=document.getElementById("submit_post_box"),i=cur.wallAddMedia||{},a=cur.wallAddMedia?i.getMedias():[],s=Wall.getMessage(t),r=parseInt((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(l,"from-oid")),n=parseInt((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(l,"oid"))||r,E=a.filter((_=>"photo"===_[0])).map((_=>`${_[0]}${_[1]}`)),cur.postSent=!0,(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton)(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)("submit_post_error"),_.prev=17,_.next=20,window.cur.classifiedsWallForm.requestClassifiedsCheck({post_text:s,is_auto_recognition:1,owner_id:n});case 20:return d=_.sent,c=d.is_classifieds_product,b=_objectWithoutPropertiesLoose(d,["is_classifieds_product"]),P=c?b:window.cur.classifiedsWallForm.productData,u=P.title,D=P.price,p=P.ml_response,w=r===cur.postTo&&n<0?1:0,M=["close_comments","mute_notifications","signed"].reduce(((_,e)=>{var o=document.getElementById(e);return o&&(_[e]=o.classList.contains("on")),_}),{}),_.next=28,window.cur.classifiedsWallForm.autoRecognitionCreateProduct({owner_id:n,price:D,title:u,description:s,attachments:E,ml_response:JSON.stringify(p),type:"post",screen:cur.module,posting_source:"wall",post_as_group:w,post_settings:JSON.stringify(M)});case 28:O=_.sent,m=O.crossposting_url_hash,C=O.miniapp_id,T=O.post_id,g=O.product_link,(B=O.error)?Wall.showBoxError(B.error_text||B.error_msg||(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_unknown_error")):(Wall.clearInput(),window.cur.classifiedsWallForm.showCrossPosting({crossposting_url_hash:m,miniapp_id:C,product_link:g})),M.close_comments&&(A=Wall.getPostsWrap(cur.wallType),(h=null==A?void 0:A.querySelector(`[data-post-id="${n}_${T}"] [data-like-button-type="comment"]`))&&h.remove()),window.cur.classifiedsWallForm.updateDraftId(),cur.options.suggesting&&(Wall.updateTabVisibility("page_wall_suggest",!0),Wall.showSuggested(),Wall.suggestUpdate()),cur.onWallSendPost&&cur.onWallSendPost(),_.next=48;break;case 41:if(_.prev=41,_.t0=_.catch(17),4527!==(null==(W=_.t0.error)?void 0:W.error_code)){_.next=46;break}return Wall.sendSimplePost({skipLocked:!0}),_.abrupt("return");case 46:cur.options.onSendPostFail&&cur.options.onSendPostFail.apply(window,[_.t0.message]),Wall.showBoxError((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_unknown_error"));case 48:cur.postSent=!1,(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton)(o);case 50:case"end":return _.stop()}}),_,null,[[17,41]])}))),function(_){return _sendClassifiedsAutoRecognized.apply(this,arguments)}),_repliesLoaded:function(_,e,o,t,l){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+_);if(i){var a=i.nextSibling;if(e){var s=i.offsetHeight;i.innerHTML=o,(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollToY)((0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollGetY)()+(i.offsetHeight-s),0,void 0,!0),setTimeout(Wall.scrollHighlightReply.pbind("post"+e),0)}else i.innerHTML=o;if(a&&"replies_open"==a.className&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(a),ajax._framenext(),_==cur.wallLayer){var r=wkcur.reverse;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(wkcur,{offset:!r&&l.offset||0,loaded:l.num||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("reply",i,"div").length,count:l.count}),wall.addReplyNames(t),WkView.wallUpdateReplies(),r||(wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll())}else wall.addReplyNames(t),Wall.repliesSideSetup(_);Wall.updateMentionsIndex(),setTimeout((function(){(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_33__.getAudioPlayer)().updateCurrentPlaying()}),10),l&&Likes.updateComments("wall"+_,l.count)}},repliesSideSetup:function(_){if(cur.wallLayer!=_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+_);if(e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("wr_header",e,"a"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(t,"deep_active"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_side"+_);if(cur.wallMyOpened[_]&&(o||l)){if(!i){var a=(0,_icons_desktop_getIcon24ChevronUp__WEBPACK_IMPORTED_MODULE_82__.getIcon24ChevronUp)().icon,s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)(`<div class="replies_side_wrap"><div id="replies_side${_}" class="replies_side"><div class="replies_side_icon">${a}</div></div></div>`);e.parentNode.insertBefore(s,e),(i=s.firstChild).onmouseover=Wall.repliesSideOver.pbind(_),i.onmouseout=Wall.repliesSideOut.pbind(_),i.onclick=l?Wall.hideDeepReplies.pbind(_):Wall.repliesSideClick.pbind(_)}e.onmouseover=Wall.repliesSideOver.pbind(_),e.onmouseout=Wall.repliesSideOut.pbind(_),Wall.repliesSideOver(_)}else(0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.floatingButtonCollapseAllRepliesHide)(i),e.onmouseover=null,e.onmouseout=null}}else WkView.wallUpdateReplies()},repliesSideClick:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+_),o=(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollGetY)(),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(e)[1];return o>t&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollToY)(t-100,0),(0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.floatingButtonCollapseAllRepliesHide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_side"+_)),Wall.showReplies(_,3,!1)},repliesSideOver:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+_),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_side"+_);if(e){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(o))[1],l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(o)[1],i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(e)[1],a=e.offsetHeight,s=window.lastWindowHeight||0,r=t+l-s+15,n=i+a-s;cur.wallRepliesSideOver=[_,o,r,n],Wall.repliesSideUpdate()}},repliesSideOut:function(_){cur.wallRepliesSideOver&&cur.wallRepliesSideOver[0]==_&&delete cur.wallRepliesSideOver},repliesSideUpdate:function(_){var e=cur.wallRepliesSideOver;if(e){var o,t=e[1],l=e[4]||{},i=e[5]||"",a="replies_side";void 0===_&&(_=(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollGetY)()),_<e[2]?((0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.floatingButtonCollapseAllRepliesShow)(t),o={marginTop:0,opacity:1}):_<e[3]?((0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.floatingButtonCollapseAllRepliesShow)(t),a+=" replies_side_fixed",o={opacity:Math.max(0,Math.min(1,(e[3]-_)/200))}):(a+=" replies_side_hidden",o={marginTop:e[3]-e[2],opacity:0,display:null}),(0,_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_30__.isEqual)(l,o)||((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(l,(function(_,e){l[_]=null})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.setStyle)(t,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(l,o)),e[4]=o),i!=a&&(t&&(t.className=a),e[5]=a)}},highlightReply:function(_){(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_))&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(_,"reply_highlighted"),setTimeout((function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(_,"reply_highlighted")}),1500))},scrollHighlightReply:function(_){if(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_))if(cur.wallLayer||_.id.match(/^post-?\d+(photo|video|market)?_\d+$/)&&(window.wkcur&&wkcur.shown||window.mvcur&&mvcur.mvShown||cur.pvShown)){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(_,!0)[1];e<0||e>lastWindowHeight-200?(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_43__.animate)(wkLayerWrap,{scrollTop:wkLayerWrap.scrollTop+e-50},300,Wall.highlightReply.pbind(_)):Wall.highlightReply(_)}else{var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(_)[1];o<(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollGetY)()+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)("page_header")[1]?((0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollToY)(o,300),setTimeout(Wall.highlightReply.pbind(_),300)):Wall.highlightReply(_)}},showReply:function(_,e,o,t){if(cur.viewAsBox)return!1;if(t&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.checkEvent)(t))return!0;if(window.mvcur&&mvcur.post==e)return Videoview.showComment(o),!1;var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+o);if(l)Wall.scrollHighlightReply(l);else if(cur.wallLayer==e)WkView.wallShowPreviousReplies(o);else if(e.match(/market/))Market.comments(e);else{if(_.tt&&_.tt.hide&&_.tt.hide(),"full"==cur.wallType){var i=o.split("_");return delete nav.objLoc.offset,nav.go((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(nav.objLoc,{reply:i[1]}))}Wall.showReplies(e,!1,o)}return!1},showReplies:function(_,e,o,t){if((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.checkEvent)(t||window.event))return!0;if(cur.viewAsBox)return cur.viewAsBox();if(cur.wallLayer!=_||!wkcur.reverse){cur.wallMyOpened[_]=3!=e;var l={act:"get_replies",post:_,count:e},i={onDone:Wall._repliesLoaded.pbind(_,o),showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton.pbind("wrh"+_),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton.pbind("wrh"+_),local:1};if(o||e&&!(e>20)||((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(l,{cont:"replies"+_}),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(i,{frame:1}),cur.onFrameBlocksDone=function(){setTimeout(Wall.repliesSideSetup.pbind(_),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.msie?100:10)}),ajax.post("al_wall.php",l,i),!_shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.msie&&e>0&&e<10){for(var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+_),s=a&&a.lastChild,r=[];r.length<e&&s;)"DIV"==s.tagName&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(s,"reply")&&r.push(s),s=s.previousSibling;if(r.length==e){var n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("reply",a,"div").length;for((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(a,'<a class="wr_header wrh_all"></a>'),Wall.updateRepliesHeader(_,a.firstChild,e,n),(0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.floatingButtonCollapseAllRepliesHide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_side"+_));r.length;)a.appendChild(r.pop());(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton)("wrh"+_)}}return!1}},moreReplies:function(_,e,o,t){var l;if(t.deep){var i=_.split("_");l={act:"get_post_replies",offset:e,owner_id:i[0],item_id:i[1],count:o},t.order&&(l.order=t.order)}else l={act:"get_replies",offset:e,post:_,count:o};return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(l,{rev:t.rev,from:t.from}),ajax.post("al_wall.php",l,{onDone:function(e,o,l){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+_);t.clear?i.innerHTML=e:t.rev||t.append?i.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.cf)(e)):i.innerHTML=e+i.innerHTML,wall.addReplyNames(o),t.onDone&&t.onDone(e,o,l),Wall.updateMentionsIndex()},onFail:()=>!1,showProgress:t.showProgress,hideProgress:t.hideProgress}),!1},openDeepShortReplies:function(_,e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("replies_next",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_));return o&&((0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.loadRepliesLinkShow)(o),o.focus(),o.click(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(_)),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(e)},collapseDeepReplies:function(_,e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+e);if(o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"replies_list_deep")){var t=(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollGetY)(),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(_)[1],i=Math.round((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.clientHeight)()/2);cur.wallLayer?(l-=t)<i&&(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_43__.animate)(wkLayerWrap,{scrollTop:wkLayerWrap.scrollTop+l-i},300):t>l-i&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollToY)(l-i);var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+e);a&&(0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.highlightUpdatedReply)(a);var s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("span",{className:"progress_inline replies_next_loader"});(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(_),o.innerHTML="";var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_box_wrap"+e);r&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(r);var n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_wrap_deep"+e),E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",o)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",o),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(E,"post-id"),c=wall.getRepliesOrder(d);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(n,"replies_deep_has_field"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(n,"replies_deep_has_short"),wall.updateRepliesOnScroll(),ajax.post("al_wall.php",{act:"get_collapsed_replies",reply_id:e,order:c},{onDone:function(_){o.innerHTML=_},onFail:function(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(cur.wallTpl.reply_deep_next,{post_id:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(E,"post-id"),reply_id:e,offset:0,text:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_next_n_replies",cur.options&&cur.options.replies_page_count||20),class:" replies_next_deep"}));o.appendChild(_),(0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.loadRepliesLinkShow)(_)},showProgress:function(){o.appendChild(s),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(s)},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(s)}})}},overCollapseDeepReplies:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("replies_deep_collapse_icon",_),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(e),t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getStyle)(e,"bottom")),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(_),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(_),a=(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollGetY)(),s=cur.wallLayer?wkLayerWrap.scrollTop:a;cur.wallLayer&&(i[1]-=a);var r,n,E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.clientHeight)(),d=i[1]+l[1],c=(0,_web_wall_reply_utils__WEBPACK_IMPORTED_MODULE_83__.getFixedReplyField)(),b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(c)[1];cur.wallLayer?(r=s+d-E,n=s+i[1]+o[1]+t+t-E):(r=d-E,n=i[1]+o[1]+t+t-E),cur.onScrollCollapseDeepReplies=wall.updCollapseDeepRepliesIcon.pbind(_,e,{iconSize:o,iconBottom:t,collapseSize:l,collapsePos:i,fixedField:c,fixedFieldSize:b,maxFixedScroll:r,topMaxScroll:n}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.addEvent)(cur.wallLayer?wkLayerWrap:window,"scroll",cur.onScrollCollapseDeepReplies),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.addEvent)(window,"resize",cur.onScrollCollapseDeepReplies),cur.onScrollCollapseDeepReplies()},outCollapseDeepReplies:function(_){cur.onScrollCollapseDeepReplies&&((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.removeEvent)(cur.wallLayer?wkLayerWrap:window,"scroll",cur.onScrollCollapseDeepReplies),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.removeEvent)(window,"resize",cur.onScrollCollapseDeepReplies),delete cur.onScrollCollapseDeepReplies);var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("replies_deep_collapse_icon",_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.setStyle)(e,{position:null,bottom:null,left:null,right:null})},updCollapseDeepRepliesIcon:function(_,e,o){var t=cur.wallLayer?wkLayerWrap.scrollTop:(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollGetY)(),l=o.maxFixedScroll;if((cur.wallLayer&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o.fixedField,"wl_reply_form_fixed")||"full"===cur.wallType&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o.fixedField,"fixed"))&&(l+=o.fixedFieldSize),t<l){var i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((o.collapseSize[0]-o.iconSize[0])/2),a=o.topMaxScroll+o.fixedFieldSize-t,s=o.fixedFieldSize+o.iconBottom;a>0&&(s-=a),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.setStyle)(e,{position:"fixed",bottom:s,left:o.collapsePos[0]+i,right:"auto"})}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.setStyle)(e,{position:null,bottom:null,left:null,right:null})},updateCollapseDeepReplies:function(_){if(cur.wallTpl&&cur.wallTpl.reply_deep_collapse){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_wrap_deep"+_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("replies_wrap_deep",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_));if(e){_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"post-id");var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+_);if(!o)return o;var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("reply",o).length>=2,l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("replies_deep_collapse",e);if(t){if(l)return;l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(cur.wallTpl.reply_deep_collapse,{reply_id:_})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertBefore)(l,o)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(l)}}},showNextReplies:function(_,e,o){var t=e.split("_"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"offset"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"count"),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"collapse"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"replies_prev"),r=cur.wallLayer?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wl_post"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+e),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)("post"+e,"reply"),E={act:"get_post_replies",owner_id:t[0],item_id:t[1],offset:l,count:i,collapse:a},d=s?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(_):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPS)(_);if(d&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(d,"reply")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(d,"replies_wrap_deep"))){var c=((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(d,"post-id")||"").split("_")[1];s?E.next_id=c:E.prev_id=c}if(n)cur.wallLayer||(r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",r));else{var b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+e),P=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(b,"top-ids");P&&(E.top_replies=P)}var u=r.offsetHeight,D=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(r,"post-id");E.order=wall.getRepliesOrder(D);var p=n&&wall.isDescRepliesOrder(D,E.order);p&&(s=!s);var w=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("span",{className:"progress_inline replies_next_loader"});return ajax.post("al_wall.php",E,{onDone:function(o,t,i){var n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domChildren)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{innerHTML:o})),E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.cf)(),d=!1;n.forEach((function(_){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"wr_header")){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_.id);e&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(e,"reply")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(e,"replies_wrap_deep"))||(E.appendChild(_),d=!0)}}));var c,b,P=s&&!p||!s&&p,w=!1;if(P){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_wrap_deep"+e),"replies_deep_has_short")){var M=window.innerHeight||document.documentElement.clientHeight,O=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)("page_header")[1],m=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_),C=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(m)[1];c=cur.wallLayer?wkLayerWrap.scrollTop:(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollGetY)(),w=cur.wallLayer?C<M:C<c+M-O}b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domFC)(E),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertBefore)(E,_)}else b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domLC)(E),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertAfter)(E,_);var T=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(i.num),g=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(i.offset),B=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(i.count),A=Math.max(0,g+(s?-T:T)),h=B-A,W=0;if(d&&(s&&g>0||!s&&h>0)&&(W=s?l-A:Math.min(h,T),i.closest_inx>=0&&(W=Math.min(W,i.closest_inx))),document.activeElement===_?(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.addEvent)(_,"focusout",(function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(_)})):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(_),W){var L=_.cloneNode(!0),R=L.querySelector(".js-replies_next_label");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(L,"replies_next_pre_deleted"),a||(P?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertBefore)(L,b),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(R,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_prev_n_replies",W))):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertAfter)(L,b),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(R,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_next_n_replies",W))),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(L,"count",W),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(L,"offset",A))}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_wrap_deep"+e),"replies_deep_has_short");var I=r.offsetHeight-u;if(w&&I){var U=c+I;cur.wallLayer?wkLayerWrap.scrollTop=U:(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollToY)(U,0,!1,!0)}wall.updateCollapseDeepReplies(e),wall.updateMentionsIndex(),wall.addReplyNames(t),wall.addDeepRepliesBlock(e),cur.wallMyOpened=cur.wallMyOpened||{},cur.wallMyOpened[D]=1,wall.repliesSideSetup(D),wall.updateRepliesOnScroll()},onFail:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(_,"replies_next_pre_deleted")},showProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(_,"replies_next_pre_deleted"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertAfter)(w,_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(w)},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(w)}}),o&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(!1)},emojiOpts:{},emojiShowTT:function(_,e,o){return void 0!==Wall.emojiOpts[_]&&Emoji.ttShow(Wall.emojiOpts[_],e,o)},emojiHideTT:function(_,e,o){return void 0!==Wall.emojiOpts[_]&&Emoji.ttHide(Wall.emojiOpts[_],e,o)},initReplyEditable:function(_,e,o,t,l){if(_.emojiInited)return!1;var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_button"+o),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_media_preview"+o);_.emojiInited=!0,window.stManager.add([window.jsc("web/emoji.js"),"notifier.css"],(function(){var s=Emoji.init(_,{ttDiff:t?-40:-42,rPointer:!0,controlsCont:e,noStickers:"undefined"!=typeof mvcur&&!!mvcur.noStickers,shouldFocus:!l,ref:"reply",onSend:function(){Wall.sendReply(o),_.blur()},ctrlSend:function(){return Wall.customCur().wallTpl.reply_multiline||Wall.composerListShown(_)},checkEditable:function(){cur.onReplyChanged&&cur.onReplyChanged(_,o),Wall.checkTextLen(_,"reply_warn"+o)},onChange:function(){i&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(i,"reply_send_disabled",!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(Emoji.editableVal(_))&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(a,"media_preview_has_medias")),Wall.hideCheckTimer(o,"editing")},onStickerSend:function(_,e){Wall.sendReply(o,!1,{stickerId:_,sticker_referrer:e})},initUploadForImagePasteCallback:Page.initUploadForImagePaste});if(vk.widget&&!window.emojiStickers&&Emoji.updateTabs(),Wall.emojiOpts[o]=s,cur.afterEmojiInit&&cur.afterEmojiInit[o]){var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("emoji_smile",Emoji.opts[s].controlsCont);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(r)&&(cur.afterEmojiInit[o](),delete cur.afterEmojiInit[o])}}))},initEditReply:function(_,e,o,t){var l,i=_,a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_field"+_),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_fakebox"+_),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_box"+_),E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(s,"reply"),d=cur.wallLayer?wkcur:cur,c=!1;if(E){if(l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",s)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",s),c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(l,"deep_active")){if(!cur.reply_to){var b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(s,"answering-id");if(b){var P=_.split("_")[1];cur.reply_to=[(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(b),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(P)],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("reply_to"+_,P)}}wall.addDeepRepliesBlock(_),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_fakebox"+_)}i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(l,"post-id")}else cur.wallLayer?(c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wl_post"),"deep_active"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wl_reply_form_inner")):(l=s,c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(l,"deep_active"));if(!l&&r?l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("_post_wrap",r):!l&&n&&(l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("_post_wrap",n)),r){var u=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+i),D=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(u,"can_reply_as_group"),p=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(u,"can_reply_as_any_group"),w=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(r,"owner-photo")||"",M=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(r,"owner-href")||"",O=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(r,"owner-name")||"",m=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(r,"owner-is-nft")||"",C=(0,_web_wall_reply_utils__WEBPACK_IMPORTED_MODULE_83__.replyBoxOwnerIsNftFromAttr)(m),T="";p?T=d.wallTpl.reply_form_any_group:D&&(T=d.wallTpl.reply_form_group);var g=d.wallTpl.default_replier,B=g.is_nft,A=g.avatar_url,h=E&&c?_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_52__.REPLY_IMAGE_SMALL_SIZE:_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_52__.REPLY_IMAGE_DEFAULT_SIZE,W=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(d.wallTpl.reply_form_user_image,{href:"",primary_image:(0,_web_page_wall_utils__WEBPACK_IMPORTED_MODULE_72__.getPostAvatarString)(A,"post_field_user_image",h,B),secondary_image:(0,_web_page_wall_utils__WEBPACK_IMPORTED_MODULE_72__.getPostAvatarString)(w,"post_field_user_image",h,C,"post_field_image_secondary")});n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(c&&d.wallTpl.reply_form_new?d.wallTpl.reply_form_new:d.wallTpl.reply_form,{add_buttons:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(T,{post_id:_,oid:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(_),owner_photo:w||"/images/blank.gif",primary_image:(0,_web_page_wall_utils__WEBPACK_IMPORTED_MODULE_72__.getPostAvatarString)(A,"post_field_choose_image",h,B),secondary_image:(0,_web_page_wall_utils__WEBPACK_IMPORTED_MODULE_72__.getPostAvatarString)(w,"post_field_choose_image",h,C,"post_field_choose_secondary")}),post_id:_,oid:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(_),owner_is_nft:m,owner_photo:w,owner_href:M,owner_name:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clean)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.unclean)(O)),reply_image:W})),r.parentNode.replaceChild(n,r),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_field"+_)}if(!a)throw new Error("Failed to init new reply or edit reply: no reply field");if(Wall.initReplyEditable(a,n,_,e,o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(a,"composer"))t&&t();else{var L,R,I,U,f=[],v=!1;window.mvcur&&mvcur.mvShown?L=mvcur.mvMediaTypes:cur.wallLayer==i?L=wkcur.options.rmedia_types:window.pvcur&&cur.pvShown?(L=pvcur.rmedia_types,R=0,I=0):L=d.options&&d.options.rmedia_types,(c||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(l.parentElement,"VerticalVideoLayerInfo__commentsReply"))&&(v=!0,R=0,I=0),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(L||d.options&&d.options.media_types||[],(function(){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.inArray)(this[0],["photo","video","audio","doc","link","page"])&&f.push(this)}));var K=!1,y=i.match(/^(\d+_)?-?\d+_(photo|video|topic|market)?\d+(mv)?(_\d+)?$/);f.length>0&&y?(U={lnk:c?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_more_attaches"+_):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_add_media_"+_),preview:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_media_preview"+_),actionsEl:!1,gearEl:!1,types:f,options:{from:"topic"===y[2]?"board":"comment",limit:2,disabledTypes:["album","market","market_album","poll",_web_ui_media_selector_ui_media_selector__WEBPACK_IMPORTED_MODULE_54__.MEDIA_SELECTOR_GROUP],toggleLnk:!0,maxShown:void 0!==R?R:void 0,hideAfterCount:void 0!==I?I:void 0,vectorIcon:v,hideLabel:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_reply_add_attach_label"),toId:"full"===cur.wallType?cur.oid:cur.postTo,onToggleBlock:function(e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_box"+_),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("reply_box_photo",o);t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggle)(t,e)},onMediaChanged:function(){Wall.hideCheckTimer(_,"editing"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)("reply_button"+_,"reply_send_disabled",!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(Emoji.editableVal(a))&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)("reply_media_preview"+_,"media_preview_has_medias"))}}},i.match(/^-?\d+_topic/)&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(U.options,{disabledTypes:["album","share","link","page"],limit:10,editable:1,sortable:1,teWidth:280,teHeight:200}),K=!0)):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)("reply_add_media_"+_),Wall.initComposer(a,{lang:{introText:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("profile_mention_start_typing"),noResult:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("profile_mention_not_found")},toup:K,wddClass:"reply_composer_dd",width:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(a.parentNode)[0],media:U,isReply:!0},t)}return void 0!==a.emojiId&&cur.afterEmojiInit&&cur.afterEmojiInit[_]&&(cur.afterEmojiInit[_](),delete cur.afterEmojiInit[_]),{postId:i,postEl:l,isReply:E,rf:a}},showEditReply:function(_,e,o,t,l,i){if(cur.viewAsBox)return setTimeout((function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_field"+_).blur()}),0),cur.viewAsBox();if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)("post"+_,"Post--with_closed_comments_donut"))return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.setStyle)("replies_wrap"+_,{display:""}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(e);var a=wall.initEditReply(_,o,l,i);if(a.rf){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domClosest)("reply_box_wrap",a.rf));var s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("replies_wrap_deep",a.rf);s&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(s,"replies_deep_has_field")}return cur.wallMyOpened&&(cur.wallMyOpened[_]=cur.wallMyOpened[_]||!1),cur.editing===_?(Emoji.editableFocus(a.rf,!1,!0),!1):(Wall.hideEditPostReply(),a.isReply?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_wrap_deep"+_),"deep_reply_box_open"):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(a.postEl,"reply_box_open"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(a.postEl,"post--replyBoxWasOpened")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.setStyle)("replies_wrap"+_,{display:""}),cur.editing=_,window.Emoji&&setTimeout((function(){Emoji.editableFocus(a.rf,!1,!0),Wall.repliesSideOver(_)}),0),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.triggerEvent)(window,"scroll"),void 0!==a.rf.emojiId&&cur.afterEmojiInit&&cur.afterEmojiInit[_]&&(cur.afterEmojiInit[_](),delete cur.afterEmojiInit[_]),cur.wallTpl&&cur.wallTpl.reply_multiline_intro&&ajax.post("al_wall.php",{act:"a_ctrl_submit_intro",hash:cur.wallTpl.poll_hash},{onDone:function(e){e&&cur.editing===a.postId&&Wall.replySubmitTooltip(_,1)},onFail:function(){return!0}}),window.mvcur&&(mvcur.post==a.postId&&Videoview.onShowEditReply(),mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate(),mvcur.scrollBottom&&mvcur.scrollBottom()),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.isFunction)(cur.onReplyFormSizeUpdate)&&cur.onReplyFormSizeUpdate(a.rf),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.isFunction)(cur.onReplyFormFocus)&&cur.onReplyFormFocus(a.rf),!1)},hideEditReply:function(_,e){cur.editing=!1;var o,t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_field"+_),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_box"+_),a=cur.reply_to&&Wall.getReplyName(cur.reply_to[0]),s=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(window.Emoji?Emoji.editableVal(t):""),r=Wall.hasComposerMedia(t),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(l,"reply");if(!(o=cur.wallLayer?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wl_reply_form_inner"):n?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",l):l)&&i&&(o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("_post_wrap",i)),t&&(!r||e)){if(a&&(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(a)&&a[1]&&(s&&a[1].indexOf(s)||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(t,""),s="")),e&&(s||r)){var E=t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(t,"composer");E?Composer.reset(E):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(t,""),s="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("reply_warn",o))}if(!(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.opera_mobile||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.safari_mobile||s)){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.curBox)()&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.curBox)().isVisible()||(n?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_wrap_deep"+_),"deep_reply_box_open"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(o,"reply_box_open")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_link"+_)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)("replies_wrap"+_),window.tooltips&&i&&tooltips.hideAll(i),t.blur(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.triggerEvent)(window,"scroll"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("reply_to"+_,""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)("reply_to_title"+_),cur.reply_to=!1;var d=Wall.emojiOpts[_];d>=0&&Emoji.opts[d]&&Emoji.opts[d].onChange&&Emoji.opts[d].onChange(),cur.onReplyFormSizeUpdate&&cur.onReplyFormSizeUpdate();var c=cur.replySubmitSettings;c&&c.tt&&c.tt.el&&c.tt.destroy(),window.mvcur&&mvcur.post==_&&(Videoview.onHideEditReply(),mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate())}}},replyNamesRE:function(){wall.addReplyNames({});var _=wall.getReplyNames();if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.isEmpty)(_))return!1;var e=[];return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(_,(function(_,o){o&&((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(o)&&(o=o[1]),"string"==typeof o&&e.push((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.escapeRE)(o)))})),new RegExp("^("+e.join("|")+")")},replyTo:function(_,e,o,t){var l=window.cur.wallLayer==_?wkcur:window.cur;Wall.showEditReply(_,t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("reply_to"+_,e);var i=l.reply_to&&Wall.getReplyName(l.reply_to[0]);l.reply_to=[o,e];var a=Wall.getReplyName(o),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_as_group"+_),r=_.match(/^(-?\d+)_([a-z]+)?(\d+)([a-z]+)?$/),n=r[1],E=r[2]||"",d=r[4]||"",c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+n+E+"_"+e),b=c&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("reply_to",c,"a"),P=Wall.replyNamesRE(),u=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",c)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",c),D=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(u,"deep_active"),p=D?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("replies_wrap_deep",c):null,w=p?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(p,"post-id"):_,M="";if(!D||p){var O=((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(a)?a[0]:a)||"";O='<a class="reply_to_mem" onclick="return wall.showReply(this, \''+w+"', '"+n+E+"_"+e+d+"', event);\">"+O+"</a>";var m=`<span class="reply_to_cancel" onclick="return Wall.cancelReplyTo('${w}', event);">${(0,_icons_desktop_getIcon12Cancel__WEBPACK_IMPORTED_MODULE_84__.getIcon12Cancel)().icon}</span>`,C='<div class="reply_to_label">'+(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.langStr)((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_reply_to"),"user",O)+"</div>";M=D?C+m:m+C}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("reply_to_title"+w,M);var T=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_field"+w);if((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(a)&&a[1]&&window.Emoji){var g=T,B=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clean)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(Emoji.val(g)));!(B=B.replace(/&nbsp;/g," "))||i&&(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(i)&&!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.winToUtf)(i[1]).indexOf((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.winToUtf)(B))?Emoji.val(g,a[1]):P&&(B=B.replace(P,a[1]),Emoji.val(g,B));var A=Wall.emojiOpts[_];A>=0&&Emoji.opts[A]&&Emoji.opts[A].onChange&&Emoji.opts[A].onChange(),Emoji.focus(g,!0)}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggle)("reply_to_title"+w,M),s){var h=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(s.parentNode)&&n<0&&b&&b.getAttribute("rid")===n;Wall.setReplyAsGroup(s,{from:h?n:vk.id})}var W=(0,_web_wall_reply_utils__WEBPACK_IMPORTED_MODULE_83__.getFixedReplyField)();return D&&T&&W&&(0,_web_wall_deep_replies_utils__WEBPACK_IMPORTED_MODULE_58__.scrollOutsideFixedReplyArea)(T,W),l.onReplyFormSizeUpdate&&l.onReplyFormSizeUpdate(),window.mvcur&&mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.stopEvent)(t),!1},cancelReplyTo:function(_,e){var o=window.cur.wallLayer==_?wkcur:window.cur,t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_field"+_),l=o.reply_to&&Wall.getReplyName(o.reply_to[0]),i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clean)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(window.Emoji?Emoji.editableVal(t):"")),a=Wall.replyNamesRE(),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",s)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",s),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(r,"deep_active");if((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(l)&&l[1]&&window.Emoji){i&&l[1].indexOf(i)?a&&(i=i.replace(a,""),Emoji.val(t,i)):(i="",Emoji.val(t,i));var E=Wall.emojiOpts[_];E>=0&&Emoji.opts[E]&&Emoji.opts[E].onChange&&Emoji.opts[E].onChange(),Emoji.focus(t,!0)}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)("reply_to_title"+_),n){var d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(s,"answering-id");if(d){var c=_.split("_")[1];o.reply_to=[(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(d),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(c)],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("reply_to"+_,c)}else o.reply_to=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("reply_to"+_,"")}else window.mvcur&&mvcur.post==_?mvcur.mvReplyTo=!1:o.reply_to=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("reply_to"+_,"");return o.onReplyFormSizeUpdate&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.isFunction)(o.onReplyFormSizeUpdate)&&o.onReplyFormSizeUpdate(t),window.mvcur&&mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.stopEvent)(e),!1},replySubmitTooltip:function(_,e,o){var t=_&&window.cur.wallLayer==_?wkcur:window.cur,l=_&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_box"+_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_fakebox"+_)),i=l&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("button_blue",l,"div"),a=t.replySubmitSettings;if(!(o&&i&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(i)))if(o=o||i,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"flat_button")&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isButtonLocked)(o)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"button_disabled"))!e&&a&&a.tt&&a.tt.hide&&a.tt.hide();else if(a||(a=t.replySubmitSettings=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{className:"reply_submit_hint_tt_point"})),e){if(o)if(a.parentNode==o&&a.tt&&a.tt.show)a.tt.show();else{a.tt&&a.tt.el&&a.tt.destroy(),o.insertBefore(a,o.firstChild);var s=Wall.customCur().wallTpl.reply_multiline?1:0,r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(Wall.customCur().wallTpl.reply_multiline_hint,{enabled:s?"on":"",disabled:s?"":"on"}),n=l&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",l)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",l)),E=n&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(n,"deep_active");(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_35__.showTooltip)(a,{text:r,typeClass:"tt_default_right",slide:15,shift:E?[15,8]:[0,8],asrtl:1,hasover:1,toup:!1,showdt:700,hidedt:700,dir:"auto",noZIndex:!0,onCreate:function(){radioBtns.reply_submit={els:Array.prototype.slice.apply((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("radiobtn",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_submit_hint_opts"))),val:r?1:0}}})}}else a&&a.tt&&a.tt.hide&&a.tt.hide()},onReplySubmitChanged:function(_,e){if(cur.wallTpl?cur.wallTpl.reply_multiline=_:mvcur.wallTpl&&(mvcur.wallTpl.reply_multiline=_),Wall.customCur().wallTpl&&(Wall.customCur().wallTpl.reply_multiline=_),e){var o=cur.replySubmitSettings;o&&o.tt&&o.tt.el&&o.tt.destroy()}else ajax.post("al_wall.php",{act:"a_save_ctrl_submit",value:_,hash:Wall.customCur().wallTpl.poll_hash}),window.Notifier&&Notifier.lcSend("wall_reply_multiline",{value:_})},getReplyFromId:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_as_group"+_);return!(!e||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(e.parentNode))&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domClosest)("_submit_post_box",e),"from-oid")},showCheckTimer(_,e,o){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_field"+_),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_box"+_),i=l&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("WallCheckComment__timer",l);if(t&&i){(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_35__.showTooltip)(t,{text:o.description,showdt:0,hidedt:0,shift:[0,-1],width:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(t)[0],forcetoup:!0,nohide:!0,noZIndex:_shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.msie_edge,className:"WallCheckComment__tt"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByTag)("span",i).forEach((_=>{_.style.animationDuration=`${o.delay}s`})),l.classList.add("WallCheckComment--shown");var a=setTimeout((()=>{l.classList.remove("WallCheckComment--shown"),Wall.sendReply(_,void 0,e)}),1e3*o.delay);i.timeout=a,i.onclick=()=>{Wall.hideCheckTimer(_,"button")},cur.destroy||(cur.destroy=[]),cur.destroy.push((()=>{a&&clearTimeout(a)})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.elfocus)(t)}},hideCheckTimer(_,e){void 0===e&&(e=!1);var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_field"+_),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_box"+_),l=t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("WallCheckComment__timer",t);if(o&&l){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(o,"check_timestamp");e&&i&&Wall.isCheckTimerShown(_)&&ajax.post("al_wall.php",{act:"check_comment_cancelled",post_raw:_,timestamp:i,reason:e}),l.timeout&&clearTimeout(l.timeout),o.tt&&o.tt.hide&&o.tt.hide(),t.classList.remove("WallCheckComment--shown"),"button"===e&&setTimeout((()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.elfocus)(o)),0)}},isCheckTimerShown(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_box"+_);return e&&e.classList.contains("WallCheckComment--shown")},sendReply:function(_,e,o){o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)({},o);var t,l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_wrap_deep"+_),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("reply_to"+_);if(l?(t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",l)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",l),"post-id"),i=i||_.split("_")[1]):t=_,window.mvcur&&mvcur.post==t)return Videoview.sendComment(t,e,o);var a,s,r,n=window.cur.wallLayer==t,E=n?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wl_post"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+t),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+_),c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(E,"deep_active"),b=n?wkcur:window.cur,P=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_field"+_),u=P&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(P,"composer"),D=b.reply_to&&Wall.getReplyName(b.reply_to[0]),p=P&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(P,"send");if(p&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.isFunction)(p))return p(_,e,o);if(o.stickerId)s={message:"",attach1_type:"sticker",attach1:o.stickerId,sticker_referrer:o.sticker_referrer};else if(o.suggest)s={message:o.suggest};else{if((s=u?Composer.getSendParams(u,Wall.sendReply.pbind(_)):{message:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)(Emoji.editableVal(P))}).delayed)return;if(!s.attach1_type&&(!s.message||(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(D)&&D[1]&&!D[1].indexOf(s.message)))return void Emoji.editableFocus((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_field"+_),!1,!0)}var w=window.wkcur&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wk_content");if(P&&(w&&w.contains(P)?wkcur.wallCheckComments:b.wallCheckComments)){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(P,"check_in_progress"))return;if(!(r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(P,"check_timestamp")||void 0))return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.stopEvent)(e),void ajax.post("al_wall.php",{act:"check_comment",post_raw:t,text:s.message},{onDone(e){e&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(P,"check_timestamp",e.timestamp),e.description&&e.delay)?Wall.showCheckTimer(_,o,e):Wall.sendReply(_,void 0,o)},onFail:()=>((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(P,"check_timestamp",Date.now()),Wall.sendReply(_,void 0,o),!0),showProgress(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(P,"check_in_progress",!0)},hideProgress(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(P,"check_in_progress",null)}});if(Wall.isCheckTimerShown(_))return void Wall.hideCheckTimer(_,"button");Wall.hideCheckTimer(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(P,"check_timestamp",null)}o.stickerId||o.suggest||(u?a=Composer.reset(u):window.Emoji&&Emoji.val(P,""),P.autosize&&P.autosize.update()),b.wallMyOpened=b.wallMyOpened||{},b.wallMyReplied[t]=1,b.wallMyOpened[t]=1;var M=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_hash"+t)?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_hash"+t).value:b.options.post_hash,O=null,m=c&&(l||!n&&"full"!==b.wallType),C=wall.getRepliesOrder(t),T=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(d,"top-ids"),g=!1;if(m&&d){var B=!l&&wall.isDescRepliesOrder(t,C)?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domFC)(d):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domLC)(d);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(B,"replies_next")&&(m=!1,g=!0)}(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(s,{act:"post",type:b.wallType,reply_to:t,reply_to_msg:i,reply_to_user:b.reply_to&&b.reply_to[0]||0,start_id:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("start_reply"+t),from:n?"wkview":"",hash:M,only_new:m?1:0,need_last:g?1:0,order:C,top_replies:T||null,timestamp:r}),b.reverse&&(s.rev=1);var A,h=wall.getReplyFromId(_);if(h&&(s.from_oid=h),A=b.wallType?"feed"==b.wallType?"news"==b.section?"feed_"+(b.subsection?b.subsection:b.section):"recommended"==b.section?"feed_recommended"+("recent"!=b.subsection?"_"+b.subsection:""):-1!==["friends","groups","videos","photos","list"].indexOf(b.section)?"feed_"+b.section+(b.subsection?"_"+b.subsection:""):"feed_"+b.section:"top"==b.wallType?"wall_top":"wall_"+(b.onepost?"one":(b.wallType||"").indexOf("full_")?"page":"full"):b.module,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(s,{ref:A}),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.mobile?Wall.hideEditReply(_):(Emoji.editableFocus(P,!1,!0),Wall.cancelReplyTo(_,e)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)("reply_warn"+_),ajax.post("al_wall.php",Wall.fixPostParams(s),{onDone:function(e,o,l,i){if(c){if(m)return wall.onOnlyNewReplySent.apply(window,arguments);if(g)return wall.onLastChunkReplySent.apply(window,arguments);if(n)return wall.onNewReplySentLayer.apply(window,arguments)}if("full"===b.wallType)return c?FullWall.onNewReplySent.apply(window,arguments):FullWall.onReplySent.apply(window,arguments);b.wallMyReplied[t]=0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)("reply_link"+t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)("reply_warn"+t),Wall._repliesLoaded(_,!1,o,l,i),Wall.processPostReplyActions(e)},onFail:function(_){if(O&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(O),u?a=Composer.restore(u,a):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(P,s.message),P.autosize&&P.autosize.update(),_)return(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showFastBox)((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_error"),_),!0},showProgress:function(){c?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.disableButton)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_button"+_),!0):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_button"+_))},hideProgress:function(){c?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.disableButton)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_button"+_),!1):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_button"+_))}}),window.cur.onPostReply&&window.cur.onPostReply(_),!s.from_oid&&s.message&&!m){var W=-++b.wallMyRepliesCnt,L=Emoji.emojiToHTML((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clean)(s.message),!0),R=wall.getReplyNames(),I=s.reply_to_user<0?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_replied_to_group"):R[s.reply_to_user]&&R[s.reply_to_user][0],U=I?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(b.wallTpl.reply_link_to,{to_user:I}):"";if(O=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(b.wallTpl.reply_fast,{reply_id:"0_"+W,message:L.replace(/\n/g,"<br/>"),to_link:U,date:Wall.getNowRelTime(b)})),d&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(d)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_link"+_))(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)("reply_link"+_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)("replies_wrap"+_);else if(!b.onepost){var f=d.nextSibling;if(f&&"replies_open"==f.className&&Wall.openNewComments(_),!n){var v=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("wr_header",d,"a"),K=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("reply",d,"div").length+1,y=K;v&&(y=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(v.getAttribute("offs").split("/")[1])+1),(y>5||K<y)&&(v||d.insertBefore(v=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("a",{className:"wr_header"}),d.firstChild),Wall.updateRepliesHeader(_,v,K,y))}}b.reverse?d.insertBefore(O,d.firstChild):d.appendChild(O),n&&(WkView.wallUpdateReplies(),b.reverse||(wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll()))}},onOnlyNewReplySent:function(_,e,o){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(t,"reply"),i=l?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",t)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",t):t,a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(i,"post-id"),s=!l&&wall.isDescRepliesOrder(a);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(i,"deep_active")){var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("replies_wrap_deep",t);l&&r&&(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(r,"post-id"));var n=cur.wallLayer===a,E=Wall._getRepliesInfoBeforeAddNewReply(_,n),d=Wall._checkVisibilityBeforeAddNewReply(_,E,s,n);l&&wall.addDeepRepliesBlock(_);var c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)(e);s&&E.repliesListEl.firstChild?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertBefore)(c,E.repliesListEl.firstChild):E.repliesListEl.appendChild(c),Wall._fixScrollAfterAddNewReply(_,E,d,s,n),l&&wall.updateCollapseDeepReplies(_),(0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.highlightUpdatedReply)(c),wall.incReplyCounter(i),wall.addReplyNames(o)}},onLastChunkReplySent:function(_,e,o,t,l,i){var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+l),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(a,"reply"),r=s?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",a)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",a):a,n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(r,"post-id"),E=!s&&wall.isDescRepliesOrder(n);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(r,"deep_active")){var d=cur.wallLayer===n,c=Wall._getRepliesInfoBeforeAddNewReply(l,d),b=Wall._checkVisibilityBeforeAddNewReply(l,c,E,d);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(c.repliesListEl,e),Wall._fixScrollAfterAddNewReply(l,c,b,E,d);var P=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+i);P&&(0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.highlightUpdatedReply)(P),s&&wall.updateCollapseDeepReplies(l),wall.incReplyCounter(r,1,_),wall.addReplyNames(t)}},_getRepliesInfoBeforeAddNewReply:function(_,e){var o=e?wkLayerWrap.scrollTop:(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollGetY)(),t=window.innerHeight||document.documentElement.clientHeight,l=o+(e?0:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)("page_header_cont")[1]),i=o+t,a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+_),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(a,e)[1],r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(a)[1];return{repliesListEl:a,scrollY:o,topY:l,bottomY:i,viewportHeight:t,repliesListY:s,repliesListH:r,repliesListEndY:s+r,layerFieldH:e?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)("wl_reply_form")[1]:0}},_checkVisibilityBeforeAddNewReply:function(_,e,o,t){return o?t?e.repliesListY>0&&e.repliesListY<e.viewportHeight-e.layerFieldH:e.topY<e.repliesListY&&e.bottomY>e.repliesListY:t?e.repliesListEndY>0&&e.repliesListEndY<e.viewportHeight-e.layerFieldH:e.topY<e.repliesListEndY&&e.bottomY>e.repliesListEndY},_fixScrollAfterAddNewReply:function(_,e,o,t,l){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(e.repliesListEl)[1];if(t)o||(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollToY)(e.repliesListY-100,300,!1,!0);else if(o){var a=e.scrollY+i-e.repliesListH;l?wkLayerWrap.scrollTop=a:(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollToY)(a,0,!1,!0)}else{var s=e.repliesListY+i-300;l?(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_43__.animate)(wkLayerWrap,{scrollTop:e.scrollY+s},300):(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollToY)(s,300,!1,!0)}},incReplyCounter:function(_,e,o){e=e||1;var t,l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"post-id"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("comment",_);i&&(o||(t=+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(i,"count"),o=Math.max(0,t+e)),Likes.update("wall"+l,{comment_num:o}))},onNewReplySentLayer:function(_,e,o,t){var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wl_post"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("wl_replies",l);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(i,e);var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domChildren)(i).filter((function(_){return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"reply")})).length;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(wkcur,{offset:o,loaded:a,count:_}),wall.addReplyNames(t),WkView.wallUpdateReplies();var s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(l,"post-id");wall.isDescRepliesOrder(s)?wkLayerWrap.scrollTop=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(l)[1]-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)("wl_replies_wrap")[1]-30:wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll()},postTooltip:function(_,e,o,t){if(!cur.viewAsBox){var l=(o||{}).reply,i=(o||{}).className||"",a=l&&!(l%2)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(_)[0]>420;t=t||{},l||(t.appendEl=bodyNode),(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_35__.showTooltip)(_,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)({url:"al_wall.php",params:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)({act:"post_tt",post:e},o||{}),slide:15,shift:[a?417:27,6,6],ajaxdt:100,showdt:400,hidedt:200,dir:"auto",className:"rich wall_tt"+i,typeClass:a?"tt_default_right":"tt_default"},t))}},adsMarkTooltip:function(_){cur.viewAsBox||(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_35__.showTooltip)(_,{black:1,shift:[15,7,0],text:_.getAttribute("data-tooltip")})},hideEditPostReply:function(_,e){if(!1!==cur.editing&&(cur.wallLayer&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)("wl_post","deep_active")&&(e=!0),e||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(boxLayerBG)&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(layerBG))){var o=_&&_.target?_.target:{},t=o.id;cur.editing?cur.editingHide?cur.editingHide(cur.editing,o):_&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domClosest)("_reply_wrap",o)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"reply_link")||t=="reply_field"+cur.editing||"reply_to_link"==o.className)||Wall.hideEditReply(cur.editing):(cur.wallAddMedia||{}).chosenMedia||_&&"post_field"==t||Wall.hideEditPost()}},postShowDeletedMessage:function(_,e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_);if(o){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("_post_content",o)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("feedback_row_t",o);(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_44__.revertLastInlineVideo)(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(t),"post_publish")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(t));var l="post_del"+_,i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(l),a='<span class="dld_inner">'+e+"</span>";return i?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(i,a),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(i)):o.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{id:l,className:"dld",innerHTML:a})),!0}return!1},postHideDeletedMessage:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_);if(e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("_post_content",e)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("feedback_row_t",e);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(o),"post_publish")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(o));var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_del"+_);return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(t),!0}return!1},isArchiveWall:function(){return cur.pgParams&&cur.pgParams.archive||"wall_archive"===cur.module},rollbackPostsArchiveState:function(_,e,o){if(Wall.isArchiveWall()&&!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.linkLocked)(_)){var t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(e.split("_")[1]);ajax.post("al_wall_archive.php",{act:"a_rollback_state",from:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_wall_more_tab")?"profile":"wall",postId:t,hash:o},{onDone:function(_){cur.wallArchiveRolledback=!0,Wall.postShowDeletedMessage(e,_)},showProgress:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockLink)(_),hideProgress:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockLink)(_)})}},restoreLastRollbackPostsArchiveState:function(_,e,o){if(Wall.isArchiveWall()&&!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.linkLocked)(_)){var t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(e.split("_")[1]);ajax.post("al_wall_archive.php",{act:"a_restore_last_rollback",from:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_wall_more_tab")?"profile":"wall",postId:t,hash:o},{onDone:function(_){delete cur.wallArchiveRolledback,Wall.postShowDeletedMessage(e,_)},showProgress:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockLink)(_),hideProgress:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockLink)(_)})}},postSetArchiveState:function postSetArchiveState(actionEl,postRaw,hash,state,isRollback){if(!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.actionsMenuItemLocked)(actionEl)&&!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.linkLocked)(actionEl)){var postId=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(postRaw.split("_")[1]),isActionMenuItem=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(actionEl,"ui_actions_menu_item"),localCur=cur.wallLayer?wkcur:cur;localCur&&(localCur.wallMyDeleted||(localCur.wallMyDeleted={}),localCur.wallMyDeleted[postRaw]=!Wall.isArchiveWall()==!state?0:1);var extended=!isRollback&&(Wall.isArchiveWall()?cur.wallArchiveRestored>=3&&!cur.wallArchiveRolledback:!cur.wallArchiveArchived);ajax.post("al_wall_archive.php",{act:"a_set_state",from:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_wall_more_tab")?"profile":cur.pid?"post":"wall",hash,state:state?1:void 0,extended:extended?1:void 0,postId},{onDone:function onDone(msg,js){if(Wall.isArchiveWall()&&(state=!state,isRollback||(cur.wallArchiveRestored||(cur.wallArchiveRestored=0),cur.wallArchiveRestored++)),state&&(cur.wallArchiveArchived=!0),isRollback?Wall.postHideDeletedMessage(postRaw):Wall.postShowDeletedMessage(postRaw,msg)){var postEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+postRaw);"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(state?-1:1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(postEl,"reply")&&(state?--cur.pgOffset:++cur.pgOffset,state?--cur.pgCount:++cur.pgCount,FullWall.repliesSummary(cur.pgCount)),"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(postEl,"own")&&(state?++cur.deletedCnts.own:--cur.deletedCnts.own),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(postEl,"all")&&(state?++cur.deletedCnts.all:--cur.deletedCnts.all),Wall.isArchiveWall()&&(state?--cur.deletedCnts.archive:++cur.deletedCnts.archive),Wall.update())}if(js)try{eval(js)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_48__.logEvalError)(_,js)}},showProgress:isActionMenuItem?_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockActionsMenuItem.pbind(actionEl):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockLink)(actionEl),hideProgress:isActionMenuItem?_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockActionsMenuItem.pbind(actionEl):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockLink)(actionEl)})}},deletePost:function(_,e,o,t,l){(cur.wallLayer?wkcur:cur).wallMyDeleted[e]=1;var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+e),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("post_actions",i),s={act:"delete",post:e,hash:o,root:t?1:0,confirm:l?1:0,from:"wall"};cur.suggestedDeletedCount&&cur.suggestedDeletedCount>=2&&(s.delete_all=1),(0,_internal_nospam_public__WEBPACK_IMPORTED_MODULE_85__.isClaimContent)()&&(s._nol=JSON.stringify(window.nav.objLoc)),ajax.post("al_wall.php",s,{onDone:function(l,a,s,r){if(r)(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showFastBox)((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_error"),l);else if(s)var n=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showFastBox)(l,s,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_delete"),(function(){n.hide(),wall.deletePost(_,e,o,t,1)}),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("box_cancel"));else{Wall.postShowDeletedMessage(e,l),"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(i,"reply")&&(cur.pgOffset--,cur.pgCount--,FullWall.repliesSummary(cur.pgCount));var E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_publish_wrap"+e);E&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(E,"suggest")&&(void 0===cur.suggestedDeletedCount&&(cur.suggestedDeletedCount=0),cur.suggestedDeletedCount++),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(i,"suggest")?Wall.suggestUpdate(-1):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(i,"postponed")?wall.postponeUpdateCount():"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(i,"own")&&++cur.deletedCnts.own,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(i,"all")&&++cur.deletedCnts.all,Wall.isArchiveWall()&&++cur.deletedCnts.archive,Wall.update())}},showProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"ui_actions_menu_item")?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockActionsMenuItem)(_):_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.isFlatButton(_)?_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.lock(_):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(a,"post_actions_progress")},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"ui_actions_menu_item")?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockActionsMenuItem)(_):_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.isFlatButton(_)?_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.unlock(_):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(a,"post_actions_progress")}});var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("delete_post"+e);r&&r.tt&&r.tt.el&&r.tt.destroy()},markAsSpam:function(_,e,o,t,l){if(this.isAdPostMarkingAsSpam(e))this.markAdAsSpam(o,e,t,l);else{var i=e.split("_"),a=i[0],s=i[1];(0,_web_reports_reports__WEBPACK_IMPORTED_MODULE_68__.showReportForm)(_,a,s,(()=>{var _=document.querySelector(`#post${a}_${s}`);null!==_?_.innerHTML=`<div class="dld">${(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_report_sent")}</div>`:(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_48__.debugLog)("unable to find wall item")}))}},isAdPostMarkingAsSpam:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_);return!!e&&null!==e.getAttribute("data-ad")},markAdAsSpam:function markAdAsSpam(el,post,hash,inline){var adDataPost=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+post),adData=adDataPost.getAttribute("data-ad");ajax.post("al_wall.php",{act:"spam",post,ad_data:adData,hash,from:inline?"inline":""},{onDone:function onDone(msg,js,js2){if("string"!=typeof js&&js2&&(js=js2),inline)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(el).replaceChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{innerHTML:msg}),el);else{var postSelector=`#post${post}`,r=el.closest(postSelector)||document.querySelector(postSelector),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("_post_content",r)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("feedback_row_t",r);(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_44__.revertLastInlineVideo)(r);var pd=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_del"+post);if(pd?(pd.innerHTML=msg,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(pd)):r.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{id:"post_del"+post,innerHTML:msg})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(t),js)try{eval(js)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_48__.logEvalError)(_,js)}adData&&Wall._setAdReportHandler(post,adData,hash)}},showProgress:function(){el&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(el,"ui_actions_menu_item")?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockActionsMenuItem)(el):inline&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(el),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(el)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(el).appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("span",{className:"progress_inline"}))))},hideProgress:function(){el&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(el,"ui_actions_menu_item")?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockActionsMenuItem)(el):inline&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(el),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(el)))},stat:[window.jsc("web/privacy.js"),"privacy.css"]});var btn=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("delete_post"+post);btn&&btn.tt&&btn.tt.el&&btn.tt.destroy()},_setAdReportHandler(_,e,o){var t="ad_report_"+_,l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(t+"_send");if(l){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("radiobtn",t),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("radiobtn on",t);window.radioBtns[t]={val:a.dataset.value||1,els:i};var s=()=>{var i=_.split("_"),a=i[0],r=i[1],n=window.radioBtns[t].val;ajax.post("reports.php",{act:"report_ad_common",type:"ad",oid:a,item_id:r,hash:o,reason:n,ad_data:e},{onDone:()=>{delete window.radioBtns[t],l.removeEventListener("click",s),window.closeChosenReportReasonBlock(a,r),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.showDoneBox)((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("reports_warning_sent"))},onFail:_=>((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.showDoneBox)(_),!1),showProgress:()=>_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.lock(l),hideProgress:()=>_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.unlock(l)})};l.addEventListener("click",s)}},showIgnoreItemReasons:function(_,e,o,t,l,i,a){var s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+e);if(s){var r=s.getAttribute("data-ad");(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_44__.revertLastInlineVideo)(s),ajax.post("/al_wall.php?misc",{act:"get_ignore_reasons",post_raw:e,feed_raw:o,caption_type:l,uids:i,hash:t,ad_data:r,mode:a},{onDone:function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(s,_);var r="ad_hide_"+e,n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(r+"_send");if(n){var E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("radiobtn",r),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("radiobtn on",r);window.radioBtns[r]={val:d.dataset.value||1,els:E},n.addEventListener("click",(()=>{_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.lock(n);var _=window.radioBtns[r].val;("feed"===a?window.feed.ignoreItem:wall.ignoreAdsItem)(e,o,t,l,i,_).then((()=>{Wall.triggerAdStat(s,"hide"),delete window.radioBtns[r]})).catch((()=>_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.unlock(n)))}))}},showProgress:function(){_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"ui_actions_menu_item")&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockActionsMenuItem)(_)},hideProgress:function(){_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"ui_actions_menu_item")&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockActionsMenuItem)(_)}})}},ignoreAdsItem:function(_,e,o,t,l,i){void 0===i&&(i=0);var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_),s=a.getAttribute("data-ad"),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("ui_actions_menu_wrap",a);if(a)return r&&uiActionsMenu.toggle(r,!1),(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_44__.revertLastInlineVideo)(a),new Promise(((t,l)=>{ajax.post("/al_feed.php?misc",{act:"a_ignore_item",post_raw:_,feed_raw:e,hash:o,ad_data:s,no_html:1,reason_id:i},{onDone:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(a),t()},onFail:l})}))},ignoreAdsOwner:function(_,e,o,t){var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_);l&&ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:_,owner_id:e,hash:o,list:0,no_html:1},{onDone:function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(l)},showProgress:t&&_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton.pbind(t),hideProgress:t&&_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton.pbind(t)})},markAsAds:function(_,e,o,t){ajax.post("al_wall.php",{act:"mark_as_ads",post:_,hash:e,full:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(t)},{onDone:function(e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("ui_actions_menu_item_mark_as_ads"+_).innerHTML=e}})},restorePost:function(_,e,o){return(cur.wallLayer?wkcur:cur).wallMyDeleted[_]=0,ajax.post("al_wall.php",{act:"restore",post:_,hash:e,root:o?1:0},{onDone:function(e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)("post_del_btn"+_),Wall.postHideDeletedMessage(_)){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_);"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"reply")&&(cur.pgOffset++,cur.pgCount++,FullWall.repliesSummary(cur.pgCount)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"suggest")?Wall.suggestUpdate(1):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"postponed")?wall.postponeUpdateCount():"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"own")&&--cur.deletedCnts.own,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"all")&&--cur.deletedCnts.all,Wall.isArchiveWall()&&--cur.deletedCnts.archive,Wall.update())}}}),!1},blockPostApp:function(_,e,o,t){ajax.post("al_wall.php",{act:"block_post_app",aid:_,from:e,hash:o},{onDone:function(_){t.parentNode.parentNode.innerHTML=_},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockButton.pbind(t),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockButton.pbind(t)})},checkPostClick:function(_,e,o){if(e=e||window.event,!_||!e)return!0;var t=e.target||e.srcElement,l=8,i=!1,a=/wall_post_text|published_comment|post_media|page_event_share|page_public_share|page_group_share|feed_friends|feed_videos|feed_explain_list|explain|feed_photos|feedback_row/;do{if(!t||t==_||t.onclick||t.onmousedown||(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.inArray)(t.tagName,["A","IMG","TEXTAREA","EMBED","OBJECT"])||(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.inArray)(t.className,["play_new","video_box_wrap"])||(i=t.className.match&&t.className.match(a)))break}while(l--&&(t=t.parentNode));if(!i)return!1;if(cur.postClicked||(cur.postClicked={}),!o||!cur.postClicked[_]){if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString()))return!1;o&&(cur.postClicked[_]=!0,setTimeout((function(){cur.postClicked[_]=!1}),2e3))}return t||!0},postClick:function(_,e,o){o=o||{};var t,l=(_||"").match(/^(-?\d+)_(wall)?(\d+)$/),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_);if(t=!!o.skipCheck||Wall.checkPostClick(i,e)){if(!0!==t)if(!t.querySelector(".PostTextMore[data-open-post]")){var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("wall_post_more",t,"a");if(a&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(a))return a.onclick(),void(l||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(i,"wall_post_over"));var s=t.querySelector("button.PostTextMore");if(s)return s.click(),void s.remove()}if(l&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(i,"suggest")&&!cur.onepost){var r=i&&i.getAttribute("data-ad"),n=i&&i.getAttribute("data-ad-block-uid"),E="/wall"+l[1]+"_"+l[3];if(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.mobile&&e){var d={};r&&n&&(d.params={_post_ad_data:r,_post_ad_block_unique_id:n}),nav.go(E,null,d)}else(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.checkEvent)(e)?window.open(E,"_blank"):(r&&n&&(o.ads_params={post_ad_data:r,ad_block_unique_id:n}),Wall.hideEditPostReply(),Wall.postFull("wall"+l[1]+"_"+l[3],!1,o))}}},postClickStat:function(_){var e=(_=(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.normEvent)(_)).currentTarget,o=[];e.getAttribute("data-ad-view")&&(o.push(Wall.postsGetRaws(e)),Page.postsSeen(o));var t=_.target;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.inArray)(t.getAttribute("data-post-click-type"),["post_owner_img","post_owner_link"])||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(t,"author")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(t,"post_image")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(t,"post_img")?Wall.triggerAdStat(e,"click_post_owner"):("A"==_.target.nodeName&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wall_post_text",_.target,e)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("page_media_thumbed_link",_.target,e)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_.target,"lnk")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("lnk",_.target,e))&&Wall.triggerAdStat(e,"click_post_link")},adBlockClickStat:function(_,e){var o="_ads_block_data_w",t=(_=(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.normEvent)(_)).currentTarget;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(t,o)||(t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)(o,t));var l=[];t.getAttribute("data-ad-view")&&(l.push(Wall.postsGetRaws(t)),Page.postsSeen(l)),Wall.triggerAdStat(t,e)},getAdsEvents:function(){var _=Wall._lsAdsEvents;return _||(_=Wall._lsAdsEvents=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_38__.default.get(Wall.LS_ADS_EVENTS)||{}),_},cleanAdsEvents:function(){var _=Wall.getAdsEvents(),e=(new Date).getTime()/1e3|0,o=!1;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(_,(function(t,l){e-l>=3600&&(delete _[t],o=!0)})),o&&_shared_lib_ls__WEBPACK_IMPORTED_MODULE_38__.default.set(Wall.LS_ADS_EVENTS,_)},triggerAdPostStat:function(_,e){Wall.triggerAdStat(_,e)},triggerAdStat:function triggerAdStat(elIdOrEl,event){for(var el="string"==typeof elIdOrEl?Wall.domPost(elIdOrEl):elIdOrEl,pixels=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(el,"ad-stat-"+event);pixels;){var adBlockUID=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(el,"ad-block-uid"),isUniqueEvent=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.inArray)(event,["load","impression","impression_long","video_start","video_play_3s","video_play_10s","video_play_25","video_play_50","video_play_75","video_play_95","video_play_100"]);if(isUniqueEvent&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(el,"ad-disabled-stat-"+event,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(el,"ad-stat-"+event)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(el,"ad-stat-"+event,null)),adBlockUID&&isUniqueEvent)try{var eventKey=(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_50__.hashCode)(""+event+adBlockUID),lsData=Wall.getAdsEvents();if(lsData[eventKey])break;var now=(new Date).getTime()/1e3|0;lsData[eventKey]=now,_shared_lib_ls__WEBPACK_IMPORTED_MODULE_38__.default.set(Wall.LS_ADS_EVENTS,lsData)}catch(_){try{console.log(_.message)}catch(_){}}pixels=pixels.split("$$$"),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(pixels,(function(_,e){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.vkImage)().src=e}));break}var statHtml=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(el,"ad-stat-html-"+event);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(el,"ad-stat-html-"+event,null),statHtml)for(var statElemWrap=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{innerHTML:statHtml}),elem;elem=statElemWrap.firstChild;)if(el.appendChild(elem),"SCRIPT"===elem.tagName)try{eval(elem.innerHTML)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_48__.logEvalError)(_,elem.innerHTML)}},copyHistory:function(_,e,o,t){var l=(_=_||window.event).target||_.srcElement,i=8,a=!1,s=/published_a_quote/;do{if(!l||(a=l.className.match(s))||l.onclick||l.onmousedown||(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.inArray)(l.tagName,["A","IMG"]))break}while(i--&&(l=l.parentNode));if(a&&!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString()))return ajax.post("al_wall.php",{act:"copy_history",post:o,offset:t,from:cur.module},{onDone:function(_){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(e)&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(e),_)){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(e),"published_by_quote")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(e):e;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(o).insertBefore((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.cf)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(o)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isAncestor)(o,"im_rows")?IM.updateScroll(!0):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isAncestor)(o,"wl_post")&&WkView.wallUpdateReplies()}}}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(_)},postFull:function(_,e,o){if(_.match(/^wall-?\d+_\d+$/)&&!(o||{}).nolist&&(!cur.pgParams||!cur.pgParams.owners_only&&!cur.pgParams.q))switch(cur.wallType){case"all":case"full_all":_+="/all"}return(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_33__.showWiki)({w:_},!1,e,o)},checkReplyClick:function(_,e){if(e=e||window.event,!_||!e)return!1;var o=e.target||e.srcElement,t=8,l=!1;do{if(!o||o==_||o.onclick||o.onmousedown||"A"==o.tagName&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"_reply_lnk")||(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.inArray)(o.tagName,["IMG","TEXTAREA","EMBED","OBJECT"])&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"emoji")||"wpe_cont"==o.id||(l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"_reply_content")))break}while(t--&&(o=o.parentNode));return!l||!!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString())},replyClick:function(_,e,o,t){var l=_.split("_"),i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(l[0]),a=l[1].replace(/-?\d+$/,""),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+i+a+"_"+e),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_);if(!((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(r,"closed_comments")||!cur.stickerClicked&&Wall.checkReplyClick(s,o))){(o||{}).cancelBubble=!0;var n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("wall_reply_more",s,"a");if(n&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(n))return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(s,"reply_moreable"),void n.onclick();if(t){r=cur.wallLayer?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wl_post"):r;var E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(r,"deep_active"),d=cur.stickerClicked||{},c=d.packId,b=d.clickData,P=_;if(E){var u=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("replies_wrap_deep",s);P=u?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(u,"post-id"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(s,"post-id")}var D=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_field"+P);cur.stickerClicked=null,!c||D&&D.emojiInited||(cur.afterEmojiInit=cur.afterEmojiInit||{},cur.afterEmojiInit[P]=function(){Emoji.clickSticker(c,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_field"+P),o,b)}),Wall.replyTo(P,e,t,o),c&&D&&D.emojiInited&&Emoji.clickSticker(c,D,o,b)}}},stickerClick:function(_,e,o,t){return o&&(o.cancelBubble=!0),window.Emoji?e?(Emoji.getStickerPack(_).then((l=>{if(Boolean(null==l?void 0:l[Emoji.PACK_FIELD_IS_ACTIVE])){var i=e.closest(".reply");(null==i?void 0:i.onclick)&&(cur.stickerClicked={packId:_,clickData:t},i.onclick())}else Emoji.clickSticker(_,null,o,t)})),!1):(Emoji.clickSticker(_,null,o,t),!1):(window.stManager.add([window.jsc("web/emoji.js"),"notifier.css"],(function(){Wall.stickerClick(_,e,o,t)})),!1)},domPost:function(_){return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_)},formatCount:function(_,e){return e=e||{},(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.formatCount)(_,e)},likeFullUpdate:function(_,e,o){var t=e.match(/^(wall|photo|video|note|topic|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(-?\d+_)(\d+)/);Likes.update(t?(t[1]||"wall")+t[2]+t[3]:e,o)},likeUpdate:function(_,e,o,t,l,i,a){a||(t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(t)),!1===_&&cur.wallLayer===e&&(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wl_post_body"));var s=e.match(/(-?\d+)(_?)(photo|video|note|topic|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),r=s[1]+"_"+s[4],n=_&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("_post_content",_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",_))||wall.domPost(r),E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(n,a?"_views_wrap":i?"_share_wrap":"_like_wrap"),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(E,"_count");if(d){if(!a&&!i){var c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(n,"_views_wrap"),b=c&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(c,"_count");!b||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(c,"_auto_update")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(b)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(b)!=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(d)||wall.likeUpdate(_,e,0,this.formatCount(t),void 0,void 0,1)}var P=E.tt||{},u=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clone)(P.opts||{}),D=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(P.container,"_value"),p=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(P.container,"_content"),w=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(P.container,"_title");l&&w&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(w,l),P&&(P.likeInvalidated=!0),D&&(D.value=t),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_43__.animateCount)(d,a?t:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_45__.langNumeric)(t,"%s",!0),{str:"auto",noWrapWidth:!!a}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(E,i?"my_share":"my_like",o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(E,a?"no_views":i?"no_shares":"no_likes",!t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(p,"me_hidden",!o&&!a),t?P.el&&(!1===l?P.destroy&&P.destroy():(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(P.container)||l||!1===l||tooltips.show(P.el,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(u,{showdt:0}))):P.el&&P.hide();var M=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_45__.langNumeric)(t,"%s",!0);if(a){var O=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("feedback_views",n),m=0;m=t.match(/^\d+$/)?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(t):5,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(O,"<em>"+t+"</em> "+(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_X_post_views",m,!0))}else if(i){var C="";t>0&&(C="<em>"+M+"</em> "+(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_X_shared",t,!0)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("feedback_share",n),C)}else{var T="";t>0&&(T="<em>"+M+"</em> "+(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_like")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("feedback_like",n),T)}Wall.updateFeedbackVisibility(n)}},updateFeedbackVisibility:function(_){var e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("feedback_views",_))),o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("feedback_share",_))),t=!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("feedback_like",_)))&&!o&&!e;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("post_feedback_info",_),"empty",t)},likeShareUpdate:function(_,e,o,t,l){return Wall.likeUpdate(_,e,o,t,l,!0)},like:function(_,e){if(vk.id&&!cur.viewAsBox){var o=wall.domPost(_),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(o,"_like_wrap"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(t,"_icon"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(t,"_count"),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(l,"fw_like_icon")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(l,"fw_my_like"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(t,"my_like"),s=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),r=(s[3]||"wall")+s[1]+"_"+s[4],n=cur.module;cur.wallType&&(n="feed"==cur.wallType?"feed_"+("news"==cur.section&&cur.subsection?cur.subsection:cur.section):"top"==cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full")),ajax.post("like.php",{act:"a_do_"+(a?"un":"")+"like",object:r,hash:e,wall:2,from:n},{onDone:Wall.likeFullUpdate.pbind(!1,_)});var E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(i);Wall.likeUpdate(!1,_,!a,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(E)+(a?-1:1)),cur.onWallLike&&cur.onWallLike()}},bookmark:function(_,e){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(_,"bookmarked")},likeShare:function(_,e){if(vk.id&&!cur.viewAsBox){var o=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),t=(o[3]||"wall")+o[1]+"_"+o[4],l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("like_share_"+t),i=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)(l),a=cur.wallType?"feed"==cur.wallType?"feed_"+cur.section:"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module;"top"==cur.wallType&&(a="wall_top"),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.checkbox)(l),ajax.post("like.php",{act:"a_do_"+(i?"un":"")+"publish",object:t,hash:e,wall:2,ref:a},{onDone:Wall.likeFullUpdate.pbind(!1,_)});var s=wall.domPost(_),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(s,"_like_wrap"),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(r,"_icon"),E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(s,"_count")),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(n,"fw_like_icon")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(n,"fw_my_like"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(r,"my_like");Wall.likeUpdate(!1,_,!0,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(E)+(d?0:1))}},likeShareCustom:function(_,e){var o=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),t=(o[3]||"wall")+o[1]+"_"+o[4];(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showBox)("like.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)({act:"publish_box",object:t},e))},likeShareCheckLen:function(_,e,o){_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(e),o=o||255;var t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(_)).replace(/\n\n\n+/g,"\n\n");if(_.lastLen!==t.length){var l=_.lastLen=t.length,i=l-t.replace(/\n/g,"").length;l>o-50||i>4?(l>o?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(e,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("text_exceeds_symbol_limit",l-o)):i>4?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(e,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_recommended_lines",i-4)):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(e,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("text_N_symbols_remain",o-l)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(e)):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(e)}},showLikesPage:function(_,e,o){cur.likesBox.loadTabContent("like.php",{act:"a_get_members",object:_,published:e,offset:o,wall:1},e)},clearLikesCache:function(_,e){var o="^/like.php#"+(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_46__.toQueryString)({act:"a_get_members",object:_,published:e,offset:12345,wall:1,tab:e,only_content:1}).replace("12345","\\d+")+"$",t=new RegExp(o,"i");for(var l in ajaxCache)t.test(l)&&delete ajaxCache[l]},subscribeByButton:_web_wall_post_subscribe_action_post_subscribe_action__WEBPACK_IMPORTED_MODULE_29__.subscribeByButton,subscribeByAction:_web_wall_post_subscribe_action_post_subscribe_action__WEBPACK_IMPORTED_MODULE_29__.subscribeByAction,subscribeToAuthor:_web_wall_post_subscribe_action_post_subscribe_action__WEBPACK_IMPORTED_MODULE_29__.subscribeToAuthor,showPhoto:function(_,e,o,t,l){return!(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showBox)("al_photos.php",{act:"photo_box",to_id:_,photo:e,hash:o},{cache:1},!!t.href&&l)},domFC:function(_){for(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domFC)(_);_&&_.id.match(/page_wall_count_/);)_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(_);return _},domPS:function(_){for(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPS)(_);_&&_.id.match(/page_wall_count_/);)_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPS)(_);return _},initScrollChecking(_){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.addEvent)(window,"scroll",Wall.scrollCheck),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.addEvent)(window,"resize",Wall.scrollCheck),(0,_shared_lib_nav_helpers__WEBPACK_IMPORTED_MODULE_86__.pushNavDestroy)((()=>{(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.removeEvent)(window,"scroll",Wall.scrollCheck),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.removeEvent)(window,"resize",Wall.scrollCheck)})),window.cur.wallAutoMore=_.automore,setTimeout((()=>{Wall.scrollCheck()}),200)},scrollCheck:function(_,e,o){var t,l,i=null==e?(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollGetY)():e,a=0,s=[],r=window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight;if(window.scrollAnimation)return!1;if((Wall.repliesSideUpdate(i),cur.wallPage)&&(l="suggested"==cur.wallTab?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_suggested_posts"):"top"==cur.wallTab?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_top_posts"):"donut"===cur.wallTab?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_donut_posts"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_wall_posts"),((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(cur.topRow)!=l||((cur.topRow||{}).id||"").match(/page_wall_count_/))&&(cur.topRow=Wall.domFC(l)),vk.id&&cur.topRow&&!cur.topRow.id.match(/page_wall_count_/)&&!((window.curNotifier||{}).idle_manager||{}).is_idle)){for(var n=[],E=Wall.domPS(cur.topRow);E;E=Wall.domPS(E))cur.topRow.offsetTop>i&&(cur.topRow=E),E.unseen||(E.unseen=!0,n.push(Wall.postsGetRaws(E)));Page.postsUnseen(n);for(var d=cur.topRow;d;d=t){LongView&&LongView.register(d,"Wall");var c=a||d.offsetTop;if(c>=i+r)break;(((t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(d))||{}).id||"").match(/page_wall_count_/)&&(t=null),(a=t?t.offsetTop:c+d.offsetHeight)<i&&t&&(cur.topRow=t);var b=d.bits||0;b>=3||(b|=(c>=i&&c<i+r?1:0)|(a>=i&&a<i+r?2:0))&&(d.bits=b,3==b&&s.push(Wall.postsGetRaws(d)))}LongView&&LongView.onScroll(i,r),Page.postsSeen(s)}if(cur.wallAutoMore&&!cur.wallLoading&&!cur.viewAsBox){var P=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_more_link");if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(P))i+(window.lastWindowHeight||window.innerHeight)+1500>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(P)[1]&&P.onclick()}},postsGetRaws:function(_){var e,o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.indexOf)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_).children,_),t={};if(!_)return t;t.module=cur.module,t.index=o;var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"_ads_promoted_post"),i=_.getAttribute("data-ad-view");i&&(t["ad_"+i]=1,l&&(t.module+="_ads_promoted_post"));var a=_.getAttribute("post_view_hash");if(a&&(t.hash=a),"block_"===_.id.substr(0,6)){t[_.id]=1,t.block=_.id.substr(6);var s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.attr)(_,"data-contain");s&&(s=s.split(",")).forEach((function(_){_=_.split(":"),t[_[0]]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(_[1])||1}))}else(e=_.id.match(/^post(-?\d+_\d+)$/))&&(t[e[1]]=1,(e=(_.getAttribute("data-copy")||"").match(/^(-?\d+_\d+)$/))&&(t[e[1]]=-1));return t},votingExtendParams:function(_,e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"fixed")&&(_.is_fixed=1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"preview")&&(_.is_preview=1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"board")&&(_.is_board=1),vk.widget&&(_.is_widget=1,_.width=cur.widgetWidth,_.url=cur.url),cur.voteHash&&(_.vote_hash=cur.voteHash);var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"id");o&&(_.voting_id=o);var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"ref");t&&(_.ref=t);var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"hash");l&&(_.hash=l);var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"material");return!i||_.is_board||_.is_widget||(_.material=i),_},votingRevote:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("media_voting",_);if(e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"id");if(this.votingIsLocked(o))return;var t=this.votingExtendParams({act:"revote"},e);ajax.post("al_voting.php",t,{onDone:this.votingUpdateFull.bind(this,o),showProgress:this.votingLock.bind(this,o),hideProgress:this.votingUnlock.bind(this,o)})}},votingIsLocked:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("_media_voting"+_),o=!1;return e.forEach((_=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"media_voting_locked")&&(o=!0)})),o},votingLock:function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("_media_voting"+_).forEach((_=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"disabled")&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"queue")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(_,"media_voting_locked")}))},votingUnlock:function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("_media_voting"+_).forEach((_=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(_,"media_voting_locked")}))},votingUpdate:function(_,e){ajax.post("al_voting.php",{act:"get_layout",voting_id:_},{onDone:o=>{(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.isFunction)(e)&&!1===e(o)||(this.votingUpdateFull(_,o),this.votingUnlock(_))},onFail:()=>this.votingUnlock(_),showProgress:()=>this.votingLock(_)})},votingUpdateFull:function(_,e){if(_&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.isString)(e)){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("_media_voting"+_);o.length&&(o.forEach((_=>{if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"disabled")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"queue"))if(""===e)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(_);else{var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.cf)(e);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"media_voting_can_vote")){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domFC)(o);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(t,"media_voting_just_voted"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domReplaceEl)(_,o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClassDelayed)(t,"media_voting_just_voted")}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domReplaceEl)(_,o)}})),window.IMBRIDGE&&setTimeout(IMBRIDGE.syncHistory.bind(IMBRIDGE),0),vk.widget&&window.WPoll&&window.WPoll.resizeWidget())}},votingUpdatePartly:function(_,e){if(_&&(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isObject)(e)&&!this.votingIsLocked(_)){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("_media_voting"+_);if(o.length){var t=e.answers.reduce(((_,e)=>Math.max(_,e.rate)),0),l={};e.answers.forEach((_=>{_.isLeader=_.rate===t,l[_.id]=_})),o.some((o=>{if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(o,"disabled")){if(o.classList.contains("media_voting_voted")&&!e.votes)return this.votingUpdate(_),!0;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("media_voting_option_wrap",o).forEach((_=>{var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"id"),t=l[o];if(_.tt&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.isFunction)(_.tt.destroy)&&_.tt.destroy(),t){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("media_voting_option_bar",_),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("media_voting_option_percent",_),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("media_voting_option_count",_),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("media_voting_option_counter",_),n=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_45__.langNumeric)(t.votes,"%s",!0),E=new Array((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.cf)(n).textContent.split("").length+2).join("0");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domLC)(s),E),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domLC)(r),n),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(a,e.votes?t.rate:""),i.style.transform=`scaleX(${.01*t.rate})`,i.style.oTransform=`scaleX(${.01*t.rate})`,t.votes?s.classList.remove("media_voting_option_count_hidden"):(s.classList.add("media_voting_option_count_hidden"),_.classList.remove("media_voting_option_voted")),t.isLeader?_.classList.add("media_voting_option_leader"):_.classList.remove("media_voting_option_leader")}}));var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("_media_voting_footer_voted_text",o);if(t){var i;i=e.votes?vk.widget?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("voting_x_voted_short",e.votes,!0):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("voting_x_voted",e.votes,!0):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("voting_nobody_voted",e.votes,!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(t,i);var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("media_voting_footer_voted_friend",o);a.length>e.votes&&a.forEach((_=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(_)}))}}})),window.IMBRIDGE&&window.IMBRIDGE.syncHistory(),vk.widget&&window.WPoll&&window.WPoll.resizeWidget()}}},votingUpdateByPostRaw:function(_){if(vk.id){_=_.split("_");var e=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.positive)(_[1]),o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(_[0]),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("_post_media_voting"+o+"_"+e);if(t&&t.length){var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("media_voting",t[0]);if(l){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(l,"id");this.votingUpdate(i)}}}},votingVote:function(_,e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"id");if(!this.votingIsLocked(o)&&vk.id){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"queue"))return this.votingUpdate(o,(_=>{if(_&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.isString)(_)){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.cf)(_));if(o&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(o,"queue")&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(o,"disabled"))return this.votingVote(o,e,!0),!1}}));if(e.length){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(_),"wk_voting_box"),l=this.votingExtendParams({act:"vote",option_ids:e.join(",")},_);ajax.post("al_voting.php",l,{onDone:(_,e)=>{t?nav.reload():(vk.widget&&window.WPoll&&window.WPoll.updateShareMessage(e),this.votingUpdateFull(o,_))},showProgress:this.votingLock.bind(this,o),hideProgress:()=>{t||this.votingUnlock(o)}})}}else vk.widget&&Widgets.oauth()},votingButtonVote:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("media_voting",_);if(e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(e,"media_voting_multiple")){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("media_voting_option_selected",e),t=[];o.forEach((function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"id");e&&t.push(e)})),this.votingVote(e,t)}},votingOptionVote:function(_,e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("media_voting",_);if(o){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"media_voting_multiple")){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(o,"id");if(this.votingIsLocked(t)||!vk.id)return void(vk.widget&&Widgets.oauth());(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(_,"media_voting_option_selected");var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("media_voting_option_selected",o).length;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(o,"media_voting_has_selected_options",l)}else{var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"id");this.votingVote(o,[i])}(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(e)}},votingOptionVoteAttempt:function(_,e,o,t){var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("media_voting",_);if(l){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(l,"ref");(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.statlogsValueEvent)("voting_vote_attempt",i,o,t)}(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(e)},votingOptionTooltip:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("media_voting",_);if(e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"id"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"owner-id"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"id"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"board");(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_35__.showTooltip)(_,{url:"al_voting.php",params:{act:"option_tt",option_id:o,owner_id:t,is_board:i,voting_id:l},slide:15,ajaxdt:100,showdt:400,hidedt:200,dir:"auto",shift:[0,10,10],typeClass:"voting_tt"})}},votingLayer:function(_,e){var o=!!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"media_voting_option_wrap")&&_,t=o?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(o,"id"):0,l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"media_voting")?_:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("media_voting",_);if(l){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(l,"id"),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(l,"owner-id"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(l,"board"),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(l,"ref"),n={w:(s?"board_poll":"poll")+a+"_"+i};if(t&&(n.opt_id=t),vk.widget)window.open(location.origin+"/"+n.w,"poll");else{var E={queue:1,noloader:!!(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.curBox)()};"story"===r&&(E.customRef="story"),(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_33__.showWiki)(n,!1,void 0,E)}(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(e)}},votingExport:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("media_voting",_);if(e&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"board")){var o=this.votingExtendParams({act:"export_box"},e);(vk.widget?window.showBox:_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showBox)("al_voting.php",o,{onDone:function(){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.curBox)().setOptions({width:500})}})}},votingOnMain:function(_,e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("media_voting",_);if(o){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(o,"id");if(this.votingIsLocked(t))return;var l=this.votingExtendParams({act:"onmain",state:e?1:0},o);ajax.post("al_voting.php",l,{onDone:this.votingUpdateFull.bind(this,t),showProgress:this.votingLock.bind(this,t),hideProgress:this.votingUnlock.bind(this,t)})}},votingClosed:function(_,e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("media_voting",_);if(o){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(o,"id");if(this.votingIsLocked(t))return;var l=this.votingExtendParams({act:"closed",state:e?1:0},o);ajax.post("al_voting.php",l,{onDone:this.votingUpdateFull.bind(this,t),showProgress:this.votingLock.bind(this,t),hideProgress:this.votingUnlock.bind(this,t)})}},votingNarrowAction:function votingNarrowAction(votingId,hash,action){var act,state;switch(action){case 101:act="closed",state=0;break;case 102:act="closed",state=1;break;case 103:act="onmain",state=0;break;case 104:act="onmain",state=1}act&&!cur.votingNarrowActionProgress&&ajax.post("al_voting.php",{act,voting_id:votingId,is_fixed:1,state,narrow:1,hash},{onDone:function onDone(html,js){var votingModuleEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("group_voting");if(votingModuleEl&&(votingModuleEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)(votingModuleEl),html?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domReplaceEl)(votingModuleEl,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.cf)(html)):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(votingModuleEl)),js)try{eval(js)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_48__.logEvalError)(_,js)}},showProgress:function(){cur.votingNarrowActionProgress=!0},hideProgress:function(){cur.votingNarrowActionProgress=!1}})},showReportVotingForm:function(_){if(!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.actionsMenuItemLocked)(_)){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("media_voting",_);null===e&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_48__.debugLog)("Unable to show report voting form because there is no .media_voting element");var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"id");if(!this.votingIsLocked(o)){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"board")?"board_poll":"poll";(0,_web_reports_reports__WEBPACK_IMPORTED_MODULE_68__.showReportForm)(t,0,o,(()=>{var _=e.querySelector("._report_voting_button");null!=_?(_.innerHTML=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_report_sent"),_.onclick=null):(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_48__.debugLog)("Unable to disable report voting button, because it cannot be found")}))}}},foTT:function(_,e,o){o&&o.oid&&(e=o.oid==vk.id?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_my_friends_only"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("wpfo"+o.pid)),(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_35__.showTitle)(_,e)},update:function(){if(cur.wallLayer)WkView.wallUpdateReplies();else{var _="top"===cur.wallType,e="archive"===cur.wallType,o="donut"===cur.wallType;if(("all"===cur.wallType||"own"===cur.wallType||_||e||o)&&("all"===cur.wallTab||"own"===cur.wallTab||"top"===cur.wallTab||"archive"===cur.wallTab||"donut"===cur.wallTab)){var t=e?"all":_||o?"own":cur.wallType,l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_more_link"),i=Wall.getPostsWrap(cur.wallType),a=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(cur.deletedCnts[t]),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)(t,i).length-a,r=!1;if((_||e||o)&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("no_posts",i))||_&&cur.wallTopFinished===cur.oid||e&&cur.wallArchiveFinished===cur.oid||o&&(cur.wallDonutFinished===cur.oid||Wall.cantAccessDonutPosts())))r=!0;else{var n;if(n=e?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_archive")):_?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_top")):o?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_donut")):"own"===t?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_own")):(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_all")),"suggested"!==cur.wallTab){var E=n;cur.oid<0&&cur.options.fixed_post_id&&(E-=1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_posts_count",E?(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_45__.langNumeric)(E,cur.options.wall_counts):cur.options.wall_no)}var d=s;!_&&!e&&cur.options.fixed_post_id&&cur.options.wall_oid<0&&(d+=1),r=d>=n-a}r?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(l):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(l),l.onclick=Wall.showMore.pbind(s)),cur.wallTab==cur.wallType&&((0,_web_lib_market__WEBPACK_IMPORTED_MODULE_27__.shortCurrency)(),cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler())}}},getAbsDate:function(_,e){e=e||window.cur;var o,t=new Date(_||Date.now()),l=t.getHours(),i=t.getMinutes(),a="";return e.wallTpl.time_system&&(a=e.wallTpl.time_system[l>11?1:0],l=l%12||12),o=l>9?l:"0"+l,i=i>9?i:"0"+i,e.wallTpl.date_format.replace("{am_pm}",a).replace("{hour}",l).replace("{num_hour}",o).replace("{minute}",i)},getNowRelTime:function(_){_=_||window.cur;var e=Date.now();return'<span class="rel_date rel_date_needs_update" time="'+(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(e/1e3-(_.tsDiff||0))+'" abs_time="'+Wall.getAbsDate(e,_)+'">'+(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("profile_status_word_secs_ago",1)+"</span>"},getNewPostHTML:function(_,e,o,t){var l,i=(t=t||window.cur).wallTpl.post;if(i){var a,s=[],r=_[2],n=r.split("_")[0],E="",d=_[4].split("|"),c=Wall.getNowRelTime(t),b="1"===_[8];b?E=t.wallTpl.reply_link||"":n!=vk.id&&(E=t.wallTpl.own_reply_link||"");var P=_[3].replace("mem_link","author").replace("memLink","author"),u=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)(P),D=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clean)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.unclean)(u.innerText||u.textContent||""));-1!=_[6].indexOf('id="wpfo')&&(c+=`<span class="page_friends_only inl_bl dvd PostHeaderSubtitleDivider">${(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_post_privacy_friends")}</span>`),t.wallTpl.custom_del&&(e>(_[9]==n?_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.MODERATOR:_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.USER)||n==vk.id||_[9]==vk.id||_[2].split("_")[0]!=_[4])&&s.push(t.wallTpl.custom_del),e>(_[9]==n?_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.MODERATOR:_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.USER)||n==vk.id||_[9]==vk.id?s.push(t.wallTpl.del):_[2].split("_")[0]!=_[4]&&s.push(t.wallTpl.spam);var p=e>_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.MODERATOR&&_[9]==n||n==vk.id||_[9]==vk.id;p&&"rss"!==_[13]&&s.push(t.wallTpl.edit);var w=_[6];_[15]&&window.vk.pe.obscene_text_filter&&(w=_[15]),n!=vk.id&&_[9]!=vk.id||!w||(_[6]=_[6].replace("vk2017_snippet_show_layer_button","vk2017_snippet_show_layer_button_hidden"));var M=n<0&&_[9]==n&&e>_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.MODERATOR,O=(0,_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_53__.getReactionsButtonPostTemplate)(_,t);return a={oid:n,name:P,actions:s.length&&(null==(l=t.wallTpl)?void 0:l.post_actions)?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(t.wallTpl.post_actions,{actions:s.join("")}):"",replies:"",reply_link:E,own_reply_link:t.wallTpl.own_reply_link,reply_box:b&&t.wallTpl.reply_box?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(t.wallTpl.reply_box,{actions:"",class:M?" reply_fakebox_with_official":""}):"",photo:d[0],link:_[5],text:w,date:c,post_id:_[2],poll_hash:t.wallTpl.poll_hash,date_postfix:"",user_image:"",post_url:"/wall"+r.replace("_wall_reply","_"),can_reply_as_group:M?1:"",owner_photo:M?d[1]||d[0]:"",owner_href:M?_[5]:"",owner_name:M?D:"",online_class:n>0?" online":"",likes:Likes.makeTemplate(t.wallTpl.post_likes,{buttons_prepend:null==O?void 0:O.template,like_class_name:null==O?void 0:O.likeClassName,object_raw:_[2]}),class:""},o&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(a,o(a,_)),p&&t.wallTpl.author_data&&(a.date=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(t.wallTpl.author_data,{date:a.date,post_id:r})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(i,a),a)}console.error(new Error("Missing wall post template"))},getNewReplyHTML:function(_,e,o,t){var l=t||window.cur,i=l.wallTpl.reply,a=[],s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_field"+_[2])||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_fakebox"+_[2])||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("fwr_text"),r="",n="",E="",d=_[10]||"",c=(0,_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_53__.getReactionsButtonReplyTemplate)(_,l);if(i){if(e>_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.USER||!_[2].indexOf(vk.id+"_")||_[4]==vk.id?a.push(l.wallTpl.del_reply):_[2].split("_")[0]!=_[4]&&a.push(l.wallTpl.spam_reply),(e>_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.MODERATOR&&_[4]==(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(_[2])||_[4]==vk.id)&&a.push(l.wallTpl.edit_reply),-1!=_[8].indexOf('class="wall_reply_more"')&&(r+="reply_moreable"),s)r+=" reply_replieable",n=l.wallTpl.reply_link_wrap,wall.getReplyNames()[_[4]]||wall.addReplyName(_[4],[_[11],_[12]]);r&&(E=" onclick=\"Wall.replyClick('%post_id%', %reply_msg_id%, event, %reply_uid%)\""),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(l.wallTpl.reply_actions,{actions:a.join("")});var b=_[8];_[15]&&window.vk.pe.obscene_text_filter&&(b=_[15]);var P=_[5].replace("mem_link","author"),u=_[7],D=_[4]||"false",p={name:P,photo:_[6],reply_image:(0,_shared_components_avatar_renderAvatarToString__WEBPACK_IMPORTED_MODULE_78__.renderAvatarToString)(_[6],_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_52__.REPLY_IMAGE_DEFAULT_SIZE,u,"reply_image",null,_[7],!1,void 0,P,_[_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_52__.EVENT_REPLY_FIELD_IS_NFT_INDEX]),link:u,text:b,classname:r,actions:a,attr:E,date:Wall.getNowRelTime(l),to_link:d,answer_link:n,post_id:_[2],reply_id:_[3],like_id:_[3].replace("_","_wall_reply"),reply_msg_id:_[3].split("_")[1],reply_uid:D,object_full:(0,_web_likes_helpers__WEBPACK_IMPORTED_MODULE_87__.likeReplyObjectId)(_[3]),likes:Likes.makeTemplate(l.wallTpl.reply_likes,{buttons_prepend:null==c?void 0:c.template,like_class_name:null==c?void 0:c.likeClassName,object_raw:_[2]})};return o&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(p,o(p)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(i,p)}console.error(new Error("Missing wall reply template"))},updatePostImages:function(_){return _.replace(/<img[^>]+>/g,(function(_){return _.match(/class=/)?_.replace("src=","data-src=").replace('class="','class="__need_img '):_}))},loadPostImages:function(_){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("__need_img",_,"img"),(function(){var _=this.getAttribute("data-src");_&&(this.src=_,this.removeAttribute("data-src")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(this,"__need_img")}))},openNewComments:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+_),o=e.nextSibling,t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("wr_header",e,"a"),l=0,i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("reply",e,"div").length,a=i,s=o.newCnt;Wall.loadPostImages(e),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clone)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("new_reply",e,"div")),(function(){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(this,"new_reply"),(0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.highlightUpdatedReply)(this),100==++l)return!1})),t&&(a=l+(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(t.getAttribute("offs").split("/")[1])),i+=-s+l,(a>3||i<a)&&(t||e.insertBefore(t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("a",{className:"wr_header"}),e.firstChild),Wall.updateRepliesHeader(_,t,i,a)),cur.wallMyOpened[_]=1,o&&"replies_open"==o.className&&(s>100?(o.innerHTML=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("news_x_new_replies_more",Math.min(100,s-l)),o.newCnt-=l):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(o)),Wall.repliesSideSetup(_)},langWordNumeric:function(_,e,o){return(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_45__.langWordNumeric)(_,e,o)},updateTimes:function(_){var e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(Date.now()/1e3),o=[];e-=cur.tsDiff,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("rel_date_needs_update",_||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_wall_posts"),"span"),(function(_,t){if(t){var l=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(t.getAttribute("time")),i=e-l,a=(0,_web_lib_date__WEBPACK_IMPORTED_MODULE_63__.getFormattedDiffTimeText)(i);a||(a=t.getAttribute("abs_time"),o.push(t)),t.innerHTML=a}})),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(o,(function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(this,"rel_date_needs_update")}))},updateRepliesHeader:function(_,e,o,t){if(!cur.onepost){var l,i,a=e.href,s=3,r=0;if(!a&&(i=_.match(/^(-?\d+)_(photo|video|note|topic|video|)(\d+)$/))){var n=i[2]||"wall";switch(a="/"+n+i[1]+"_"+i[3],n){case"topic":a+="?offset=last&scroll=1";break;case"wall":a+="?offset=last&f=replies"}e.href=a}t>o?o<100?(l=t>100?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_show_n_last_replies",100):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_show_all_n_replies",t),s=!1):l=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_hide_replies"):(l=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_hide_replies"),r=1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(e,"wrh_all",r),e.innerHTML=l,e.onclick=Wall.showReplies.pbind(_,s,!1),e.setAttribute("offs",o+"/"+t)}},processQueueEvent(_){if((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isObject)(_)&&_.entity_type&&"voting"===_.entity_type)this.votingUpdatePartly(_.data.id,_.data)},updated:function(_,e,o){var t=_?window.wkcur:window.cur;if((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(t.wallQueues)&&(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(o.events)&&o.events.length){var l=t.wallQueues.filter((_=>_.key===e)).pop();if(l)if(o.failed)t.wallQueues=!1;else{l.ts=o.ts;var i=_?wkLayerWrap.scrollTop:(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollGetY)(),a=i,s=!(t.wallType||"").indexOf("full"),r=t.onepost,n=!!_,E=_;s&&(nav.objLoc.q||nav.objLoc.search||nav.objLoc.day)||((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(o.events,(function(){if((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isObject)(this))return Wall.processQueueEvent(this);var e=this.split("<!>"),o=e[0],l=e[1],i=e[2],d=0,c=0,b=_&&window.cur.wallLayer==i&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wl_post");if(b&&"del_reply"!=l||(b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isAncestor)(b,_?wkLayerWrap:pageNode)||(b=null)),o==t.options.qversion){switch((Wall.isArchiveWall()?"archive_post"===l:"reveal_post"===l)&&(l="res_post"),(Wall.isArchiveWall()?"reveal_post"===l:"archive_post"===l)&&(l="del_post"),l){case"new_post":if(b)break;if(s&&t.pgStart>0){t.pgOffset++;break}if(t.oid==vk.id&&vk.id==e[9]&&window.curNotifier&&curNotifier.idle_manager.is_idle&&Wall.clearInput(),"own"!==t.wallType&&"all"!==t.wallType&&!Wall.hasPosts("own"))break;var P=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_wall_posts"),u=P.lastChild,D=!!s&&FullWall.addTetaTet,p=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(e[e.length-1]),w=void 0!==t.options.is_admin?t.options.is_admin:t.options.wall_oid<0?8&p?_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.EDITOR:2&p?_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.MODERATOR:_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.USER:_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.USER,M=Wall.getNewPostHTML(e,w,D,t);if(!M)break;var O=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)(M),m=P.firstChild;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+i))break;for(u&&u!=O?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(u):u=!1,s?u||t.pgOffset++:((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_all",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_all"))+1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(O,"all"),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(e[10])&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_own",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_own"))+1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(O,"own"))),0==e[8]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(O,"closed_comments"),t.deepRepliesActive&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(O,"deep_active");m&&("INPUT"==m.tagName||1!=m.nodeType||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(m,"post_fixed"));)m=m.nextSibling;P.insertBefore(O,m),Wall.votingUpdateByPostRaw(i),(0,_web_stories_narrative_utils__WEBPACK_IMPORTED_MODULE_66__.updateNarrativeSnippetsFromQueueByPost)(O),(0,_web_articles_article_utils__WEBPACK_IMPORTED_MODULE_67__.updateArticleSnippetsFromQueueByPost)(O),d=O.offsetHeight+15,c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(O,E)[1],(0,_web_wall_post_update_view_utils__WEBPACK_IMPORTED_MODULE_88__.highlightUpdatedPost)(O),(0,_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_47__.updateAriaElements)(),Wall.updateMentionsIndex(),_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_25__.AudioUtils.updateQueueReceivedPost(O);break;case"edit_post":var C=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wpt"+i);if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(b)||!C)break;var T=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("wall_post_more",C);T&&(T=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(T))),d=-C.offsetHeight,c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(C,E)[1];var g=e[3];e[6]&&window.vk.pe.obscene_text_filter&&(g=e[6]);var B=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(g,{poll_hash:t.wallTpl.poll_hash}),A=t.videoInlinePlayer&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isAncestor)(window._videoLastInlined[0],C),h=A&&"playing"==t.videoInlinePlayer.getState();if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(C,B),A){var W=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("page_post_sized_thumbs",C);1==(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domChildren)(W).length&&(W.innerHTML="",W.appendChild(window._videoLastInlined[1]),W.appendChild(window._videoLastInlined[0]),h&&setTimeout((function(){t.videoInlinePlayer.play()}),0))}T&&(T=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("wall_post_more",C))&&T.onclick(),Wall.votingUpdateByPostRaw(i),(0,_web_stories_narrative_utils__WEBPACK_IMPORTED_MODULE_66__.updateNarrativeSnippetsFromQueueByPost)(C),(0,_web_articles_article_utils__WEBPACK_IMPORTED_MODULE_67__.updateArticleSnippetsFromQueueByPost)(C),d+=C.offsetHeight,(0,_web_wall_post_update_view_utils__WEBPACK_IMPORTED_MODULE_88__.highlightUpdatedPostContent)(C),Wall.updatePostAuthorData(i);break;case"edit_reply":var L=e[3],R=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wpt"+L);if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)("post"+L)||!R)break;var I=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("wall_reply_more",R);I&&(I=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domNS)(I)));var U=e[4];e[5]&&window.vk.pe.obscene_text_filter&&(U=e[5]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(R,U),d=-R.offsetHeight,c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(R,E)[1],I&&(I=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("wall_reply_more",R))&&I.onclick(),d+=R.offsetHeight,(0,_web_stories_narrative_utils__WEBPACK_IMPORTED_MODULE_66__.updateNarrativeSnippetsFromQueueByPost)(R),(0,_web_articles_article_utils__WEBPACK_IMPORTED_MODULE_67__.updateArticleSnippetsFromQueueByPost)(R),(0,_web_stickers_utils__WEBPACK_IMPORTED_MODULE_74__.updateStickersFromQueue)(R),(0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.highlightUpdatedReplyContent)(R);break;case"post_parsed_link":if(!b)break;var f=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("wall_postlink_preview_btn_disabled",b);if(!f)break;var v=e[3];if("1"===v)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(f,"wall_postlink_preview_btn_disabled"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(f,"button_disabled");else if("0"===v)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(f);else if(v){var K=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("a",{href:v,className:"flat_button",innerHTML:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_preview_link")});(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domReplaceEl)(f,K)}break;case"del_post":b&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(b)&&!t.wallMyDeleted[i]&&!r&&(d-=b.offsetHeight+15,c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(b,E)[1],(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_44__.revertLastInlineVideo)(b),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(b,"unshown"),s||n||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_all",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_all"))-1),e[3]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_own",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_own"))-1),Wall.isArchiveWall()&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_archive",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_archive"))-1)));break;case"res_post":b&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(b)&&((t.wallRnd==e[4]||Wall.isArchiveWall())&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(b,"unshown"),s?t.pgOffset++:((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_all",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_all"))+1),e[3]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_own",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_own"))+1),Wall.isArchiveWall()&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_archive",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)("page_wall_count_archive"))+1)));break;case"new_reply":if(!b||t.wallMyReplied[i]||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+e[3])||r&&t.pgOffset<t.pgCount||n&&(t.reverse?t.offset:t.offset+t.loaded<t.count))break;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(n?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wl_post"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+i),"deep_active")){var y=wall.addNewReply(e);d+=y[0],c=y[1];break}var k=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+i),S=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_wrap"+i),x=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(e[e.length-1]),F=void 0!==t.options.is_admin?t.options.is_admin:t.options.wall_oid<0?8&x?_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.EDITOR:2&x?_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.MODERATOR:_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.USER:_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.USER,N=Wall.getNewReplyHTML(e,F,!1,t);if(!N)break;var j,H=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)(N),V=n?k.offsetHeight:b.offsetHeight,G=!1;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(k)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(S)&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)("reply_link"+i)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domClosest)("wall_fixed",S)){j=k.nextSibling;var q=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("new_reply",k,"div").length+1;if(n||r||t.wallMyOpened[i]){if(!r){j&&"replies_open"==j.className&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(j),G=!0;var Y=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("wr_header",k,"a"),z=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("reply",k,"div").length+1,X=z;Y&&(X=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(Y.getAttribute("offs").split("/")[1])+1),(X>5||z<X)&&(Y||k.insertBefore(Y=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("a",{className:"wr_header"}),k.firstChild),Wall.updateRepliesHeader(i,Y,z,X))}}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(H,"new_reply"),j&&"replies_open"==j.className||(j=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(i),role:"button",tabIndex:0}),k.parentNode.insertBefore(j,k.nextSibling)),j.innerHTML=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_x_new_replies_more",Math.min(100,q)),j.newCnt=q}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)("reply_link"+i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(S,k),G=!0;_&&t.reverse&&k.firstChild?k.insertBefore(H,k.firstChild):k.appendChild(H),G&&(0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.highlightUpdatedReply)(H),n?(t.count++,t.loaded++,WkView.wallUpdateReplies(),d=k.offsetHeight-V,c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(H,E)[1]):(r&&(FullWall.repliesSummary(e[13]),t.pgOffset++,t.pgCount++,FullWall.repliesSummary(t.pgCount),Pagination.pageReady(!1),FullWall.onePostOnScroll(!1,!1,!0)),d=b.offsetHeight-V,c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(G?H:j)[1],Wall.repliesSideSetup(i)),(0,_web_stories_narrative_utils__WEBPACK_IMPORTED_MODULE_66__.updateNarrativeSnippetsFromQueueByPost)(H),(0,_web_articles_article_utils__WEBPACK_IMPORTED_MODULE_67__.updateArticleSnippetsFromQueueByPost)(H),(0,_web_stickers_utils__WEBPACK_IMPORTED_MODULE_74__.updateStickersFromQueue)(H),Wall.updateMentionsIndex(),Likes.update("wall"+i,{comment_num:e[13]});break;case"del_reply":if(t.wallMyDeleted[i]||!b)break;var $=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",b)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",b);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)($,"deep_active")){var Q=wall.removeDeepReply(e);d+=Q[0],c=Q[1];break}if(d-=b.offsetHeight,c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(b,E)[1],(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_44__.revertLastInlineVideo)(b),t.layerpost)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(b),t.count--,t.loaded--;else{r&&(t.pgOffset--,t.pgCount--,FullWall.repliesSummary(t.pgCount));var Z=b.parentNode.id.match(/replies(-?\d+_\d+)/);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(b),Z&&Wall.repliesSideSetup(Z[1])}break;case"view_post":Wall.likeUpdate(!1,i,0,Wall.formatCount((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(e[3])),void 0,void 0,1);break;case"like_post":case"like_reply":if(!b)break;var J="like_reply"==l?"wall_reply"+i:i,__=b&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(b,"_like_wrap"),e_=b&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(b,"_share_wrap"),o_=(0,_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_53__.likeDataReactionsFields)(e);wall.likeFullUpdate(__,J,_extends({isQueueUpdate:!0,like_my:__&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(__,"my_like"),like_num:e[3],like_title:!1,share_my:e_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(e_,"my_share"),share_num:e[4],share_title:!1},o_));break;case"upd_ci":var t_=e[2],l_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("current_info"),i_=l_||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_current_info"),a_=(0,_web_profile_profile_utils__WEBPACK_IMPORTED_MODULE_77__.isVKCOMProfileRedesignedEnabled)()&&"profile"===window.cur.module;if(!i_&&!a_)break;switch(e[3]){case"audio":if(a_){var s_,r_,n_;if(e[4]&&"string"==typeof e[4])r_=null==(n_=e[4].split(","))?void 0:n_[1];return void(null==(s_=window.Profile)||s_.updateBroadcastAudioStatus(t_,r_))}var E_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("current_audio_cnt_wrap");E_&&E_.tt&&E_.tt.hide();var d_=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(e[5]||""),c_=d_?"":" hidden",b_="";l_||(b_+=" onmouseover=\"showTooltip(this, {forcetoup: true, text: '"+t.options.ciAudioTip+"', black: 1, shift: [14, 5, 5]})\" onclick=\"Page.playCurrent(this, '"+e[4]+"')\""),t_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(t.options.ciAudioTpl,{text:t_,attrs:b_,count:d_,cnt_class:c_}),wall.updateOwnerStatus(t_,i_,e,l_);break;case"app":var P_=e[6]?"[12, 5, 5]":"[15, 5, 5]",u_=e[6]?" current_app_icon":"",D_=l_?' onclick="cur.ciApp = '+e[4]+'"':" onmouseover=\"showTooltip(this, {forcetoup: true, text: '"+t.options.ciAppTip+"', black: 1, shift: "+P_+'})" href="'+e[5]+'?ref=14" onclick="return showApp(event, '+e[4]+', 1, 14, cur.oid)"';e[6]&&(D_+=" style=\"background-image: url('"+e[6]+"'); background-size: 16px 16px;\""),t_='<a class="current_app'+u_+'"'+D_+">"+t_+"</a>",wall.updateOwnerStatus(t_,i_,e,l_);break;default:var p_;if(a_)return void(null==(p_=window.Profile)||p_.resetActiveBroadcastAudioStatus());window.stManager.add([window.jsc("web/emoji.js")],(function(){t_=t_?'<span class="current_text">'+Emoji.emojiToHTML(t_,!0)+"</span>":t_,wall.updateOwnerStatus(t_,i_,e,l_)}))}break;case"upd_ci_cnt":var w_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("current_info"),M_=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(e[2]),O_=w_||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_current_info"),m_=O_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("current_audio_cnt_wrap",O_);m_&&(m_.tt&&m_.tt.destroy(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(m_,"hidden",0==M_),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_43__.animateCount)(document.querySelector(".current_audio_cnt"),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_45__.langNumeric)(M_,"%s",!0),{str:"auto"}));break;case"cover_updated":var C_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("_page_cover");if(C_&&e[2]){var T_=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.vkImage)(),g_=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.isRetina)()?e[3]:e[2];T_.src=g_,T_.onload=function(){C_.style.backgroundImage="url('"+g_+"')",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(T_)}}}d&&(_?c<0:a+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)("page_header_cont")[1]>c)&&(a+=d)}})),a!=i&&i>100&&!t.onepost&&(_?wkLayerWrap.scrollTop=a:(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollToY)(a,0,!1,!0)),Wall.update())}}},updateOwnerStatus:function(_,e,o,t){t&&(_='<span class="'+(_?"my_current_info":"no_current_info")+'">'+(_||(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("change_current_info"))+"</span>",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(e.parentNode.nextSibling,_),!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)("currinfo_editor")&&cur.oid>0&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggle)("currinfo_audio","app"!=o[3]),o[2]&&"app"!=o[3]&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.checkbox)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("currinfo_audio"),Boolean(o[2])),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggle)("currinfo_app","app"==o[3]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)("currinfo_app","on")));(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(e,_)},updateMentionsIndex:function(_){if(clearTimeout(cur.wallUpdateMentionsIndexTO),_){var e={},o=[],t=new RegExp(`^(https?://(${_shared_lib_site__WEBPACK_IMPORTED_MODULE_28__.VK_HOST_REGEX_GROUP_UNSAFE.source}|${(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.escapeRE)(location.host)}))?/?`),l=[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("author",bodyNode,"a"),(function(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(this),l=this.href.replace(t,"");if(void 0===e[l]){var i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(this.getAttribute("data-from-id"));i&&i!=vk.id&&(e[l]=o.length,o.push([i,_,"@"+l,"/images/camera_c.gif"]))}})),l=l.concat(Array.from(document.querySelectorAll("a.post_image, a._post_image")),Array.from(document.querySelectorAll("a.reply_image, a._reply_image"))),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(l,(function(){var _=this.href.replace(t,""),l=e[_];if(void 0!==l){var i=(0,_web_wall_wall_post_elem_utils__WEBPACK_IMPORTED_MODULE_89__.replyUserImageImg)(this);i&&(o[l][3]=i.getAttribute("src"),delete e[_])}})),cur.wallMentions=o}else cur.wallUpdateMentionsIndexTO=setTimeout(wall.updateMentionsIndex.pbind(!0),300)},initUpdates:function(_,e){if(void 0===e&&(e=!1),_&&_.length&&window.Notifier){var o=e?window.wkcur:window.cur,t=()=>{o.wallQueues&&o.wallQueues.forEach((_=>{Notifier.addKey(_,((_,o)=>{Wall.updated(e,_,o)}))}))};if(!o.wallQueues){var l=setInterval(t,1e4);e?o._hide.push((()=>clearInterval(l))):o.destroy.push((()=>clearInterval(l)))}o.wallQueues=_,t()}},initWallOptions:function(_){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(cur,{wallCheckComments:_.check_comments,wallType:_.wall_type,wallTpl:_.wall_tpl,wallMyDeleted:{},tsDiff:_.wall_tpl&&_.wall_tpl.abs_timestamp?900*Math.round((Date.now()/1e3-_.wall_tpl.abs_timestamp)/900):0,wallMyOpened:{},wallMyReplied:{},wallMentions:[],wallMyRepliesCnt:0,wallUploadOpts:_.upload,wallUploadVideoOpts:_.upload_video,hasGroupAudioAccess:_.hasGroupAudioAccess}),_.wall_tpl&&_.wall_tpl.lang&&(cur.lang=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(cur.lang||{},_.wall_tpl.lang)),window.Notifier&&Notifier.addRecvClbk("wall_reply_multiline","wall",(function(_){Wall.onReplySubmitChanged(_.value,1)}),!0)},onPostLoaded:function(_,e){_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)(_),Wall.onAdBlockLoaded(_,e),e&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"_post")&&(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("_post",_)),_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"_post")&&cur.onPostLoaded&&cur.onPostLoaded(_)},onAdBlockLoaded:function(_,e){var o,t="_ads_block_data_w";(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,t)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"_ads_promoted_post_data_w")?o=_:e&&(o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)(t,_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("_ads_promoted_post_data_w",_)),o&&Wall.triggerAdStat(o,"load")},init:function(_){var e;Wall.initEmoji(),Wall.initWallOptions(_),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(cur,{wallInited:!0,postField:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_field"),sendPostBtn:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("send_post"),wallSearch:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wall_search"),wallPage:document.getElementById("profile_redesigned")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("profile")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("group")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("public"),wallPageNarrow:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("narrow_column"),wallUploadOpts:_.upload||!1,wallOnClearInput:[],deletedCnts:{own:0,all:0,archive:0},posterFeatureTooltip:_.poster_feature_tooltip,posterFeatureTooltipHash:_.poster_feature_tooltip_hash,postCopyrightFeatureTooltip:_.post_copyright_feature_tooltip,postCopyrightFeatureTooltipHash:_.post_copyright_feature_tooltip_hash,isUrlsRecognitionDisabled:_.is_urls_recognition_disabled,isYoulaProductPublishedWebFlashMessageEnabled:_.is_youla_product_published_web_flash_message_enabled}),window.cur.classifiedsWallForm=new _web_ecomm_classifieds_legacy_injects_ClassifiedsWallForm__WEBPACK_IMPORTED_MODULE_73__.ClassifiedsWallForm({interval:_.classifieds_auto_recognition_check_interval,isNativeFormEnabled:_.is_classifieds_form_enabled,isFormAutoRecognitionEnabled:_.is_classifieds_form_auto_recognition_enabled,isClassifiedsAutoRecognitionPostBarEnabled:_.is_classifieds_auto_recognition_post_bar_enabled,ownerId:cur.oid}),cur.destroy.push((function(_){(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.serviceWallUsers),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.serviceWallGroups),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.serviceNews),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.cleanElems)(_.postField)}));var o=_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.removeEvent.pbind(document,"click",Wall.hideEditPostReply);cur._back?(cur._back.hide.push(o),cur._back.show.push(o),cur._back.show.push(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.addEvent.pbind(document,"click",Wall.hideEditPostReply))):cur.destroy.push(o),cur.wallTab=cur.wallType,Wall.update(),Wall.initUpdates(_.add_queues),_.wall_tpl&&(cur.timeUpdateInt=setInterval((function(){Wall.updateTimes(_.wallCont)}),1e4),(0,_shared_lib_nav_helpers__WEBPACK_IMPORTED_MODULE_86__.pushNavDestroy)((()=>{clearInterval(cur.timeUpdateInt)}))),Wall.initScrollChecking(_);var t=!1;if((null==(e=cur.options)?void 0:e.no_draft)||(t=_.draft||cur.oid!=vk.id&&Wall.getOwnerDraft(cur.oid)),Wall.initPostEditable(t),cur.wallSearch&&(0,_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_49__.placeholderInit)(cur.wallSearch),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.removeEvent)(document,"click",Wall.hideEditPostReply),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.addEvent)(document,"click",Wall.hideEditPostReply),_.poster_options&&Wall.initPosterEditor(_.poster_options),cur.options.max_post_full_length&&Wall.initPostWarningField(),_.media_types){var l=_.media_types.find((_=>"article"===(null==_?void 0:_[0]))),i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)({onAddMediaChange:(_,e,o)=>{cur.postCopyrightFeatureTT&&cur.postCopyrightFeatureTT.hide(),Wall.hidePosterFeatureTooltip(),Wall.postChanged(10,_),["poll","postpone",_web_ui_media_selector_ui_media_selector__WEBPACK_IMPORTED_MODULE_54__.MEDIA_SELECTOR_PRODUCT,_web_donut__WEBPACK_IMPORTED_MODULE_51__.MEDIA_TYPE_DONUT_DURATION].includes(_)||wall.focusOnEnd(),cur.oid!=vk.id&&Wall.saveOwnerDraftMedia(cur.oid,_,e,o),setTimeout(Wall.checkPosterAvailability)},onChangedSize:()=>{setTimeout((()=>{var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("submit_post_box"),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("VideoRestriction",_);(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(e,((_,e)=>{var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(e)[1],t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(e)[0];(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(e,"VideoRestriction--onlyIcon",t<200),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(e,"VideoRestriction--small",t>=200&&t<300&&t>o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(e,"VideoRestriction--medium",t>=300&&t<400)}))}))},onMediaChange:()=>{Wall.postChanged()},onMediaAdd:_=>{var e;(null==(e=window.cur.classifiedsWallForm)?void 0:e.isAutoRecognitionEnabled())&&Wall.getMessage()&&window.cur.classifiedsWallForm.onMediaAdd(_)},onMediaRemove:_=>{var e;(null==(e=window.cur.classifiedsWallForm)?void 0:e.isAutoRecognitionEnabled())&&window.cur.classifiedsWallForm.onMediaRemove(_)},onMediaUploadStarted:()=>{Wall.postChanged()},editable:1,from:"ads"===cur.module?"ads":"post",sortable:1,poster:cur.poster,maxShown:l&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_69__.partConfigEnabled)("inline_attaches_icons")?4:3,hideAfterCount:4},_.media_opts||{});if(cur.wallAddMedia=new window.MediaSelector((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_add_media"),"media_preview",_.media_types,i),cur.wallAddMedia.menu){var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(cur.wallAddMedia.menu.menuNode,"_type_podcast"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("official");a&&s&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domClosest)("_submit_post_box",s),"from-oid")!=cur.postTo&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(a)}}if(Wall.initPostVisibilitySelector(cur.wallAddMedia),(0,_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_55__.isPostTopicSettingEnabled)(window.cur)){var r=cur.wallAddMedia&&cur.wallAddMedia.id||"",n=(0,_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_55__.initPostTopicCreatingSelector)(String(r),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_actions_btns"),(_=>{var e;return-1!==_&&(null==(e=window.cur.classifiedsWallForm)?void 0:e.disable())}));n&&(window.cur.destroy.push(n.onDestroy),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(window.cur.wallOnClearInput)&&window.cur.wallOnClearInput.push(n.clearSelection))}if(cur.withUpload=window.WallUpload&&!_shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.safari_mobile&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.inArray)(cur.wallType,["all","own","feed","full_all","ads_promoted_stealth"])&&Wall.withMentions&&cur.wallUploadOpts,cur.withUpload&&WallUpload.checkDragDrop()){var E=!1,d=!1,c=function(_){if(!1!==E&&(clearTimeout(E),E=!1),cur.uploadInited)return P(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(_);switch(_.type){case"drop":d=!1,delete cur.wallUploadFromDrag,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)("post_upload_dropbox");break;case"dragleave":E=setTimeout((function(){d=!1,delete cur.wallUploadFromDrag,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)("post_upload_dropbox")}),100);break;case"dragover":case"dragenter":d||2==(d=!_.target||"IMG"!=_.target.tagName&&"A"!=_.target.tagName?2:1)&&setTimeout(WallUpload.initCallback,0),2==d&&(cur.wallUploadFromDrag=1)}return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(_)};function P(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.removeEvent)(document,"dragover dragenter drop dragleave",c)}(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.addEvent)(document,"dragover dragenter drop dragleave",c),cur.destroy.push(P)}if(Wall.updateMentionsIndex(),(0,_web_wall_wall_post_render__WEBPACK_IMPORTED_MODULE_60__.wallPostRenderInit)(),nav.objLoc.new_post){Wall.showEditPost();var b=nav.objLoc.post_privacy;"friends_only"===b?Wall.togglePostVisibilityAccess((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("friends_only"),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_52__.VISIBILITY_ACCESS_OPTIONS.ONLY_FRIENDS,"",!0):"best_friends_only"===b&&Wall.togglePostVisibilityAccess((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("best_friends_only"),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_52__.VISIBILITY_ACCESS_OPTIONS.ONLY_BEST_FRIENDS,"",!0),delete nav.objLoc.new_post,delete nav.objLoc.post_privacy,nav.setLoc(nav.objLoc)}},initPosterEditor:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)('<div class="page_block"></div>'),o=Wall.getMainPostBlock();"feed"===cur.module&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(e,"feed_post_field_wrap");var t=function(){return!1},l=function(){Wall.closeFancyTooltipsInPost(),Wall.openPosterEditor(),cur.poster.sendStatsInfo("open")},i={onPreOpen:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertAfter)(e,o)},onPostOpen:function(){var _=cur.poster.getTextInputEl();Wall.restoreCaretPositionForPoster(_)},onPreHide:function(){Wall.saveCaretPositionForPoster(cur.poster.getTextInputEl()),Wall.closeFancyTooltipsInPost();var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("submit_post_error"),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("submit_post_box"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_actions_btns"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("submit_post");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertBefore)(o,t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(_)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertAfter)(_,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domFC)(e))},onPostHide:function(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_settings_btn"),t=cur.options.suggesting&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("check_sign");_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertBefore)(_,cur.openPosterBtn),t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertBefore)(t,cur.openPosterBtn),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(o);var l=cur.poster.getTextAsHtml();l&&l.match(Emoji.emojiRegex)&&(l=l.replace(Emoji.emojiRegex,Emoji.emojiReplace)),cur.postField.innerHTML=l,Wall.restoreCaretPositionForPoster(cur.postField),setTimeout((function(){Composer.updateArticleConvertSuggest((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(cur.postField,"composer"))})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(e)},onPreUploaderOpen:function(){var _=cur.poster.getTextInputEl();Wall.saveCaretPositionForPoster(_)},onPostUploaderClose:function(){var _=cur.poster.getTextInputEl();Wall.restoreCaretPositionForPoster(_)},onOverTextLimit:function(){Wall.disablePoster(!0),cur.poster.closeEditor(),cur.poster.sendStatsInfo("auto_disable"),cur.poster.state.toggled=!0},onChangeData:Wall.postChanged,onSend:function(_){Wall.sendPost({skipLocked:!0,posterSendParams:_})},onDestroy:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(e)},getPostOwnerId:function(){return+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("submit_post_box"),"from-oid")},width:Wall.getMainPostBlock().clientWidth,containerClasses:"poster_wall-creating",placeholder:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.attr)(cur.postField,"placeholder"),appendToElem:e};cur.openPosterBtn=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_poster_btn"),cur.poster=new Poster(_.poster_config,i),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.addEvent)(cur.openPosterBtn,"click",l),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.addEvent)(cur.openPosterBtn,"mousedown",t),(0,_shared_lib_nav_helpers__WEBPACK_IMPORTED_MODULE_86__.pushNavDestroy)((()=>{(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.removeEvent)(cur.openPosterBtn,"click",l),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.removeEvent)(cur.openPosterBtn,"mousedown",t)}))},openPosterEditor:function(_){if(cur.viewAsBox)return cur.viewAsBox();if(cur.poster&&!cur.poster.state.disabled&&!cur.poster.state.opened){_=_||{},cur.posterFeatureTT&&cur.posterFeatureTT.hide();var e=Wall.getMainPostBlock(),o=_.bkgId,t=window.browser.windows7||window.browser.windowsVista||window.browser.windowsXp;Wall.saveCaretPositionForPoster(cur.postField);var l=_.text||cur.postField.innerHTML;if(l=(l=l.replace(/\n/g,"<br/>")).replace(/<img[^>]*>/g,(function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{innerHTML:_}).firstChild,o=Emoji.getCode(e);return o?t?" ":Emoji.codeToChr(o):_})),!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(e))return cur.poster.setBkg(o,!0),void cur.poster.setText(l);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(e);var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_settings_btn"),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("submit_post_error"),s=cur.options.suggesting&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("check_sign"),r=cur.poster.getPostOptionsWrapperEl();if(i&&r.appendChild(i),s&&r.appendChild(s),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(a)){var n=cur.poster.getErrorWrapperElement();n.innerHTML="",n.appendChild(a)}var E=cur.poster.getBtnsWrapper(),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_actions_btns");d&&(E.firstChild?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertBefore)(d,E.firstChild):E.appendChild(d),d.children.length||E.children.length>1?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)(E):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(E)),cur.poster.openEditor(),cur.poster.setBkg(o,!0),cur.poster.setText(l)}},checkPosterAvailability:function(){if(cur.poster){var _=cur.wallAddMedia?cur.wallAddMedia.getMedias():[],e=cur.poster.isTextFieldValid(cur.postField),o=Wall.checkAttachesForPoster(_),t=e&&o;!t!==cur.poster.state.disabled&&Wall.disablePoster(!t),t&&cur.poster.state.toggled&&(Wall.openPosterEditor(),cur.poster.sendStatsInfo("auto_enable"),cur.poster.state.toggled=!1)}},checkAttachesForPoster(_){if(!(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(_))return!1;if(!_.length)return!0;var e=0;return _.some((_=>{if((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_56__.isArray)(_)){var o=_[0];["copyright","postpone",_web_donut__WEBPACK_IMPORTED_MODULE_51__.MEDIA_TYPE_DONUT_DURATION].includes(o)||++e}})),0===e},disablePoster:function(_){cur.poster&&(void 0===_&&(_=!0),cur.poster.state.disabled=_,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(cur.openPosterBtn,"_disable",_))},isPosterEditorOpen:function(){return cur.poster&&cur.poster.isOpen()},saveCaretPositionForPoster:function(_){if(document.activeElement===_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("span"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("span");e.classList.add("poster__marker","poster__marker_start"),o.classList.add("poster__marker","poster__marker_end");var t=getSelection().getRangeAt(0);(t=t.cloneRange()).insertNode(e),t.collapse(!1),t.insertNode(o)}},restoreCaretPositionForPoster:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("poster__marker_start",_),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("poster__marker_end",_);if(e&&o){var t=document.createRange();t.setStartBefore(e),t.setEndBefore(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(o);var l=window.getSelection();l.removeAllRanges(),l.addRange(t)}else wall.focusOnEnd(_)},getMainPostBlock:function(){var _=cur.mainPostBlock;return _||(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domPN)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("submit_post_box")),cur.mainPostBlock=_),_},changeAuthorInPoster:function(_){cur.poster&&_&&cur.poster.changeBkgAuthor({authorName:_.authorName,authorUrl:_.authorUrl})},closeFancyTooltipsInPost:function(){var _=cur.wallAddMedia.lnkId;cur["postPostponeTT"+_]&&cur["postPostponeTT"+_].hide(),cur["post_action_btn"+_]&&cur["post_action_btn"+_].hide(),(0,_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_55__.topicUISelectorHide)(_)},switchOwner:function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("_ui_toggler",_),"on"),uiSearch.showProgress("wall_search"),cur.options.params.owners_only=cur.options.params.owners_only?null:1,nav.change({owners_only:cur.options.params.owners_only,offset:null})},fakeReplyAsGroupOver:function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("reply_fakebox_with_official",_)&&wall.replyAsGroupOver(_)},fakeReplyAsGroupCheck:function(_,e,o){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("reply_fakebox_with_official",_))return window.tooltips&&window.tooltips.hide(_),Wall.showEditReply(e,null,!1,!1,!0,(function(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_as_group"+e);_&&(_.focus(),_.click())})),o&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(o)},setReplyAsGroup:function(_,e){if(!_)return!1;if(_.hasAttribute("data-reinit-ads-needs-confirmation")&&window.AdsEdit&&!e.reinitConfirmed&&AdsEdit.reinitCreatingPostFormNeeded())return AdsEdit.reinitCreatingPostFormConfirm(wall.setReplyAsGroup.pbind(_,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)({},e||{},{reinitConfirmed:!0}))),!1;var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domClosest)("_submit_post_box",_),t=o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("signed"),l=o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("close_comments"),i=o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("mute_notifications"),a=o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("official"),s=o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("mark_as_ads"),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(_,"tt"),n=e.from||(e.fromGroup?cur.oid:vk.id),E=n==vk.id?wall.replyAsProfileData():window.replyAsData&&window.replyAsData[n]||wall.replyAsGroupDomData(_);E||(E=[]);var d=E,c=d[0],b=d[1],P=d[2],u=d[3],D=d[5];if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(o,"from-oid")==n||c!=n)return!1;var p=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("submit_post_box"),w=!o&&cur.poster&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domClosest)("poster",_),M=o===p;w&&(o=p,t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("signed"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("mark_as_ads"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("close_comments"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("mute_notifications"),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("official")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(o,"from-oid",n),wall.replyAsAnimate(o,P,b,D),cur.poster&&(M||w)&&Wall.changeAuthorInPoster({authorName:u,authorUrl:P}),r&&r.rows&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(r.rows,(function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(this,"active",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(this,"from-oid")==n)})),t&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.disable)(t,n>0),s&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.disable)(s,n>0),l&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.disable)(l,n>0),i&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.isChecked)(s)?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(i,"on"),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.disable)(i,1)):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.disable)(i,n>0)),a&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.checkbox)(a,n!==vk.id),_.setAttribute("aria-label",n<0?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_reply_as_group"):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_reply_as_user")),_.hasAttribute("data-replace-owner-name")&&(_.innerHTML=u,"A"===_.tagName&&(_.href=P)),_.hasAttribute("data-replace-post-to")&&(cur.postTo=c),_.hasAttribute("data-replace-oid")&&(cur.oid=c),_.hasAttribute("data-reinit-ads-post-editor")&&window.AdsEdit&&(e.withoutRedraw?AdsEdit.reinitCreatingPostFormBoundWithoutRedraw():AdsEdit.reinitCreatingPostFormBound()),"official"==_.id&&Wall.postChanged(!0);var O=cur.wallAddMedia&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(cur.wallAddMedia.menu.menuNode,"_type_podcast");if(O){var m=cur.postTo==n;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(cur.wallAddMedia.getMedias()||[],(function(_,e){if("podcast"===e[0])return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(e[2],"attach_disabled",!m),m=!1,!1})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggle)(O,m)}return _.id&&Wall.hideCheckTimer(_.id.replace("reply_as_group",""),"editing"),cur.wallAddMedia&&cur.wallAddMedia.donutUpdateVisibility(o),!1},replyAsAnimate:function(_,e,o,t){var l,i,a=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_69__.partConfigEnabled)("avatar_component_refactor_web"),s=_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("_post_field_author",_),r=s&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("_post_field_image",s),n=_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("_post_field_official",_),E=n&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("_post_field_image",n),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"author_secondary"),c=d?0:1,b=null==r||null==(l=r[c])?void 0:l.offsetWidth,P=null==E||null==(i=E[c])?void 0:i.offsetWidth;if(s&&r&&r[c])if(s.href=e,a){var u=(0,_web_page_wall_utils__WEBPACK_IMPORTED_MODULE_72__.getPostAvatarString)(o,"post_field_user_image",b,!1,d?void 0:"post_field_image_secondary");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domReplaceEl)(r[c],u)}else r[c].src=o;if(E&&E[c])if(a){var D=(0,_web_page_wall_utils__WEBPACK_IMPORTED_MODULE_72__.getPostAvatarString)(o,"post_field_choose_image",P,!1,d?void 0:"post_field_choose_secondary");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domReplaceEl)(E[c],D)}else E[c].src=o;(0,_shared_utils_reflow__WEBPACK_IMPORTED_MODULE_90__.reflow)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(_,"author_secondary")},replyAsGroupOver:function(_){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"checkbox_official")&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"reply_fakebox_wrap_image")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"disabled"))return!1;var e,o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("_submit_post_box",_),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("deep_active",_);if(e=t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("replies_wrap_deep",_)?[7,8,8]:t?[2,8,8]:[9,8,8],(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_35__.showTooltip)(_,{text:function(){return((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(o,"from-oid")||vk.id)<0?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_on_behalf_group"):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_on_behalf_me")},black:1,shift:e,noZIndex:!0}),!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"reply_fakebox_wrap_image")&&(wall.isWallReply(_)||wall.isAdsCreatingPost(_))){var l="/al_groups.php",i="get_editor_clubs";wall.isAdsCreatingPost(_)&&(l="/ads_edit.php",i="a_get_promoted_post_stealth_groups"),ajax.post(l,{act:i},{cache:1})}},replyAsGroupFocus:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(_,"tt");e&&e.isShown()||wall.replyAsGroupOver(_)},replyAsGroup:function(_,e,o){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"checkbox_official")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"disabled"))return o&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(o);if(!((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"can_reply_as_any_group")>0)&&wall.isWallReply(_))return wall.replyAsGroupTT(_,e,[]),o&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(o);if(!wall.isWallReply(_)&&!wall.isAdsCreatingPost(_)||cur.replyAsLoaded)wall.showReplyAsGroupTooltip(_,e);else{var t="/al_groups.php",l="get_editor_clubs";wall.isAdsCreatingPost(_)&&(t="/ads_edit.php",l="a_get_promoted_post_stealth_groups"),ajax.post(t,{act:l},{cache:1,onDone:function(o){cur.replyAsLoaded=o,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.isVisible)(_)&&wall.showReplyAsGroupTooltip(_,e)}})}return o&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(o)},showReplyAsGroupTooltip(_,e){var o=!!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("can_reply_only_verified",_),t=(cur.replyAsLoaded||[]).filter((_=>!o||_[0]>0||_[4]));wall.replyAsGroupTT(_,e,t)},replyAsGroupDomData:function(_){var e,o,t,l,i,a;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("replies_wrap_deep",_)){var s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",_),"post-id");s&&(e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_box"+s)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_fakebox"+s),o=s.split("_")[0])}else e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("_submit_post_box",_),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"oid");return e&&(t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"owner-photo"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"owner-href"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"owner-name"),a=(0,_web_wall_reply_utils__WEBPACK_IMPORTED_MODULE_83__.replyBoxOwnerIsNftFromAttr)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"owner-is-nft"))),o&&t&&l&&i&&[o,t,l,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clean)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.unclean)(i)),null,a]||cur.wallTpl&&cur.wallTpl.ownerData||!1},isWallReply:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("_submit_post_box",_);return e&&e.id.match(/reply_box(-?\d+)_(\d+)/)},isAdsCreatingPost:function(_){return!!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("ads_edit_ad_submit_post_header",_)},replyAsProfileData:function(){return window.cur&&cur.wallTpl&&cur.wallTpl.profileData||window.wkcur&&wkcur.wallTpl&&wkcur.wallTpl.profileData||window.mvcur&&mvcur.wallTpl&&mvcur.wallTpl.profileData},replyAsGroupList:function(_,e){var o=_.hasAttribute("data-disallow-profile")?[]:[wall.replyAsProfileData()],t=wall.replyAsGroupDomData(_);return t&&o.push(t),(wall.isWallReply(_)||wall.isAdsCreatingPost(_))&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(window.replyAsList,(function(){this[0]!=e&&o.push(this)})),o},replyAsGroupTT:function(_,e,o){window.replyAsList=o||[],window.replyAsData={},(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(window.replyAsList,(function(){window.replyAsData[this[0]]=this}));var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(_,"tt"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("_submit_post_box",_),i=l&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(l,"from-oid");if(!wall.replyAsProfileData())return!1;if(!t){var a=wall.replyAsGroupList(_,e),s="";_.hasAttribute("data-enable-search")&&(s+='<div class="post_from_tt_row_search_wrap"><input class="clear_fix post_from_tt_row post_from_tt_row_search" value="" placeholder="'+(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_search")+'" /><div class="post_from_tt_row_search_progress"></div></div>');var r=function(_,e,o,t,l){return'<a id="_post_from_tt_row_oid_'+e+'" class="clear_fix post_from_tt_row _post_from_tt_row_searchable'+_+'" data-from-oid="'+e+'" href="'+o+'"><img class="post_from_tt_image" src="'+t+'" aria-label="'+l+'">'+l+"</a>"};(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(a,(function(){var _=i==this[0]?" active":"";s+=r(_,this[0],this[2],this[1],this[3])}));var n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("deep_active",_);t=new ElementTooltip(_,{content:'<div class="post_from_tt_choose _post_scroll_wrap">'+s+"</div>",appendToParent:!0,autoHide:!0,customShow:!0,defaultSide:"bottom",offset:function(){return wall.isAdsCreatingPost(_)?[_.offsetWidth/2+8.5,-2]:n?[1,-5]:[-10,-5]},onFirstTimeShow:function(e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("post_from_tt_row",e);(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(o,(function(e,o){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"post_from_tt_row_search")||(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.addEvent)(o,"click",wall.setReplyAsGroup.pbind(_,{from:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(this,"from-oid")}))}));var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("post_from_tt_row_search",e);if(l){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("_post_from_tt_row_searchable",e),a=_.getAttribute("data-search-url"),s={};(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.addEvent)(l,"keyup valueChanged",(function(){var o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(l)).toLowerCase();if(a&&o){_.searchRequestTimeout&&(clearTimeout(_.searchRequestTimeout),delete _.searchRequestTimeout);var n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("post_from_tt_row_search_progress",e);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("pr",n)||(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.showProgress)(n),_.searchRequestTimeout=setTimeout((function(){s[o]?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.hideProgress)(n):ajax.plainpost(a,{str:o},(function(l){s[o]=!0,l=JSON.parse(l),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(l,(function(){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("_post_from_tt_row_oid_"+this[0])){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)(r("",this[0],this[2],this[1],this[3]));(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("ui_scroll_content",e).appendChild(o),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.addEvent)(o,"click",wall.setReplyAsGroup.pbind(_,{from:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(o,"from-oid")})),window.replyAsData[this[0]]||(window.replyAsData[this[0]]=this)}})),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("_post_from_tt_row_searchable",e),setTimeout((function(){t.scroll.update(),t.updatePosition()}),0),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.hideProgress)(n)}),(function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.hideProgress)(n)}))}),500)}(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.each)(i,(function(_,e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggle)(e,""===o||-1!==e.innerText.toLowerCase().indexOf(o))}))}))}this.rows=o,this.scroll=new uiScroll((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("_post_scroll_wrap",e)),setTimeout((function(){t.scroll.update(),t.updatePosition()}),0)},onShow:function(_){setTimeout((function(){if(t.scroll){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("active",_),o=e?e.offsetTop-(t.scroll.data.viewportHeight-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(e)[1])/2:0;t.scroll.scrollTop(o);var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("post_from_tt_row_search",_);l&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.elfocus)(l)}}),0)},onHide:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("post_from_tt_row_search",_);e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(e,"")}}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(_,"tt",t)}e&&t.isShown()&&!_.hasAttribute("data-disallow-profile")&&wall.setReplyAsGroup(_,{from:i==vk.id?e:vk.id}),_.tt&&_.tt.hide&&_.tt.hide(),t.isShown()||t.show()},reportPost:function(_,e,o){window.stManager.add([window.jsc("web/privacy.js"),"privacy.css"],(function(){return Privacy.show(_,e,"report_"+o)}))},parsePostId:_web_wall_wall_utils__WEBPACK_IMPORTED_MODULE_61__.parseObjectPostId,likeIt:function(_,e,o,t){if((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.stopEvent)(t),!vk.id)return!1;if(cur.viewAsBox)return cur.viewAsBox(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(t);var l,i=wall.parsePostId(e),a=i.type,s=i.id,r=_&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("_post_content",_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",_))||wall.domPost(s),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(r,"_like_wrap"),E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(n,"_count"),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(n,"my_like");l=e==cur.wallLayer?"wkview":cur.wallType?"feed"==cur.wallType?"news"==cur.section?"feed_"+(cur.subsection?cur.subsection:cur.section):"recommended"==cur.section?"feed_recommended"+("recent"!=cur.subsection?"_"+cur.subsection:""):"friends"==cur.section||"groups"==cur.section||"videos"==cur.section||"photos"==cur.section?"feed_"+cur.section+(cur.subsection?"_"+cur.subsection:""):"feed_"+cur.section:"top"==cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module,ajax.post("like.php",{act:d?"a_do_unlike":"a_do_like",object:a+s,hash:o,wall:2,from:l},{onDone:Wall.likeFullUpdate.pbind(_,e),onFail:function(){return!0}});var c=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.stripHTML)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(E)).replace(/(\s|,)/g,"");return Wall.likeUpdate(_,e,!d,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(c)+(d?-1:1)),"wall"==a&&window.cur.onLike&&window.cur.onLike(_,a,e,d),cur.onWallLike&&cur.onWallLike(),"wall"==a&&Wall.triggerAdStat(s,"like_post"),!1},likesShow:function(_,e,o){if(!_.postDontShowLikes){o=o||{};var t=wall.parsePostId(e),l=t.type,i=t.id,a=l+i,s=_&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("_post_content",_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",_))||wall.domPost(i),r=o.views?"_views_wrap":o.share?"_share_wrap":"_like_wrap",n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(s,r),E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"_feedback_info_item")?_:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(n,"_icon"),d=s&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(s,"_share_wrap");if(E&&!cur.viewAsBox){var c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(n)[0],b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(E)[0],P=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(E,!0)[0],u=b+P/2-c-41,D=o.views?{views:1}:o.share?{published:1}:{};if(o.listId&&(D.list=o.listId),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(E,"_feedback_info_item")){var p=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByTag1)("em",E);u=-40,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(E,"feedback_share")&&(u+=7),u+=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(p)[0]/2}var w=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(E,"_feedback_info_item")?E:E.parentNode;(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_35__.showTooltip)(w,{url:"/like.php",params:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)({act:"a_get_stats",object:a,has_share:d?1:""},D),slide:15,shift:[-u,o.views?2:"wall_reply"==l?-3:7],ajaxdt:100,showdt:400,hidedt:200,dir:"auto",checkLeft:!0,reverseOffset:80,noZIndex:!0,tip:{over:function(){Wall.likesShow(_,e,o)}},onShowStart:function(){var e=w.tt.container;setTimeout((function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.setStyle)(e,{left:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.floatval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getStyle)(e,"left"))+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(E)[0]-b})}),10),(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_41__.statlogsValueEvent)("likes_show",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"shown"))},typeClass:"like_tt",className:o.cl||""})}}},likesShowList:function(_,e,o){o=o||{};var t=wall.parsePostId(e),l=t.type,i=t.id,a=l+i,s=_&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("_post_content",_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",_))||wall.domPost(i),r=o.share?"_share_wrap":"_like_wrap",n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(s,r);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domByClass)(n,"_icon")&&!cur.viewAsBox&&(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_33__.showWiki)({w:(o.views?"views":o.share?"shares":"likes")+"/"+(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clean)(a)},!1,!1,{queue:1})},sharesShow:function(_,e,o){Wall.likesShow(_,e,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(o,{share:1}))},sharesShowList:function(_,e,o){Wall.likesShowList(_,e,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(o,{share:1}))},viewsShowList:function(_,e,o){Wall.likesShowList(_,e,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)(o,{views:1}))},viewsUpdate:function(_,e){var o=wall.parsePostId(e),t={act:"a_get_stats",object:o.type+o.id,views:1};ajax.post("/like.php",t,{cache:1,onDone:function(o,l){Wall.likeUpdate(!1,e,!1,o,void 0,void 0,1);var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{innerHTML:l});_.setAttribute("title",i.innerText||i.textContent),setTimeout(ajax.invalidate.pbind("/like.php",t),3e3)}})},sharesOpen:function(_,e,o){if(cur.viewAsBox)return cur.viewAsBox(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(_);if(!vk.id)return!1;(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.stopEvent)(_);var t=wall.parsePostId(e),l=t.type,i=t.id,a=l+i;return(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showBox)("/like.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)({act:"publish_box",object:a},o)),"wall"==l&&Wall.triggerAdStat(i,"share_post"),!1},customCur:function(){return window.wkcur&&wkcur.shown?wkcur:window.mvcur&&mvcur.mvShown?mvcur:window.pvcur&&cur.pvShown?pvcur:cur},processPostReplyActions:function(_){},updatePostAuthorData:function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("_post_author_data_"+_).forEach((function(_){_.post_author_data_update=!0}))},closeComments:function(_,e,o,t,l){var i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"closed"))?0:1;ajax.post("al_wall.php",{act:"close_comments",owner_id:e,post_id:o,close:i,hash:t},{onDone:function(){if(l)l(i);else{var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",_);Wall.onCloseComments(i,e)}}})},onCloseComments:function(_,e,o){if(e&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(e,"postponed")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(e,"post")&&!vk.widget){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("comment",e),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("reply_box_inner_wrap",e),i=cur.pgParams&&cur.pgParams.archive||"wall_archive"===cur.module,a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(e,"Post--with_closed_comments_donut");if(o||a||t&&l){i||a||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(e,"closed_comments",_);var s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("action_closing_comments",e);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(s,"closed",_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(s,_?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_open_comments"):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_closing_comments"))}else{var r=e.id.replace("post","").split("_");ajax.post("al_wall.php",{act:"comment_box",owner_id:r[0],post_id:r[1]},{onDone:function(o,t){if(!i){var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("comment",e),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("reply_box_inner_wrap",e);if(!l&&o)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("PostButtonReactionsContainer",e).after((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)(o));if(!a&&t){var s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("replies_list",e);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertAfter)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)(t),s)}}Wall.onCloseComments(_,e,!0)}})}}},showPostEditedTime:function(_){var e=(cur.lang||{}).wall_changed;if(e){var o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"time")),t=60*((new Date).getTimezoneOffset()+180);o&&(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_35__.showTooltip)(_,{text:e.replace("{time}",(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_45__.getDateText)(o,t)),black:1,shift:[0,4]})}},showPostAuthorData:function(_,e){var o=_.className.match(/_post_author_data_(-?\d+_\d+)/)[1]||"",t=e?e.target:window.event.srcElement;!o||t!=_&&t.onmouseover||(_.post_author_data_update&&(delete _.post_author_data_update,_.post_author_data_tt&&(_.post_author_data_tt.destroy(),_.post_author_data_tt=!1)),_.post_author_data_tt||ajax.post("al_page.php",{act:"post_author_data_tt",raw:o},{onDone:function(e){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("post_link",_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domFC)(_);if(e&&t){var l={content:e,arrowSize:"mini",cls:"post_author_data",defaultSide:"bottom",align:"left",id:"author_tt_"+o},i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("_im_mess_stack",_);i?l.appendTo=i:l.appendToParent=!0,vk.widget&&(l.offset=[0,-2],l.forceSide="bottom"),_.post_author_data_tt=new ElementTooltip(t,l),_.post_author_data_tt.show()}else _.post_author_data_tt=!0}}))},createPostTooltip:_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_57__.createPostTooltip,hidePostCopyrightFeatureTooltip:function(){cur.postCopyrightFeatureTooltip&&cur.postCopyrightFeatureTooltipHash&&(cur.postCopyrightFeatureTooltip=!1,cur.postCopyrightFeatureTT.hide(),setTimeout((()=>{cur.postCopyrightFeatureTT.destroy()}),ElementTooltip.FADE_SPEED),ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.postCopyrightFeatureTooltipHash,type:"post_copyright"}))},showPostCopyrightFeatureTooltip:function(){if(cur.postCopyrightFeatureTooltip&&!cur.postCopyrightFeatureTT){var _=setTimeout((()=>{var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_settings_btn");_&&cur.postCopyrightFeatureTooltip&&(cur.postCopyrightFeatureTT=new ElementTooltip(_,{content:`<div class="feature_tooltip__close" onclick="Wall.hidePostCopyrightFeatureTooltip();"></div>${(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_post_copyright_feature_text")}`,cls:"feature_intro_tt feature_info_tooltip",forceSide:"bottom",autoShow:!1,noOverflow:!1,noHideOnClick:!0,appendToParent:!0,offset:[-6.5,-8],onShow:()=>{ajax.post("al_index.php",{act:"show_feature_tt",hash:cur.postCopyrightFeatureTooltipHash,type:"post_copyright"})},onWindowClick:()=>{cur.postCopyrightFeatureTT&&(cur.postCopyrightFeatureTT.hide(),cur.postField.blur())}}),cur.postCopyrightFeatureTT.show())}),800);cur.destroy.push((()=>clearTimeout(_)))}},hidePosterFeatureTooltip:function(){cur.posterFeatureTooltip=!1,cur.posterFeatureTT&&cur.posterFeatureTooltipHash&&(cur.posterFeatureTT.destroy(),cur.posterFeatureTT=null,ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.posterFeatureTooltipHash,type:"poster_new_year"}))},showPosterFeatureTooltip:function(){if(cur.posterFeatureTooltip){var _=setTimeout((function(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domQuery1)(".poster__open-btn",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("page_poster_btn"));if(_&&cur.posterFeatureTooltip){var e='<div class="poster_feature_tt__layout" onclick="cur.posterFeatureTT.hide(); cancelEvent(event);"><div class="poster_feature_tt__close"></div><div class="poster_feature_tt__info">'+(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_new_posters_new_year")+"</div>";cur.posterFeatureTT=new ElementTooltip(_,{content:e,forceSide:"bottom",cls:"eltt_fancy poster_feature_tt",autoShow:!1,noOverflow:!1,align:"left",centerShift:-28,noHideOnClick:!0,appendToParent:!0,offset:[0,-8],onHide:Wall.hidePosterFeatureTooltip,onWindowClick:function(){cur.posterFeatureTT.hide(),cur.postField.blur()}}),cur.posterFeatureTT.show(),cur.poster&&cur.poster.sendStatsInfo("new_bkg_tooltip_show")}}),800);(0,_shared_lib_nav_helpers__WEBPACK_IMPORTED_MODULE_86__.pushNavDestroy)((()=>{clearTimeout(_)}))}},replyEditPhoto:function(_,e,o){return Wall.showEditReply(e,null,!1,!1,!1,(function(){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_more_attaches"+e);if(o){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("ms_item_photo",o);tooltips.hide(_),t&&t.click()}})),o&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(o)},replyMoreAttachShow:function(_,e,o){return Wall.showEditReply(e,null,!1,!1,!0,(function(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("ms_items_more_wrap",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_more_attaches"+e));_&&(_.focus(),_.click())})),o&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(o)},replyFakeEmojiOver:function(_){wall.initEditReply(_,!1,!0,(function(){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_smile"+_);if(e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("emoji_smile",e);null==o.onmouseenter||o.onmouseenter()}}))},hideDeepReplies:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(e,"reply")&&(e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",e),_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"post-id"));var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"replies-offset")||0,t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"replies-limit")||3,l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+_),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(cur.wallTpl.reply_deep_next,{post_id:_,reply_id:_,offset:o,count:t,text:"",class:" replies_next_main"}));l.innerHTML="",l.appendChild(i),(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_42__.scrollToY)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(l)[1]-100,0,null,!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(i,"collapse",!0),i.click(),cur.wallMyOpened[_]=0},addNewReply:function(_){var e,o=_[2],t=(_[10]||"").match(/wall.showReply\([^-)0-9]*(-?[_0-9]+)[^-)0-9]*(-?[_0-9]+)[^-)0-9]*\)/),l=t&&t[2]||"",i=l&&l!==o,a=cur.wallLayer&&cur.wallLayer===o,s=a?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+o):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+o),r=s.offsetHeight,n=0,E=0;e=i?wall._addDeepReply(_,l):wall._addRootReply(_);var d=a?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("wl_post"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+o);return wall.incReplyCounter(d,1,_[13]),a?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("wl_replies_wrap",d)),cur.count++,cur.loaded++):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.show)("replies_wrap"+o),Wall.repliesSideSetup(o)),Wall.updateMentionsIndex(),e&&((0,_web_stories_narrative_utils__WEBPACK_IMPORTED_MODULE_66__.updateNarrativeSnippetsFromQueueByPost)(e),(0,_web_articles_article_utils__WEBPACK_IMPORTED_MODULE_67__.updateArticleSnippetsFromQueueByPost)(e),(0,_web_stickers_utils__WEBPACK_IMPORTED_MODULE_74__.updateStickersFromQueue)(e),n=s.offsetHeight-r,E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(e,a)[1]),[n,E]},_addDeepReply:function(_,e){var o,t=_[2],l=_[10]||"",i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)(l),a=i&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(i,"root-id")||e,s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+a),r=s&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("replies_wrap_deep",s),n=cur.wallLayer&&cur.wallLayer===t?wkcur:cur;if(r&&(a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(r,"post-id"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+a)),!s)return null;var E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+a);if(!E){wall.addDeepRepliesBlock(a);var d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_fakebox"+a)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_box"+a);d&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hide)(d),o=E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+a)}if(!E)return null;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("reply",E).length){var c=wall._addNewReplyShowMore(t,a,E,"replies_next_deep");o=o||c}else{var b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_short_deep"+a),P=wall.isDescRepliesOrder(t);if(b){var u=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("replies_short_text_count",b),D=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(u).replace(/[^0-9]/g,""))||0;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(u,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_replied_to_reply_count",D+1))}else{b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(n.wallTpl.reply_deep_short,{post_id:t,reply_id:a,reply_msg_id:a.split("_")[1],img_src:_[6]||"",name:_[5]||"",count:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("global_replied_to_reply_count",1)}));var p=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domFC)(E);if(p)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertBefore)(b,p),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(p,"replies_next_deep")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.toggleClass)(p,"replies_prev",P);else{E.appendChild(b);var w=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(n.wallTpl.reply_deep_next,{post_id:t,reply_id:a,offset:0,count:1,text:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_next_n_replies",1),class:" replies_next_deep"+(P?" replies_prev":"")}));E.appendChild(w)}}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(r,"replies_deep_has_short"),o=b}return wall.updateCollapseDeepReplies(a),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.removeClass)(r,"replies_deep_empty_list"),o},_addRootReply:function(_){var e=_[2],o=cur.wallLayer&&cur.wallLayer===e,t=o?wkcur:cur,l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+e),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domChildren)(l).length,a="full"===t.wallType,s=!i||i<3&&(o||a),r=wall.isDescRepliesOrder(e);if(s){var n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.intval)(_[_.length-1]),E=void 0!==t.options.is_admin?t.options.is_admin:t.options.wall_oid<0?8&n?_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.EDITOR:2&n?_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.MODERATOR:_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.USER:_shared_groups_constants__WEBPACK_IMPORTED_MODULE_75__.GroupAdminLevel.USER,d=Wall.getNewReplyHTML(_,E,!1,t);if(!d)throw new Error("Failed to add root reply");var c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)(d);return(0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.highlightUpdatedReply)(c),r&&l.firstChild?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertBefore)(c,l.firstChild):l.appendChild(c),c}return wall._addNewReplyShowMore(e,e,l,"replies_next_main",r)},_addNewReplyShowMore:function(_,e,o,t,l){var i,a,s=cur.wallLayer&&cur.wallLayer===_?wkcur:cur,r=s.options.replies_page_count||20,n=l?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domFC)(o):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domLC)(o);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(n,"replies_next"))return(i=+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(n,"count")||0)<r?(i++,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(n,"count",i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(n,l?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_prev_n_replies",i):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_next_n_replies",i))):l&&(a=+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(n,"offset")||0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(n,"offset",a+1)),n;if(l)a=0;else{var E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)(t,o),d=E[E.length-1],c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domChildren)(o);if(d){var b=+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(d,"count")||r,P=+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(d,"offset")||0,u=c.indexOf(d);u=(u>=0?u:0)+1,a=P+b+c.slice(u).filter((function(_){return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"reply")})).length}else a=c.filter((function(_){return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(_,"reply")})).length}var D=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(s.wallTpl.reply_deep_next,{post_id:_,reply_id:e,offset:a,count:1,text:l?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_prev_n_replies",1):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_next_n_replies",1),class:" "+(l?" replies_prev":"")+(t?" "+t:"")}));return l?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertBefore)(D,o.firstChild):o.appendChild(D),(0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_59__.loadRepliesLinkShow)(D),D},removeDeepReply:function(_){var e=_[2],o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+e),t=0,l=0;if(cur.wallMyDeleted[e]||!o)return[t,l];l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getXY)(o,cur.layerpost)[1],(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_44__.revertLastInlineVideo)(o);var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",o)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",o),a=i?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(i,"post-id"):"",s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("replies_wrap_deep",o);if(s)t=-o.offsetHeight,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.getSize)(s)[1]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(s,"replies_deep_empty_list"),wall.updateCollapseDeepReplies(e);else if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_wrap_deep"+e)){var r=cur.wallLayer&&cur.wallLayer===a?wkcur:cur,n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("reply_date",o),E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("reply_link_wrap",o),d="",c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.attr)(o,"onclick");c&&(d+=' onclick="'+c+'"');var b=e.split("_")[0],P=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(b<0?r.wallTpl.reply_deleted_group:r.wallTpl.reply_deleted_user,{reply_id:e,date:n?n.innerHTML:"",answer:E?E.outerHTML:"",class:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"reply_replieable")?" reply_replieable":"",attr:d})),u=o.offsetHeight;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domReplaceEl)(o,P),t=P.offsetHeight-u}else t=-o.offsetHeight,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.re)(o);return cur.layerpost&&(cur.count--,cur.loaded--),i&&(wall.repliesSideSetup(a),wall.incReplyCounter(i,-1)),[t,l]},addDeepRepliesBlock:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post"+_);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(e,"reply")){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("wl_post",e)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("post",e);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.hasClass)(o,"deep_active")){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(o,"post-id"),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies_wrap_deep"+_),i=(cur.wallLayer?wkcur:cur).wallTpl;l||(l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(i.reply_deep,{post_id:t,reply_id:_,reply_msg_id:_.split("_")[1],text:"",offset:0,class:" replies_next_deep"})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domInsertAfter)(l,e));var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_fakebox"+_),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_box"+_);if(!a&&!s){var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_fakebox"+t)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("reply_box"+t),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("checkbox_official",r)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.gpeByClass)("reply_fakebox_with_official",r),E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(i.reply_box,{post_id:_,owner_name:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.clean)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(r,"owner-name")||""),owner_photo:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(r,"owner-photo")||"",owner_href:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(r,"owner-href")||"",owner_is_nft:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(r,"owner-is-nft")||"",can_reply_as_group:n||"",class:n?" reply_fakebox_with_official":""}));l.appendChild(E),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.addClass)(l,"replies_deep_has_field")}}}},addReplyName:function(_,e){var o={};o[_]=e,wall.addReplyNames(o)},addReplyNames:function(_){var e=cur.wallLayer?wkcur:cur;e.options||(e.options={}),e.options.reply_names=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_39__.extend)({},e.options.reply_names,_)},getReplyNames:function(){return(cur.wallLayer?wkcur:cur).options.reply_names||{}},getReplyName:function(_){return cur.pvShown&&cur.pvReplyNames?cur.pvReplyNames[_]||[]:window.mvcur&&mvcur.mvShown&&!mvcur.minimized?mvcur.mvReplyNames[_]||[]:wall.getReplyNames()[_]||[]},showReorderRepliesTooltip:function(_,e){var o=cur.wallLayer&&cur.wallLayer===e?wkcur:cur;if(!o["postRepliesReorderTT"+e]&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.data)(_,"ett")){var t,l=_.closest(".post_replies_reorder_wrap");t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"hide-smart")||!1?o.wallTpl.replies_reorder_tooltip:o.wallTpl.replies_reorder_tooltip_with_smart;var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(t||"",{postId:e})),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("radiobtn",i),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"order")||"asc",r="post_replies_reorder"+e;radioBtns[r]={val:s,els:a},a.some((function(_){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"order")===s)return(0,_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_57__.updatePostTooltipActionRadioBtn)(_,!0,r),!0}));var n=new ElementTooltip(_,{appendTo:null==l?void 0:l.parentNode,forceSide:"bottom",autoShow:!1,cls:"eltt_fancy eltt_fancy_actions",noOverflow:!1,centerShift:0,offset:[-10,0],content:i,align:"left"});o["postRepliesReorderTT"+e]=n,(0,_shared_lib_nav_helpers__WEBPACK_IMPORTED_MODULE_86__.pushNavDestroy)((()=>{n&&n.destroy()})),n.show()}},reorderReplies:function(_,e,o){var t=cur.wallLayer&&cur.wallLayer===e?wkcur:cur;o=o||"asc",(0,_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_57__.updatePostTooltipActionRadioBtn)(_,o,"post_replies_reorder"+e);var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_replies_reorder"+e),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"label")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(_),a=null==l?void 0:l.querySelector(".post_replies_reorder");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(a,i),l&&(l.setAttribute("aria-label",i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(l,"order",o)),t["postRepliesReorderTT"+e]&&t["postRepliesReorderTT"+e].hide(),wall.moreReplies(e,0,0,{deep:!0,clear:!0,order:o,onDone:function(_,o,t){var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("replies"+e);if(t.count>t.offset+t.num){var i=cur.wallLayer&&cur.wallLayer===e?wkcur:cur,a=i.options.replies_page_count||20,s=Math.min(a,t.count-t.offset-t.num),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.se)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.rs)(i.wallTpl.reply_deep_next,{post_id:e,reply_id:e,offset:t.offset+t.num,count:s,text:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("wall_next_n_replies",s),class:" replies_next_main"}));l.appendChild(r)}t.top_reply_ids&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(l,"top-ids",t.top_reply_ids.join(",")),cur.wallMyOpened=cur.wallMyOpened||{},cur.wallMyOpened[e]=1,wall.repliesSideSetup(e)}})},getRepliesOrder:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ge)("post_replies_reorder"+_);return(e?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(e,"order"):"")||"asc"},isDescRepliesOrder:function(_,e){return"desc"===(e=e||wall.getRepliesOrder(_))},postEventChangeStatus:function(_,e,o,t){var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.domData)(_,"context"),i=()=>document.querySelectorAll(".post_event_action_btn"+e);return window.stManager.add([window.jsc("web/groups.js")],(()=>{Groups.enter(_,e,o,l,((_,o,t)=>{var a=l.split("_"),s=!a[1],r=a[0]+"_"+(s?"decline":""),n=s?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("events_snippet_will_participate_active"):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("events_snippet_cant_participate_active");t=t||{},i().forEach((_=>{_.dataset.context=r,_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.setAppearance(_,_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButtonAppearance.SECONDARY),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.setLabel(_,n)})),t.members&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass)("page_media_event"+e).forEach((_=>{var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.geByClass1)("page_media_event_members",_);e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.val)(e,t.members)}))}),{showProgress:()=>{i().forEach((_=>{_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.lock(_)}))},hideProgress:()=>{i().forEach((_=>{_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_71__.FlatButton.unlock(_)}))}})})),t&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_34__.cancelEvent)(t)},showEventFriends:function(_,e){(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_35__.showTooltip)(_,{url:"/al_groups.php",params:{act:"a_event_friends_tt",owner_id:e},ajaxdt:100,showdt:400,hidedt:200,dir:"auto",noZIndex:!0,typeClass:"like_tt"})},updateRepliesOnScroll:function(){cur.wallLayer?WkView.wallUpdateRepliesOnScroll():"full"===cur.wallType&&FullWall.onePostOnScroll()},updateConvertedClassifiedPost:function(_){var e=_.postId,o=_.ownerId;ajax.post("al_wall.php",{act:"s_one",post_id:e,owner_id:o,render_context:"wall",only_post:!0},{onDone:_=>{var t=Wall.domPost(`${o}_${e}`);if(t&&_){var l=document.createElement("div");l.innerHTML=_,t.querySelector(".post_info").innerHTML=l.querySelector(".post_info").innerHTML}}})},updatePost:function(_,e,o,t,l,i,a){var s,r=e.split("_"),n=r[0],E=r[1];_&&n&&E&&ajax.post("al_wall.php",{act:"s_one",lang:"to_original"!==t?o:"",post_id:E,owner_id:n,render_context:l||"wall",ref:i||"",loc_context:a||"",only_post:!0},{onDone:_=>{Wall.sendTranslationClickStats(e,t,o);var l=Wall.domPost(e);if(l&&_){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.ce)("div",{innerHTML:_});l.querySelector(".wall_text").innerHTML=i.querySelector(".wall_text").innerHTML}},onFail:()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.setStyle)(_,{"pointer-events":null}),_.querySelector(".PostTranslationButton__text").innerText=s},showProgress:()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_32__.setStyle)(_,{"pointer-events":"none"}),s=_.querySelector(".PostTranslationButton__text").innerText,_.querySelector(".PostTranslationButton__text").innerText=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_31__.getLang)("pages_translation_translation_loading")}})},sendTranslationClickStats(_,e,o){(0,_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_70__.saveStatlogEvents)({name:"translation_click",value:0,keys:[_,e,o]})},sendFakeNewsMark:function(_,e,o,t,l){var i="data-mark-exists",a={post_id:o,owner_id:t,mark:1===parseInt(_.getAttribute(i))?0:1,hash:l},s={onDone(e,o){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.showDoneBox)(e),_.innerHTML=o,_.setAttribute(i,a.mark)},onFail:_=>(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_50__.showErrorBox)(_),showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockActionsMenuItem)(_),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockActionsMenuItem)(_)};ajax.post(e,a,s)},sendToObsceneCheck:function(_,e,o,t,l){var i={post_id:o,owner_id:t,hash:l},a={onDone(_){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.showDoneBox)(_)},onFail:_=>(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_50__.showErrorBox)(_),showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockActionsMenuItem)(_),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockActionsMenuItem)(_)};ajax.post(e,i,a)},toggleDowngradeState:function(_,e,o,t,l){var i="data-downgraded",a={post_id:o,owner_id:t,set:1===parseInt(_.getAttribute(i))?0:1,hash:l},s={onDone(e,o){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_40__.showDoneBox)(e),_.innerHTML=o,_.setAttribute(i,a.set)},onFail:_=>(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_50__.showErrorBox)(_),showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.lockActionsMenuItem)(_),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_37__.unlockActionsMenuItem)(_)};ajax.post(e,a,s)},initPostWarningField(){var _;if(!window.cur.postWarningField){window.cur.postWarningField=document.createElement("span"),window.cur.postWarningField.classList.add("post_field_warning");var e=null==(_=window.cur.postField)?void 0:_.parentElement;e&&e.appendChild(window.cur.postWarningField)}},handleClassifiedsFlashMessageState(_){var e,o=null==(e=cur.editingPost)?void 0:e[0];if(o){var t=o.split("_")[1],l=document.getElementById("classifieds-flash-message-"+t);if(l)switch(_){case"hide":l.classList.add("ClassifiedsGroupPostFlashMessage--hidden");break;case"show":l.classList.remove("ClassifiedsGroupPostFlashMessage--hidden")}}},showPostGeoBanBox(_,e){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showBox)("groups_wall_posts_geoban.php",{act:"manage_geoban_box",gid:_,post_id:e})},initPostGeoBan(_,e,o){this.geoBlockCountryElement=document.getElementById("post_geoban_country"),this.geoBlockCountries=e.values,this.geoBlockCommentField=document.getElementById("post_geoban_comment"),this.geoBlockComments=e.comments,this.geoBlockDoAction=o=>{ajax.post("groups_wall_posts_geoban.php",{act:"a_set_post_geoban",status:o,comment:this.geoBlockCommentField.value,country:this.geoBlockCountry.val(),post_id:_,hash:e.hash},{onDone:()=>{window.nav.reload()},onFail:_=>(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_36__.showFastBox)("Ошибка",_)})},this.geoBlockBanAction=()=>{this.geoBlockDoAction(1)},this.geoBlockUnbanAction=()=>{this.geoBlockDoAction(0)},this.geoBlockCountryChange=()=>{var _=this.geoBlockCountry.val();this.geoBlockComments[_]?(this.geoBlockCommentField.value=this.geoBlockComments[_],this.geoBlockCommentField.disabled=!0,o.setButtons("Разблокировать",this.geoBlockUnbanAction)):(this.geoBlockCommentField.value="",this.geoBlockCommentField.disabled=!1,o.setButtons("Заблокировать",this.geoBlockBanAction))},this.geoBlockCountry=new Dropdown(this.geoBlockCountryElement,this.geoBlockCountries,{big:1,selectedItems:[],onChange:this.geoBlockCountryChange}),this.geoBlockCountryChange(),(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_76__.autosizeSetup)("post_geoban_comment",{minHeight:60})}},_sendClassifiedsAutoRecognized,_sendPostOrClassifieds,_sendSimplePost;const __WEBPACK_DEFAULT_EXPORT__=Wall},371066:(_,e,o)=>{"use strict";o.d(e,{VISIBILITY_ACCESS_OPTIONS:()=>t,MIN_NFT_IMAGE_SIZE:()=>l,REPLY_IMAGE_DEFAULT_SIZE:()=>i,REPLY_IMAGE_SMALL_SIZE:()=>a,EVENT_REPLY_FIELD_IS_NFT_INDEX:()=>s});var t={PUBLIC:0,ONLY_FRIENDS:1,ONLY_BEST_FRIENDS:2},l=29,i=34,a=24,s=16},783140:(_,e,o)=>{"use strict";o.d(e,{removeAvatarRichOutlineAtNode:()=>i});var t=o(570655),l=o(8034);function i(_,e,o){var i,a,s;switch(o){case l.AvatarRichOutlineType.STORIES_UNSEEN:s="AvatarRich__outline--stories-unseen";break;case l.AvatarRichOutlineType.STORIES_SEEN:s="AvatarRich__outline--stories-seen";break;case l.AvatarRichOutlineType.LIVE:s="AvatarRich__outline--live";break;case void 0:s="AvatarRich__outline"}var r=_.querySelectorAll("."+s+'[data-outline-id="'+e+'"]');try{for(var n=(0,t.__values)(r),E=n.next();!E.done;E=n.next()){var d=E.value,c=d.closest(".AvatarRich");null==c||c.removeAttribute("onclick"),null==c||c.classList.remove("AvatarRich--outlined");var b=d.closest(".nft_avatar_wrap");null==b||b.removeAttribute("onclick"),d.remove()}}catch(_){i={error:_}}finally{try{E&&!E.done&&(a=n.return)&&a.call(n)}finally{if(i)throw i.error}}}},880235:(_,e,o)=>{"use strict";o.d(e,{BestFriendsEventType:()=>t,sendBestFriendsAnalytic:()=>a});var t,l=o(479957),i=o(19331);function a(_,e){var o={event_type:_,nav_screen:e||window.cur.module};(0,i.partConfigEnabled)("best_friends_analytics_log")&&console.log(o),(0,l.statlogsValueEvent)("best_friends_product_analytic",o)}!function(_){_.addFriendsFromChat="add_friends_from_chat",_.clear="clear",_.moreChats="more_chats",_.selectFriendFromSearch="select_friend_from_search",_.selectChatFromSearch="select_chat_from_search",_.saveBestFriendsList="save_best_friends_list",_.updatePopupSave="update_popup_save",_.updatePopupCancel="update_popup_cancel",_.createPostFromPopupBest="create_post_from_popup_best",_.createPostFromPopupFriends="create_post_from_popup_friends",_.clickToLockFriends="click_to_lock_friends",_.clickToLockBestFriends="click_to_lock_best_friends",_.editBestFriendsFromPopup="edit_best_friends_from_popup",_.editBestFriends="edit_best_friends",_.selectBestFriends="select_best_friends",_.clickToBestFriendsEntrypoint="click_to_best_friends_entrypoint"}(t||(t={}))},341319:(_,e,o)=>{"use strict";var t,l,i,a,s;o.d(e,{StoryType:()=>t,StoryEntryPoint:()=>l,StorySource:()=>i,StoryBlockType:()=>a,StoryListName:()=>s}),function(_){_.PHOTO="photo",_.VIDEO="video",_.LIVE="live"}(t||(t={})),function(_){_.SWIPE="swipe",_.NAVIGATION_BUTTON="navigation_button",_.SIT_POSTING="sit_posting",_.LINK="link",_.STORY_REPLY="story_reply",_.STORY_REPOST="story_repost",_.CATALOG_ADD="catalog_add",_.DIALOG="dialog",_.STORY_LIVE_FINISHED="story_live_finished",_.DIALOG_VKME="dialog_vkme",_.STORY_VIEWER_FINISHED="story_viewer_finished",_.PUSH_TRY_MASK="push_try_mask",_.STORY_VIEWER_TRY_MASK="story_viewer_try_mask",_.LINK_MASK="link_mask",_.POSTING="posting",_.NEW_STORY_AVATAR="new_story_avatar",_.STORY_REPLIES_LIST="story_replies_list",_.STORIES_FEED="stories_feed",_.STORIES_SEARCH_NEWS="stories_search_news",_.QUESTION_STICKER="question_sticker",_.LIST_MIDDLE="list_middle",_.ARCHIVE_EMPTY_BUTTON="archive_empty_button",_.ARCHIVE_MENU_BUTTON="archive_menu_button",_.IM="im",_.PROFILE_BUTTON="profile_button",_.SHARE="share",_.MINI_APP="mini_app",_.SYSTEM_SHARING="system_sharing",_.SHORTCUT="shortcut",_.ARCHIVE_SHARING="archive_sharing",_.STORY_VIEWER_CAMERA_BUTTON="story_viewer_camera_button",_.STORY_VIEWER_MUSIC="story_viewer_music",_.STORY_VIEWER_MUSIC_SHEET="story_viewer_music_sheet",_.REPOST_TO_STORY_ACTIVITY="repost_to_story_activity",_.CHANGE_AVATAR="change_avatar"}(l||(l={})),function(_){_.FEED="feed",_.FEED_MIDDLE="feed_middle",_.LINK="link",_.PROFILE="profile",_.IM_DIALOGS="im_dialogs",_.IM_DIALOG_HEADER="im_dialog_header",_.SNIPPET="snippet",_.REPLY="reply",_.REPLIES_LIST="replies_list",_.REPLY_STORY="reply_story",_.DISCOVER="discover",_.STORIES_MANAGE="stories_manage",_.USER_PERSONAL_CARD="user_personal_card",_.GROUP_PERSONAL_CARD="group_personal_card",_.NARRATIVE_SNIPPET="narrative_snippet",_.NARRATIVE_STORY="narrative_story",_.NARRATIVE_LINK="narrative_link",_.NARRATIVE_RECOMMENDATIONS="narrative_recommendations",_.NARRATIVE_SECTION="narrative_section",_.FAVE="fave",_.SPAMFEED="sf",_.ADS_PREVIEW="ads_preview",_.LIST_MIDDLE="list_middle",_.PLACE_STORY_LIST="place_story_list",_.SEARCH_STORY_LIST="search_story_list",_.STORY_ARCHIVE="story_archive",_.IM_MSG_LIST="im_msg_list",_.NOSPAM="nospam",_.PROFILE_SNACKBAR="profile_snackbar",_.MY_QUESTIONS="questions"}(i||(i={})),function(_){_.stories="stories",_.communityGroupedStories="community_grouped_stories",_.appGroupedStories="app_grouped_stories",_.discover="discover"}(a||(a={})),function(_){_.feed="feed",_.groups="groups",_.apps="apps",_.discover="discover"}(s||(s={}))},749091:(_,e,o)=>{"use strict";var t;o.d(e,{Theme:()=>t,imageSizesIndex:()=>i,imageSizeCache:()=>a,createProductsMap:()=>s,UserProductStateKey:()=>l,isBasePack:()=>n,isStyleProduct:()=>E,isPackProduct:()=>d,ProductsByType:()=>c}),function(_){_.LIGHT="light",_.DARK="dark",_.DEFAULT="light"}(t||(t={}));var l,i=Symbol(),a=Symbol(),s=function(_){return new Map(_)};!function(_){_.IsNew="is_new"}(l||(l={}));var r,n=function(_){return void 0!==_.sticker_ids},E=function(_){return void 0!==_.base_id},d=function(_){return n(_)&&!E(_)};!function(_){_.Pack="pack",_.Style="style"}(r||(r={}));var c=function(){function _(_){var e=this;void 0===_&&(_=[]),this.pack=new Set,this.style=new Set,_.forEach((function(_){return e.add(_)}))}return _.prototype.add=function(_){_&&(d(_)?this.pack.add(_):E(_)&&this.style.add(_))},_.prototype.getPack=function(){return this.pack.values().next().value},_.prototype.getStyles=function(){return Array.from(this.style.values())},_.prototype.getCount=function(){return this.pack.size+this.style.size},_}();!function(){function _(_){var e=this;this.pack=[],this.style=[],_.forEach((function(_){return e.add(_)}))}_.prototype.add=function(_){var e=_.product;e&&(d(e)?this.pack.push(_):E(e)&&this.style.push(_))}}()},434396:(_,e,o)=>{"use strict";function t(_){try{_.offsetWidth,_.offsetHeight}catch(_){}}o.d(e,{reflow:()=>t})},911372:(_,e,o)=>{"use strict";o.d(e,{getPostTopicSelectorParams:()=>l.getPostTopicSelectorParams,isPostTopicEditingEnabled:()=>l.isPostTopicEditingEnabled,isPostTopicSettingEnabled:()=>l.isPostTopicSettingEnabled,topicUISelectorHide:()=>s.topicUISelectorHide,initPostTopicCreatingSelector:()=>n,initPostTopicEditingSelector:()=>E});var t=o(348935),l=o(468990),i=o(364229),a=o(64846),s=o(596531),r=function(_,e,o,l){var s=t.TopicUISelector.create(e,{linkId:_,selectTopicId:i.selectTopicId});if(s)return(0,i.initActionsParamsState)(_,s,l),s.selectTopicId(o[a.WallPostParams.topicId]),{clearSelection:function(){s.clearSelection()},onDestroy:function(){s.destroy()}}},n=function(_,e,o){var t;return r(_,e,((t={})[a.WallPostParams.topicId]=l.TOPIC_ID_NONE,t),o)},E=function(_,e,o,t){var i,s;return r(_,e,((i={})[a.WallPostParams.topicId]=null!==(s=o[a.WallPostParams.topicId])&&void 0!==s?s:l.TOPIC_ID_NONE,i),t)}},64846:(_,e,o)=>{"use strict";var t;o.d(e,{WallPostParams:()=>t}),function(_){_.topicId="topic_id"}(t||(t={}))},364229:(_,e,o)=>{"use strict";o.d(e,{getSelectorRegistry:()=>a,initActionsParamsState:()=>s,getActionParams:()=>r,selectTopicId:()=>E});var t=o(570655),l=o(64846),i=new Map,a=function(_){return i.get(_)},s=function(_,e,o){return function(_,e){return i.set(_,e)}(_,{actionParams:void 0,selector:e,onChange:o})},r=function(_){var e;return null===(e=i.get(_))||void 0===e?void 0:e.actionParams},n=function(_,e){!function(_,e){var o=i.get(_);void 0!==o&&i.set(_,e(o))}(_,(function(_){return(null==_?void 0:_.onChange)&&_.onChange(null==e?void 0:e.topic_id),(0,t.__assign)((0,t.__assign)({},_),{actionParams:e})}))},E=function(_,e){var o;n(_,((o={})[l.WallPostParams.topicId]=e,o))}},468990:(_,e,o)=>{"use strict";o.d(e,{TOPIC_ID_NONE:()=>i,getPostTopicSelectorParams:()=>a,isPostTopicSettingEnabled:()=>s,isPostTopicEditingEnabled:()=>r});var t=o(64846),l=o(364229),i=-1,a=function(_){var e,o,a=null===(o=(0,l.getActionParams)(_))||void 0===o?void 0:o[t.WallPostParams.topicId];return void 0!==a&&a!==i?((e={})[t.WallPostParams.topicId]=a,e):void 0},s=function(_){return!0===(null==_?void 0:_.wallPostTopicSettingEnabled)},r=function(_){return void 0!==_.topic_options}},348935:(_,e,o)=>{"use strict";o.d(e,{TopicUISelector:()=>d});var t=o(99392),l=o(315544),i=o(49535),a=o(596531),s=o(468990),r=o(40906),n=o(830104),E=o(963188),d=function(){function _(_,e,o,s){var r=this;this.btnEl=_,this.containerEl=e,this.options=o,this.selectorContentEl=s,this.onOptionClickWrapper=function(){for(var _=[],e=0;e<arguments.length;e++)_[e]=arguments[e];r.tooltip.hide();var o=_[0].currentTarget;if(o instanceof HTMLElement){var t=(0,n.getJsonDataValue)(o,"data-click-params");t&&r.selectTopicId(t.value)}},this.linkId=this.options.linkId,this.radioBtnId=(0,a.getTooltipId)(this.options.linkId),window.radioBtns[this.radioBtnId]={val:!1,els:s.children},this.tooltip=new t.ElementTooltip(_,{appendTo:e,forceSide:"bottom",autoShow:!1,cls:"eltt_fancy eltt_fancy_actions",noOverflow:!1,centerShift:0,offset:[-12*(window.vk.rtl?-1:1),7],content:s,align:"left",onFirstTimeShow:function(){(0,l.show)(s)}}),(0,l.domQuery)('[data-onclick="togglePostTopic"]',e).forEach((function(_){(0,i.addEvent)(_,"click",r.onOptionClickWrapper)}))}return _.create=function(e,o){var t=(0,a.renderSelector)(e,o.linkId);if(t){var i=this.getSelectorContentEl(t),s=(0,l.domQuery1)(".post_action_btn_layout",t);if(i&&s)return new _(s,t,o,i)}},_.getSelectorContentEl=function(_){return(0,l.domQuery1)(".post_action_tt_content",_)},_.prototype.destroy=function(){this.tooltip.destroy(),delete window.radioBtns[this.radioBtnId]},_.prototype.tooltipHide=function(){this.tooltip.hide()},_.prototype.selectTopicId=function(_){this.options.selectTopicId(this.linkId,_),this.updateViewForSelectedTopic({isTopicSelected:_!==s.TOPIC_ID_NONE,topicId:_})},_.prototype.clearSelection=function(){this.selectTopicId(s.TOPIC_ID_NONE)},_.prototype.updateViewForSelectedTopic=function(e){var o=e.isTopicSelected,t=e.topicId,i=_.getSelectOptionEl(this.containerEl,t),s=i&&(0,n.getJsonDataValue)(i,"data-click-params"),d=(0,l.domQuery1)(".post_action_btn_text",this.containerEl);if(i&&s&&d){var c=s.label;(0,E.updatePostTooltipActionRadioBtn)(i,void 0,(0,a.getTooltipId)(this.options.linkId));var b=d.getAttribute("data-empty")||"",P=o?c:b;d.innerHTML=P,d.setAttribute("aria-label",(0,r.replaceEntities)(P)),(0,l.toggleClass)(this.containerEl,"on",o)}},_.getSelectOptionEl=function(_,e){return(0,l.domQuery1)('[data-value="'+e+'"]',_)},_}()},596531:(_,e,o)=>{"use strict";o.d(e,{getTooltipId:()=>a,renderSelector:()=>s,topicUISelectorHide:()=>r});var t=o(315544),l=o(695724),i=o(364229),a=function(_){return"post_discover_category_btn"+_},s=function(_,e){var o,i,a=(o={link_id:String(e)},(i=(0,l.getTemplate)("postCategorySelect",o))?(0,t.se)(i):null);if(_ instanceof HTMLElement&&a instanceof HTMLElement)return _.appendChild(a),a},r=function(_){var e,o;null===(o=null===(e=(0,i.getSelectorRegistry)(_))||void 0===e?void 0:e.selector)||void 0===o||o.tooltipHide()}},367733:(_,e,o)=>{"use strict";o.d(e,{ClassifiedsWallForm:()=>d});var t,l,i=o(570655),a=o(315893),s=o(189798),r=o(833796),n=o(850167),E=o(40906);!function(_){_.unknown="unknown",_.emptyMessage="empty_message",_.wrongAttachAdded="wrong_attach_added",_.wrongSettingAdded="wrong_setting_added",_.detectClassifiedsNotProduct="detect_classifieds_not_product"}(t||(t={})),function(_){_.unknown="unknown",_.attached="snipped_attached",_.deletedByUser="snipped_user_deleted",_.autoDeleted="snipped_auto_deleted"}(l||(l={}));var d=function(){function _(_){var e=this,o=_.interval,i=_.ownerId,s=_.isNativeFormEnabled,r=void 0!==s&&s,n=_.isFormAutoRecognitionEnabled,E=void 0!==n&&n,d=_.isClassifiedsAutoRecognitionPostBarEnabled,c=void 0!==d&&d;this.productData=null,this.productWasUnChosen=!1,this.formWasDisabled=!1,this.snippetStatus=l.unknown,this.removeReason=t.unknown,this.ownerId=i,this.isNativeFormEnabled=r,this.isFormAutoRecognitionEnabled=E,this.isClassifiedsAutoRecognitionPostBarEnabled=c;var b=(0,a.throttle)(this.autoRecognitionPostCheck,o);this.throttleAutoRecognitionPostCheck=function(_){e.draftIdBeforeThrottle=e.draftId,b.call(e,_)},this.reset(),this.updateDraftId(),this.draftIdBeforeThrottle=this.draftId}return _.prototype.isNativeCreateEnabled=function(){return this.isNativeFormEnabled},_.prototype.isAutoRecognitionEnabled=function(){return!this.isNativeFormEnabled&&this.isFormAutoRecognitionEnabled},_.prototype.isClassifiedsFormEnabled=function(){return this.isAutoRecognitionEnabled()||this.isNativeCreateEnabled()},_.prototype.isClassifiedsAutoRecognitionBarEnabled=function(){return this.isClassifiedsAutoRecognitionPostBarEnabled},_.prototype.autoRecognitionPostCheck=function(_){var e;return(0,i.__awaiter)(this,void 0,void 0,(function(){var o,l,a,s,r,n,E;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if((null===(e=this.productData)||void 0===e?void 0:e.description)===_||!_||this.draftIdBeforeThrottle!==this.draftId||window.cur.postSent||this.productWasUnChosen||!this.isAutoRecognitionEnabled()||!this.checkIfRecognitionNeeded())return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),o=this.draftId,[4,this.requestClassifiedsCheck({post_text:_,dry_run:1,is_auto_recognition:1,owner_id:this.ownerId})];case 2:return l=i.sent(),a=l.is_classifieds_product,s=l.price,r=l.title,n=l.ml_response,window.cur.postSent||!window.Wall.getMessage()||o!==this.draftId||this.productWasUnChosen||!this.checkIfRecognitionNeeded()?[2]:(a&&r?this.setProductData({price:s?s.toString():"",title:r,description:_,ml_response:n}):this.removeProductData(t.detectClassifiedsNotProduct),[3,4]);case 3:return E=i.sent(),console.error("AutoRecognition error:",E),[3,4];case 4:return[2]}}))}))},_.prototype.setProductData=function(_){var e;this.productData||null===(e=window.ClassifiedsViewAnalytics)||void 0===e||e.logAutoRecognitionSnippetAttached(window.cur.module,{owner_id:this.ownerId,draft_id:this.draftId}),this.snippetStatus=l.attached,this.productData=_,this.updateSnippetProductData()},_.prototype.removeProductData=function(_){if(this.productData){var e=window.cur.wallAddMedia||{};this.clearProductData(),this.removeReason=_,window.cur.noDraftSave=!1,null==e||e.unchooseMediaForType(r.MEDIA_SELECTOR_PRODUCT)}},_.prototype.updateSnippetProductData=function(){var _;if(!this.productWasUnChosen&&!this.formWasDisabled&&this.productData){var e,o=window.cur.wallAddMedia||{},t=(window.cur.wallAddMedia?o.getMedias():[]).find((function(_){return"photo"===(0,i.__read)(_,1)[0]}));if(t&&t[5]){var l=t[5],a=JSON.parse(l.view_opts);e=(null===(_=null==a?void 0:a.temp)||void 0===_?void 0:_.x)||l.thumb_m}var s=(0,i.__assign)((0,i.__assign)({},this.productData),{img:e});window.cur.noDraftSave=!1,null==o||o.addOrUpdateChosenMedia(r.MEDIA_SELECTOR_PRODUCT,void 0,s)}},_.prototype.showCrossPosting=function(_){var e=_.crossposting_url_hash,o=_.product_link,t=_.miniapp_id;if(this.ownerId&&this.ownerId>0)(0,n.showWiki)({w:o});else{var l={layer:!0,url_hash:e+"&force_crossposting_result=true",onHide:function(){return(0,n.showWiki)({w:o})}};(0,n.showApp)(void 0,t,!1,null,null,l)}},_.prototype.disable=function(){this.removeProductData(t.wrongSettingAdded),this.formWasDisabled=!0},_.prototype.reset=function(){this.clearProductData(),this.productWasUnChosen=!1,this.formWasDisabled=!1,this.removeReason=t.unknown,this.snippetStatus=l.unknown},_.prototype.updateDraftId=function(){this.draftId=(0,E.irand)(0,1e7)},_.prototype.onMessageChange=function(_){_?this.throttleAutoRecognitionPostCheck(_):this.removeProductData(t.emptyMessage)},_.prototype.onMediaAdd=function(_){var e=_.type;this.productWasUnChosen||this.formWasDisabled||("photo"===e?this.updateSnippetProductData():e!==r.MEDIA_SELECTOR_PRODUCT&&this.removeProductData(t.wrongAttachAdded))},_.prototype.onMediaRemove=function(_){var e,o;if(void 0===_&&(_={}),!this.productWasUnChosen&&!this.formWasDisabled){var t=_.removedTypes,a=void 0===t?[]:t,s=_.source,n=_.isReset;if(a.includes(r.MEDIA_SELECTOR_PRODUCT)){this.productWasUnChosen=!0,this.clearProductData();var E={owner_id:this.ownerId,draft_id:this.draftId};n||("close"===s?(this.snippetStatus=l.deletedByUser,null===(e=window.ClassifiedsClickAnalytics)||void 0===e||e.logAutoRecognitionSnippetUserDeletedEvent(window.cur.module,E)):(this.snippetStatus=l.autoDeleted,null===(o=window.ClassifiedsClickAnalytics)||void 0===o||o.logAutoRecognitionSnippetAutoDeletedEvent(window.cur.module,(0,i.__assign)((0,i.__assign)({},E),{snippet_delete_reason:this.removeReason}))))}else this.updateSnippetProductData()}},_.prototype.requestClassifiedsCheck=function(_){return(0,s.api)("classifieds.detectClassifieds",(0,i.__assign)({snippet_status:this.snippetStatus,draft_id:this.draftId},_))},_.prototype.simpleCreateProduct=function(_){return(0,s.api)("classifieds.simpleCreateProduct",_)},_.prototype.autoRecognitionCreateProduct=function(_){return(0,s.api)("classifieds.autoRecognitionCreateProduct",(0,i.__assign)((0,i.__assign)({},_),{draft_id:this.draftId}))},_.prototype.checkIfRecognitionNeeded=function(){var _;if(this.formWasDisabled||(null===(_=window.cur.poster)||void 0===_?void 0:_.isOpen()))return!1;var e=window.cur.wallAddMedia||{},o=window.cur.wallAddMedia?e.getMedias():[],t=o.some((function(_){var e=(0,i.__read)(_,1)[0];return!["photo",r.MEDIA_SELECTOR_PRODUCT].includes(e)}));return!(t||o.length>=10)},_.prototype.clearProductData=function(){this.productData=null},_.prototype.getPostBar=function(_){var e=(0,i.__read)(_.split("_"),2)[1];return document.getElementById("classifiedsBar-"+e)},_.prototype.hideAutoRecognitionPostBar=function(_){var e=this.getPostBar(_);e&&(e.style.display="none")},_.prototype.showAutoRecognitionPostBar=function(_){var e=this.getPostBar(_);e&&(e.style.display="block")},_.prototype.deleteAutoRecognitionPostBar=function(_){var e=this.getPostBar(_);null==e||e.remove()},_}()},560717:(_,e,o)=>{"use strict";o.d(e,{highlightModule:()=>E});var t,l,i=o(601261),a=o(635429),s=o(803834),r=o(315544),n=o(997109);function E(_){var e=document.getElementById(_.module);if(e&&e.classList.contains("module")){window.cur.__narrowBarForceNotFixed=!0;var o=_.speed?_.speed:300;(0,s.scrollToY)((0,r.getXY)(e)[1]-100,o);var E=function(){t&&(t.hideTT(),(0,s.enableBodyScroll)(),delete window.cur.__narrowBarForceNotFixed,(0,a.updateNarrow)(),_.onClose&&_.onClose())};(t=new i.default(e,_.text,{highlight:!0,width:250,offset:[0,-17],side:"bottom",withCloseButton:!0,onBGClick:E,onCloseButtonClick:E})).show(),(0,s.disableBodyScroll)(),_.autoCancelDelay&&(l=setTimeout((function(){E(),l=null}),_.autoCancelDelay),(0,n.pushNavDestroy)((function(){l&&clearTimeout(l)})))}}},399103:(_,e,o)=>{"use strict";o.d(e,{getNavigableTabs:()=>l,showHiddenNavigableTabs:()=>i});var t=o(315544),l=function(_){var e=document.querySelector("#wall_tabs");return e?Array.from(e.querySelectorAll(".ui_tab")).filter((function(e){var o=e.parentNode;return null!==o&&o!==_&&!(0,t.hasClass)(o,"unshown")&&!(0,t.matchesSelector)(o,'[data-ui-tab="no_posts"]')})):[]},i=function(){var _=document.querySelector("#wall_tabs"),e=null==_?void 0:_.querySelector(".page_wall_no_posts");null==e||e.remove(),(0,t.removeClass)(document.querySelector("#wall_tabs"),"page_tabs_hidden")}},689840:(_,e,o)=>{"use strict";o.d(e,{removeUnseenStories:()=>b,checkPostLen:()=>u,getPostAvatarString:()=>D});var t=o(570655),l=o(315544),i=o(695724),a=o(124041),s=o(70162),r=o(96535),n=o(783140),E=o(8034),d=o(761717),c=o(371066);function b(_){var e,o,l;if(P(document,_),null===(l=window.wkcur)||void 0===l?void 0:l.pageReplaced)try{for(var i=(0,t.__values)(window.wkcur.pageReplaced),a=i.next();!a.done;a=i.next()){P(a.value[0],_)}}catch(_){e={error:_}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}}function P(_,e){var o,l,i,a,s,d,c=_.querySelectorAll(".reply_image_stories_unseen"+e);try{for(var b=(0,t.__values)(c),P=b.next();!P.done;P=b.next()){(w=P.value).classList.remove("reply_image_stories_unseen","reply_image_stories_unseen"+e),null===(s=(0,r.replyUserImageLinkClosest)(w))||void 0===s||s.removeAttribute("onclick")}}catch(_){o={error:_}}finally{try{P&&!P.done&&(l=b.return)&&l.call(b)}finally{if(o)throw o.error}}(0,n.removeAvatarRichOutlineAtNode)(_,String(e),E.AvatarRichOutlineType.STORIES_UNSEEN);var u=_.querySelectorAll(".post_image_stories_unseen"+e);try{for(var D=(0,t.__values)(u),p=D.next();!p.done;p=D.next()){var w;(w=p.value).classList.remove("post_image_stories_unseen","post_image_stories_unseen"+e),null===(d=w.closest(".post_image, ._post_image"))||void 0===d||d.removeAttribute("onclick")}}catch(_){i={error:_}}finally{try{p&&!p.done&&(a=D.return)&&a.call(D)}finally{if(i)throw i.error}}}function u(_,e,o,t){var r;if(_){var n=null===(r=window.cur.options)||void 0===r?void 0:r.max_post_full_length;if(!n)return!0;var E=(0,l.ge)(_);if(E){var d=(0,i.trim)(window.Emoji.val(E)).replace(/\n\n\n+/g,"\n\n");if(E.lastLen===d.length&&!t)return E.lastLen<=n;var c=E.lastLen=d.length;if(e=(0,l.ge)(e),c>n-100){var b=c>n;if(e&&(b?(o&&(a.FlatButton.isFlatButton(o)?a.FlatButton.setDisabled(o,!0):(0,l.toggleClass)(o,"button_disabled",!0)),e.innerHTML=(0,s.getLang)("text_exceeds_symbol_limit",c-n),(0,l.toggleClass)(e,"post_field_warning_red",!0)):e.innerHTML=(0,s.getLang)("text_N_symbols_remain",n-c),(0,l.show)(e)),b)return!1}else e&&(0,l.hide)(e);return e&&(0,l.toggleClass)(e,"post_field_warning_red",!1),o&&(a.FlatButton.isFlatButton(o)?a.FlatButton.setDisabled(o,!1):(0,l.toggleClass)(o,"button_disabled",!1)),!0}}}var D=function(_,e,o,t,l){void 0===o&&(o=c.REPLY_IMAGE_DEFAULT_SIZE),void 0===t&&(t=!1);var i=[e,"_post_field_image"];return l&&i.push(l),(0,d.renderAvatarToString)(_,o,null,i,null,void 0,!1,void 0,"",!(o<c.MIN_NFT_IMAGE_SIZE)&&t)}},856901:(_,e,o)=>{"use strict";o.d(e,{PROFILE_MEDIA_NARROW_BLOCK_ID:()=>t});var t="profile_media_narrow_block"},507794:(_,e,o)=>{"use strict";o.d(e,{getReactionsButtonPostTemplate:()=>d,getReactionsButtonReplyTemplate:()=>c,likeDataReactionsFields:()=>u});var t=o(19331),l=o(315544),i=o(95146),a=o(385667),s=o(517760),r=o(714396),n=function(_,e){var o,t=null===(o=function(_){try{var e=JSON.parse(_);if(null!==e&&"object"!=typeof e)return;return e}catch(_){return}}(_))||void 0===o?void 0:o.set_id,i="string"==typeof t?t:void 0;if(e&&i){var r=(0,a.getReactionSet)(i);if(r)return{likeClassName:"like_btn--hidden PostBottomAction--hidden",template:(0,l.rs)(e,{reactions_button_title:(0,s.getDefaultReactionTitle)(r)||"",reactions_set_id:i})}}},E=function(_,e){return e.length>_},d=function(_,e){var o,t=null===(o=null==e?void 0:e.wallTpl)||void 0===o?void 0:o.post_likes_reactions,l=E(14,_)?_[14]:void 0;if("string"==typeof l)return n(l,t)},c=function(_,e){var o,l=null===(o=null==e?void 0:e.wallTpl)||void 0===o?void 0:o.reply_likes_reactions;if((0,t.partConfigEnabled)("reactions_enabled_post_replies")){var i=E(14,_)?_[14]:void 0;if("string"==typeof i)return n(i,l)}},b=function(_){var e=JSON.parse(_);if(null===e||"object"==typeof e||Array.isArray(e)){var o;if(Array.isArray(e))e=(0,r.reactionCountsBrandWrap)((o=e,Object.assign({},o)));return e}},P=function(_){var e=E(5,_)?_[5]:void 0;if("string"==typeof e){var o=function(_){var e=_.indexOf(";"),o=_.substr(0,e),t=_.substr(e+1);if("1"===o)return b(t)}(e);if(o)return{counts:o}}},u=function(_){var e,o=P(_);return(e={})[i.REACTIONS_COUNTS_RESPONSE_FIELD]=null==o?void 0:o.counts,e}},348230:(_,e,o)=>{"use strict";o.d(e,{getBoxLayerWrap:()=>E,showLoader:()=>d,hideLoader:()=>c,getPurchaseResult:()=>b,updateStickersFromQueue:()=>P});var t=o(786067),l=o(70162),i=o(511417),a=o(315544),s=o(486125),r=o(749091);function n(){return document.querySelector("#box_loader")}function E(){return document.querySelector("#box_layer_wrap")}function d(){var _=n();(0,s.boxRefreshCoords)(_),(0,a.show)(_),(0,a.show)(E())}function c(){(0,a.hide)(n())}function b(_){var e=new r.ProductsByType(_.items.filter((function(_){return!_.error})).map((function(_){return _.product}))),o=e.getPack(),i=e.getStyles();if(o)return i.length?(0,t.langStr)((0,l.getLang)("purchases_stickers_purchase_result_pack_and_styles",i.length),"pack_title",o.title,"n",i.length):(0,t.langStr)((0,l.getLang)("purchases_stickers_purchase_result_pack"),"title",o.title);if(i.length)switch(i.length){case 1:return(0,t.langStr)((0,l.getLang)("purchases_stickers_purchase_result_1_style"),"title",i[0].title);case 2:return(0,t.langStr)((0,l.getLang)("purchases_stickers_purchase_result_2_styles"),"title1",i[0].title,"title2",i[1].title);case 3:return(0,t.langStr)((0,l.getLang)("purchases_stickers_purchase_result_3_styles"),"title1",i[0].title,"title2",i[1].title,"title3",i[2].title);case 4:return(0,t.langStr)((0,l.getLang)("purchases_stickers_purchase_result_3_styles_and_1_more"),"title1",i[0].title,"title2",i[1].title,"title3",i[2].title);default:var a=i.length-3;return(0,t.langStr)((0,l.getLang)("purchases_stickers_purchase_result_3_styles_and_n_more",a),"title1",i[0].title,"title2",i[1].title,"title3",i[2].title,"n",a)}return null}function P(_){var e,o;e=_,o=i.colorScheme.isDarkScheme()?"data-src-dark":"data-src-light",e.querySelectorAll(".sticker_img["+o+"]").forEach((function(_){var e=_.getAttribute(o);e&&(_.src=e)}))}},652745:(_,e,o)=>{"use strict";o.d(e,{prepareStoriesForPublishing:()=>c,updateNarrativeBlock:()=>b,highlightNarrativeBlock:()=>P,updateNarrativeSnippetsFromQueueByPost:()=>u});var t=o(315544),l=o(486125),i=o(560717),a=o(786067),s=o(40906),r=o(856901),n=o(533228),E=o(66433),d=o(19331);function c(_){return _.map((function(_){return _.id})).join(",")}function b(_){void 0===_&&(_=!1);var e=(0,s.intval)(window.cur.oid);if(window.cur.narrativeBlock)window.ajax.post("al_stories.php",{act:"get_narrative_block",owner_id:e},{onDone:function(_){var e=(0,s.intval)(window.cur.oid),o=document.getElementById("narratives_module"+e+"_wrapper");if(o)if(_)(0,t.domReplaceEl)(o,_),window.cur.narrativeBlock&&window.cur.narrativeBlock.destroy(),window.NarrativeBlock&&(window.cur.narrativeBlock=new window.NarrativeBlock);else{var l=o.parentElement;(null==l?void 0:l.children.length)&&(null==l?void 0:l.children.length)>1?o.remove():null==l||l.remove(),window.cur.narrativeBlock&&window.cur.narrativeBlock.destroy(),delete window.cur.narrativeBlock}(0,n.removeStoryList)("narratives"+e)}});else if(e>0&&"profile"===window.cur.module){var o=document.getElementById(r.PROFILE_MEDIA_NARROW_BLOCK_ID),i=!o;window.ajax.post("al_stories.php",{act:"get_narrative_block",owner_id:e,need_wrap_block:(0,s.intval)(i)},{onDone:function(_){if(o)o.insertAdjacentHTML("afterbegin",_);else{var t=document.getElementById("narrow_column");if(!t)return;t.insertAdjacentHTML("beforeend",_)}window.cur.narrativeBlock&&window.cur.narrativeBlock.destroy(),window.NarrativeBlock&&(window.cur.narrativeBlock=new window.NarrativeBlock,window.cur.narrativeBlock.showOnboardTooltipIfNeeded()),(0,n.removeStoryList)("narratives"+e)}})}else _&&function(_){window.boxQueue.hideAll();var e=document.querySelector("#box_layer_wrap"),o=document.querySelector("#box_loader");window.nav.reload({onDone:function(){_&&_()},showProgress:function(){(0,t.show)(e),(0,t.show)(o),(0,l.boxRefreshCoords)(o)},hideProgress:function(){(0,t.hide)(e),(0,t.hide)(o)}})}((function(){window.cur.needNarrativeOnboard=!0}))}function P(_){if(_){var e="narratives_module"+window.vk.id;(0,i.highlightModule)({module:e,text:(0,a.getLang)("stories_narrative_block_onboarding_text"),onClose:function(){delete window.cur.needNarrativeOnboard,window.ajax.post("al_index.php",{act:"hide_feature_tt",hash:_,type:"profile_narrative"})},autoCancelDelay:1e4,speed:600})}}function u(_){if(window.vk.id&&(0,d.partConfigEnabled)("update_private_snippets_by_queue")){var e=Array.from(_.querySelectorAll(".NarrativeSnippet"));if(e.length){var o=[];e.forEach((function(_){if(window.vk.id&&_.dataset.needUpdate){var e=_.dataset.narrativeRawId;e&&o.push({narrative_raw_id:e,snippet_type:_.dataset.snippetType,from:_.dataset.from})}})),o.length&&window.ajax.post("al_stories.php",{act:"get_narrative_snippets",narrative_snippets:JSON.stringify(o)},{onDone:function(_){e.forEach((function(e){e.dataset.narrativeRawId&&_[e.dataset.narrativeRawId]&&(e.outerHTML=_[e.dataset.narrativeRawId])}))},onFail:function(){return(0,E.logError)(new Error("Fail: updateNarrativeSnippetFromQueueByPost")),!0}})}}}},533228:(_,e,o)=>{"use strict";o.d(e,{getVolume:()=>r,setVolume:()=>n,getStoryList:()=>E,removeStoryList:()=>d,preloadDiscoverList:()=>c,fetchDiscover:()=>b,isDiscoverLoading:()=>P,getStoryBlockKey:()=>u,createUserStackMaskIfNeeded:()=>D,isNewDesignEnabled:()=>p});var t=o(570655),l=o(341319),i=o(315544),a=o(19331),s=o(997109);function r(){var _=window.ls.get("video_volume");return"number"==typeof _?Math.min(1,Math.max(0,_)):1}function n(_){window.ls.set("video_volume",_)}function E(_){return window.cur["stories_list_"+_]}function d(_){delete window.cur["stories_list_"+_]}function c(_){if(void 0===_&&(_=!1),window.cur.storiesDiscoverFetchingPromise)return window.cur.storiesDiscoverFetchingPromise;var e,o,i=E(l.StoryListName.feed);return i&&(o=i.find((function(_){return _.type===l.StoryBlockType.discover})))&&(e=o.track_code),window.cur.storiesDiscoverFetchingPromise=b("",e,_).then((function(_){var e=(0,t.__read)(_,2),l=e[0],i=e[1];return o&&(o.grouped=l,o.next_from=i),l})).finally((function(){delete window.cur.storiesDiscoverFetchingPromise})),window.cur.storiesDiscoverFetchingPromise}function b(_,e,o,t){return void 0===_&&(_=""),void 0===e&&(e=""),void 0===o&&(o=!1),void 0===t&&(t=15),new Promise((function(l,i){window.ajax.post("al_stories.php",{act:"get_discover",start_from:_,count:t,track_code:e},{loader:o,onDone:function(_,e){l([_,e])},onFail:function(_){return i(_),!0}})}))}function P(){return Boolean(window.cur.storiesDiscoverFetchingPromise)}function u(_){var e,o,t;return(null===(e=null==_?void 0:_.author)||void 0===e?void 0:e.id)&&(null===(o=null==_?void 0:_.narrative)||void 0===o?void 0:o.id)?_.author.id+"narrative"+(null===(t=_.narrative)||void 0===t?void 0:t.id):""+_.id}function D(){var _="users_stack_stories_mask",e=document.getElementById(_);e||(e=(0,i.se)('\n        <svg width="0" height="0">\n          <defs>\n            <clipPath id="'+_+'">\n              <path transform="translate(1.5 0)" d="M1.20772 8C1.20772 6.32671 0.768742 4.75626 0 3.39821C1.44342 1.34278 3.8277 0 6.52463 0C10.9293 0 14.5 3.58172 14.5 8C14.5 12.4183 10.9293 16 6.52463 16C3.8277 16 1.44342 14.6572 0 12.6018C0.768742 11.2437 1.20772 9.6733 1.20772 8Z"></path>\n            </clipPath>\n          </defs>  \n        </svg>  \n      '))&&(document.body.appendChild(e),(0,s.pushNavDestroy)((function(){null==e||e.remove()})))}function p(){return(0,a.partConfigEnabled)("story_reactions_sending_feature_web")}},934821:(_,e,o)=>{"use strict";o.d(e,{scrollOutsideFixedReplyArea:()=>i});var t=o(315544),l=o(439265),i=function(_,e){if(_ instanceof HTMLElement&&e instanceof HTMLElement){var o="fixed"===(0,t.getStyle)(e,"position"),i=void 0!==window.cur.wallLayer;if(o){var a=_.getBoundingClientRect(),s=20-(e.getBoundingClientRect().top-a.bottom);s>0&&(0,l.scrollActiveAreaToYDelta)(s)}else{if(i)return;var r=e.closest(".replies_wrap");r&&function(_){var e=(0,t.clientHeight)();if(_.getBoundingClientRect().bottom>e){var o=(0,t.getXY)(_)[1]+(0,t.getH)(_)-e;(0,l.setActiveAreaScroll)(o)}}(r)}}}},836455:(_,e,o)=>{"use strict";o.d(e,{subscribeToAuthor:()=>c,subscribeByAction:()=>b,subscribeByButton:()=>P,postSubscribeHandlerInit:()=>D});var t=o(570655),l=o(386409),i=o(695724),a=o(315544),s=o(146143),r=o(293680),n=o(786067),E=o(453580),d="_subscribed";function c(_,e,o,l,i){var a=(0,t.__assign)({onFail:function(_){setTimeout((0,s.showFastBox)((0,n.getLang)("global_error"),_).hide,3e3)}},l);i=i||{},e>0?r.ajax.post("al_friends.php",(0,t.__assign)({act:_?"remove":"add",mid:e,hash:o,from:"post_subscribe_button"},i),a):r.ajax.post("al_groups.php",(0,t.__assign)({act:_?"list_leave":"list_enter",gid:-e,hash:o},i),a)}function b(_,e,o,r){if(!(0,l.actionsMenuItemLocked)(_)){var E=(0,i.intval)((0,a.domData)(_,"value"))?1:0,d={showProgress:function(){return(0,l.lockActionsMenuItem)(_)},hideProgress:function(){return(0,l.unlockActionsMenuItem)(_)}},b={};e>0&&r?b.from=r:e<0&&(d=(0,t.__assign)((0,t.__assign)({},d),{onDone:function(t,l,i){if(l){var r=(0,s.showFastBox)((0,n.getLang)("global_warning"),l,(0,n.getLang)("group_leave_group"),(function(){r.hide(),c(E,e,o,d,{confirm:1})}),(0,n.getLang)("global_cancel"));return!0}(0,a.val)(_,t),_.setAttribute("data-value",String(1-E)),i&&((0,a.re)((0,a.domNS)(_)),(0,a.re)(_))}})),c(E,e,o,d,b)}}function P(_,e,o,t){var i=(void 0===t?{}:t).query,a=_.querySelector(".post_header_subscribe_button_loader"),s="post_header_subscribe_button_icons_only_loading",r=_.classList.contains(d);c(r,e,o,{onDone:function(){(0,E.emitEvent)(E.WallDataEvents.post_subscribe_update,{groupId:-e,isSubscribed:!r})},showProgress:function(){_.classList.toggle(s,!0),(0,l.showProgress)(a)},hideProgress:function(){_.classList.toggle(s,!1),(0,l.hideProgress)(a)}},i)}var u=function(_){var e=_.isSubscribed,o=_.groupId,t=document.querySelector('[id^="post-'+o+'"]'),l=null==t?void 0:t.querySelector(".post_header_subscribe_button");l&&l.classList.toggle(d,e)},D=function(){return(0,E.registerUniqueListener)("wall-post-subscribe",E.WallDataEvents.post_subscribe_update,u)}},329979:(_,e,o)=>{"use strict";o.d(e,{highlightUpdatedPost:()=>l,highlightUpdatedPostContent:()=>i});var t=o(830104),l=function(_){(0,t.triggerAnimationClass)(_,"post_highlight_updated",3e3)},i=function(_){(0,t.triggerAnimationClass)(_,"post_highlight_updated_content",3e3)}},639809:(_,e,o)=>{"use strict";o.d(e,{getFixedReplyField:()=>t,replyBoxOwnerIsNftFromAttr:()=>l});var t=function(){var _,e;return window.cur.wallLayer?null!==(_=document.getElementById("wl_reply_form"))&&void 0!==_?_:void 0:"full"===window.cur.wallType&&null!==(e=document.querySelector("#reply_box_wrap"+window.cur.oid+"_"+window.cur.pid+" .reply_box_inner_wrap"))&&void 0!==e?e:void 0},l=function(_){return"1"===_}},870841:(_,e,o)=>{"use strict";o.d(e,{wallPostRenderInit:()=>i});var t=o(130273),l=o(836455),i=function(){(0,t.postRenderReactionsInit)(),(0,l.postSubscribeHandlerInit)()}},439265:(_,e,o)=>{"use strict";o.d(e,{setActiveAreaScroll:()=>l,scrollActiveAreaToYDelta:()=>i});var t=o(803834),l=function(_){window.cur.wallLayer?window.wkLayerWrap&&(window.wkLayerWrap.scrollTop=_):(0,t.scrollToY)(_,0,!1,!0)},i=function(_){var e,o;l((window.cur.wallLayer?null!==(o=null===(e=window.wkLayerWrap)||void 0===e?void 0:e.scrollTop)&&void 0!==o?o:0:(0,t.scrollGetY)())+_)}},29376:(_,e,o)=>{"use strict";o.d(e,{parseObjectPostId:()=>t,buildOwnerDraftKey:()=>l});o(570655),o(522683);var t=function(_){var e=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/);if(e)return{type:e[3]||"wall",id:e[1]+"_"+e[4]}},l=function(_){return"wall_draft"+window.vk.id+"_"+_}}}]);try{stManager.done("dist/1e75ef28305c20cac23ba6c77c19e06c.d492aac14de741e3f217.js")}catch(_){}